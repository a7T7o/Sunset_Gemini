# å†œç”°ç³»ç»Ÿé‡æ„ - å…¨é¢å®¡æŸ¥æŠ¥å‘Š

**å®¡æŸ¥æ—¥æœŸ**: 2026-01-24  
**å®¡æŸ¥äºº**: Code Reaper  
**å®¡æŸ¥èŒƒå›´**: éœ€æ±‚æ–‡æ¡£ã€è®¾è®¡æ–‡æ¡£ã€ä»£ç å®ç°

---

## ä¸€ã€å®¡æŸ¥æ€»ç»“

### æ•´ä½“è¯„ä»·

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| éœ€æ±‚è¦†ç›–åº¦ | â­â­â­â­â˜† (4/5) | æ ¸å¿ƒåŠŸèƒ½å·²å®ç°ï¼Œéƒ¨åˆ†ç»†èŠ‚å¾…å®Œå–„ |
| è®¾è®¡ä¸€è‡´æ€§ | â­â­â­â­â­ (5/5) | ä»£ç ç»“æ„ä¸è®¾è®¡æ–‡æ¡£é«˜åº¦ä¸€è‡´ |
| ä»£ç è´¨é‡ | â­â­â­â­â˜† (4/5) | ç»“æ„æ¸…æ™°ï¼Œæœ‰å°‘é‡å¯ä¼˜åŒ–ç‚¹ |
| ç³»ç»Ÿé›†æˆ | â­â­â­â­â˜† (4/5) | ä¸ç°æœ‰ç³»ç»Ÿé›†æˆè‰¯å¥½ï¼Œæœ‰ 1 å¤„ TODO |

### å…³é”®å‘ç°

âœ… **ä¼˜ç‚¹**:
1. æ¶æ„è®¾è®¡æ¸…æ™°ï¼Œå•ä¸€èŒè´£åŸåˆ™æ‰§è¡Œåˆ°ä½
2. æ•°æ®ä¸é€»è¾‘åˆ†ç¦»ï¼ŒCropInstanceData çº¯æ•°æ®ç±»è®¾è®¡æ­£ç¡®
3. æ—¶é—´äº‹ä»¶ä½¿ç”¨é™æ€è®¢é˜…ï¼Œç¬¦åˆé¡¹ç›®è§„èŒƒ
4. æ€§èƒ½ä¼˜åŒ–è®¾è®¡ï¼ˆwateredTodayTilesï¼‰å·²è½å®
5. ç»Ÿä¸€æ¯èé¢œè‰²å·²æ­£ç¡®å®ç°

âš ï¸ **å¾…å®Œå–„**:
1. èƒŒåŒ…æ¶ˆè€—ç§å­çš„ TODO æœªå®ç°
2. æ¥¼å±‚æ£€æµ‹é€»è¾‘æš‚æ—¶ç¡¬ç¼–ç è¿”å› 0
3. éƒ¨åˆ†éªŒæ”¶æ ‡å‡†éœ€è¦ç”¨æˆ·é…ç½®åæ‰èƒ½éªŒè¯

---

## äºŒã€éœ€æ±‚éªŒæ”¶æ ‡å‡†é€æ¡æ£€æŸ¥

### éœ€æ±‚ 1ï¼šè€•åœ°ç³»ç»Ÿ

| éªŒæ”¶æ ‡å‡† | çŠ¶æ€ | ä»£ç ä½ç½® | è¯´æ˜ |
|---------|------|---------|------|
| 1.1 é”„å¤´å³é”®åˆ›å»ºè€•åœ° | âœ… å·²å®ç° | `GameInputManager.TryTillSoil()` â†’ `FarmingManagerNew.TillSoil()` | å®Œæ•´å®ç° |
| 1.2 Rule Tile è‡ªåŠ¨æ‹¼æ¥ | â³ å¾…ç”¨æˆ·é…ç½® | `FarmVisualManager.dryFarmlandTile` | éœ€è¦ç”¨æˆ·åˆ›å»º Rule Tile |
| 1.3 ä¸­å¿ƒæ ·å¼ 2 ç§å˜ä½“ | â³ å¾…ç”¨æˆ·é…ç½® | Rule Tile é…ç½® | éœ€è¦ç”¨æˆ·é…ç½® |
| 1.4 ä¸å¯è€•ä½œä½ç½®æ£€æŸ¥ | âœ… å·²å®ç° | `FarmTileManager.CanTillAt()` | æ£€æŸ¥åœ°é¢ Tileã€å·²æœ‰è€•åœ° |
| 1.5 å¤šæ¥¼å±‚ç‹¬ç«‹ Tilemap | âœ… å·²å®ç° | `LayerTilemaps[]` é…ç½® | æ”¯æŒå¤šæ¥¼å±‚ |
| 1.6 æ¶ˆè€—ç²¾åŠ› | â³ å¾…å®ç° | - | ç²¾åŠ›ç³»ç»Ÿä¸å­˜åœ¨ï¼Œæš‚ä¸éœ€è¦ |
| 1.7 éŸ³æ•ˆå’Œç²’å­ | âœ… å·²å®ç° | `FarmVisualManager.PlayTillingEffects()` | å®Œæ•´å®ç° |

### éœ€æ±‚ 2ï¼šç§æ¤ç³»ç»Ÿ

| éªŒæ”¶æ ‡å‡† | çŠ¶æ€ | ä»£ç ä½ç½® | è¯´æ˜ |
|---------|------|---------|------|
| 2.1 ç§å­å³é”®ç§æ¤ | âœ… å·²å®ç° | `GameInputManager.TryPlantSeed()` â†’ `FarmingManagerNew.PlantSeed()` | å®Œæ•´å®ç° |
| 2.2 ä»èƒŒåŒ…ç§»é™¤ç§å­ | âœ… å·²ä¿®å¤ | `FarmingManagerNew.PlantSeed()` | è°ƒç”¨ `InventoryService.RemoveItem()` |
| 2.3 åˆ›å»ºä½œç‰© GameObject | âœ… å·²å®ç° | `CropManager.CreateCrop()` | å®Œæ•´å®ç° |
| 2.4 æ˜¾ç¤ºç¬¬ä¸€é˜¶æ®µ Sprite | âœ… å·²å®ç° | `CropController.Initialize()` â†’ `UpdateVisuals()` | å®Œæ•´å®ç° |
| 2.5 å­£èŠ‚æ£€æŸ¥ | âœ… å·²å®ç° | `FarmingManagerNew.IsCorrectSeason()` | å®Œæ•´å®ç° |
| 2.6 å·²æœ‰ä½œç‰©æ— æ³•ç§æ¤ | âœ… å·²å®ç° | `FarmTileData.CanPlant()` | å®Œæ•´å®ç° |
| 2.7 ç§æ¤éŸ³æ•ˆ | âœ… å·²å®ç° | `FarmVisualManager.PlayPlantingSound()` | å®Œæ•´å®ç° |

### éœ€æ±‚ 3ï¼šæµ‡æ°´ç³»ç»Ÿ

| éªŒæ”¶æ ‡å‡† | çŠ¶æ€ | ä»£ç ä½ç½® | è¯´æ˜ |
|---------|------|---------|------|
| 3.1 æ°´å£¶å³é”®æµ‡æ°´ | âœ… å·²å®ç° | `GameInputManager.TryWaterTile()` â†’ `FarmingManagerNew.WaterTile()` | å®Œæ•´å®ç° |
| 3.2 WetWithPuddle çŠ¶æ€ | âœ… å·²å®ç° | `FarmTileData.SetWatered()` | å®Œæ•´å®ç° |
| 3.3 2 å°æ—¶å WetDark | âœ… å·²å®ç° | `FarmingManagerNew.OnHourChanged()` | å®Œæ•´å®ç° |
| 3.4 æ¯æ—¥é‡ç½® Dry | âœ… å·²å®ç° | `FarmTileManager.ResetDailyWaterState()` | å®Œæ•´å®ç° |
| 3.5 3 ç§æ°´æ¸å˜ä½“ | âœ… å·²å®ç° | `FarmVisualManager.wetPuddleTiles[]` | å®Œæ•´å®ç° |
| 3.6 æ¯æ—¥ä¸€æ¬¡æµ‡æ°´ | âœ… å·²å®ç° | `FarmTileManager.SetWatered()` æ£€æŸ¥ `wateredToday` | å®Œæ•´å®ç° |
| 3.7 æ¶ˆè€—ç²¾åŠ› | â³ å¾…å®ç° | - | ç²¾åŠ›ç³»ç»Ÿä¸å­˜åœ¨ï¼Œæš‚ä¸éœ€è¦ |
| 3.8 éŸ³æ•ˆå’Œç²’å­ | âœ… å·²å®ç° | `FarmVisualManager.PlayWateringEffects()` | å®Œæ•´å®ç° |

### éœ€æ±‚ 4ï¼šä½œç‰©ç”Ÿé•¿ç³»ç»Ÿ

| éªŒæ”¶æ ‡å‡† | çŠ¶æ€ | ä»£ç ä½ç½® | è¯´æ˜ |
|---------|------|---------|------|
| 4.1 OnDayChanged æ£€æŸ¥ | âœ… å·²å®ç° | `FarmingManagerNew.OnDayChanged()` | å®Œæ•´å®ç° |
| 4.2 æµ‡æ°´ç”Ÿé•¿ +1 | âœ… å·²å®ç° | `CropManager.ProcessDailyGrowth()` | å®Œæ•´å®ç° |
| 4.3 æœªæµ‡æ°´å¤©æ•° +1 | âœ… å·²å®ç° | `CropManager.ProcessDailyGrowth()` | å®Œæ•´å®ç° |
| 4.4 è¿ç»­ 2 å¤©åœæ» | âœ… å·²å®ç° | `CropManager.daysUntilStagnant = 2` | å®Œæ•´å®ç° |
| 4.5 è¿ç»­ 3 å¤©æ¯è | âœ… å·²å®ç° | `CropManager.daysUntilWithered = 3` | å®Œæ•´å®ç° |
| 4.6 æ¯èé¢œè‰²ç»Ÿä¸€ | âœ… å·²å®ç° | `CropController.WitheredColor = new Color(0.8f, 0.7f, 0.4f)` | å®Œæ•´å®ç° |
| 4.7 Sprite é˜¶æ®µåˆ‡æ¢ | âœ… å·²å®ç° | `CropController.Grow()` çº¿æ€§åˆ†å¸ƒ | å®Œæ•´å®ç° |
| 4.8 æˆç†ŸçŠ¶æ€ | âœ… å·²å®ç° | `CropController.IsMature()` | å®Œæ•´å®ç° |
| 4.9 æˆç†Ÿé—ªçƒ | âœ… å·²å®ç° | `CropController.Update()` é—ªçƒæ•ˆæœ | å®Œæ•´å®ç° |

### éœ€æ±‚ 5ï¼šæ”¶è·ç³»ç»Ÿ

| éªŒæ”¶æ ‡å‡† | çŠ¶æ€ | ä»£ç ä½ç½® | è¯´æ˜ |
|---------|------|---------|------|
| 5.1 å³é”®æ”¶è· | âœ… å·²å®ç° | `GameInputManager.TryHarvestCropAtMouse()` | å®Œæ•´å®ç° |
| 5.2 éšæœºæ”¶è·æ•°é‡ | âœ… å·²å®ç° | `CropManager.TryHarvest()` Random.Range | å®Œæ•´å®ç° |
| 5.3 æ·»åŠ åˆ°èƒŒåŒ… | âœ… å·²å®ç° | `FarmingManagerNew.HarvestCrop()` â†’ `InventoryService.AddItem()` | å®Œæ•´å®ç° |
| 5.4 æ™®é€šä½œç‰©é”€æ¯ | âœ… å·²å®ç° | `CropManager.DestroyCrop()` | å®Œæ•´å®ç° |
| 5.5 å¯é‡å¤æ”¶è·å›é€€ | âœ… å·²å®ç° | `CropController.ResetForReHarvest()` | å®Œæ•´å®ç° |
| 5.6 æœ€å¤§æ”¶è·æ¬¡æ•° | âœ… å·²å®ç° | `CropManager.TryHarvest()` æ£€æŸ¥ maxHarvestCount | å®Œæ•´å®ç° |
| 5.7 æ¯èæ— æ³•æ”¶è· | âœ… å·²å®ç° | `CropManager.TryHarvest()` æ£€æŸ¥ isWithered | å®Œæ•´å®ç° |
| 5.8 æœªæˆç†Ÿæ— æ³•æ”¶è· | âœ… å·²å®ç° | `CropManager.TryHarvest()` æ£€æŸ¥ IsMature() | å®Œæ•´å®ç° |
| 5.9 æ”¶è·éŸ³æ•ˆ | âœ… å·²å®ç° | `FarmVisualManager.PlayHarvestEffects()` | å®Œæ•´å®ç° |

### éœ€æ±‚ 6ï¼šå¤šæ¥¼å±‚æ”¯æŒ

| éªŒæ”¶æ ‡å‡† | çŠ¶æ€ | ä»£ç ä½ç½® | è¯´æ˜ |
|---------|------|---------|------|
| 6.1 ç‹¬ç«‹ Tilemap | âœ… å·²å®ç° | `LayerTilemaps` ç±» | å®Œæ•´å®ç° |
| 6.2 å½“å‰æ¥¼å±‚æ“ä½œ | âœ… å·²å®ç° | æ‰€æœ‰æ“ä½œéƒ½è°ƒç”¨ `GetCurrentLayerIndex()` | å®Œæ•´å®ç° |
| 6.3 ç‹¬ç«‹ç”Ÿé•¿ | âœ… å·²å®ç° | `farmTilesByLayer` æŒ‰æ¥¼å±‚åˆ†ç»„ | å®Œæ•´å®ç° |
| 6.4 LayerTilemaps é…ç½® | âœ… å·²å®ç° | `FarmTileManager.layerTilemaps[]` | å®Œæ•´å®ç° |
| 6.5 è‡ªåŠ¨æ£€æµ‹æ¥¼å±‚ | âš ï¸ ç¡¬ç¼–ç  | `FarmTileManager.GetCurrentLayerIndex()` | æš‚æ—¶è¿”å› 0ï¼Œæœ‰ TODO |

### éœ€æ±‚ 7ï¼šç³»ç»Ÿé›†æˆ

| éªŒæ”¶æ ‡å‡† | çŠ¶æ€ | ä»£ç ä½ç½® | è¯´æ˜ |
|---------|------|---------|------|
| 7.1 é™æ€äº‹ä»¶è®¢é˜… | âœ… å·²å®ç° | `FarmingManagerNew.Start()` | `TimeManager.OnDayChanged/OnHourChanged` |
| 7.2 InventoryService è®¿é—® | âœ… å·²å®ç° | `FarmingManagerNew.HarvestCrop()` | AddItem å·²å®ç° |
| 7.3 ItemDatabase è®¿é—® | âœ… å·²å®ç° | `FarmingManagerNew.GetDatabase()` | ä» InventoryService è·å– |
| 7.4 GameInputManager è§¦å‘ | âœ… å·²å®ç° | `GameInputManager` å†œç”°ç³»ç»Ÿé›†æˆåŒºåŸŸ | å®Œæ•´å®ç° |
| 7.5 SeedData ä¸ SaplingData åˆ†ç¦» | â³ å¾…éªŒè¯ | `PlacementManagerV3` | éœ€è¦æ£€æŸ¥ PlacementManagerV3 |
| 7.6 PlacementManagerV3 è¿”å› false | â³ å¾…éªŒè¯ | - | éœ€è¦æ£€æŸ¥ PlacementManagerV3 |
| 7.7 å¯¼èˆªç½‘æ ¼åˆ·æ–° | â³ å¯é€‰ | - | ä½œç‰©ä¸é˜»æŒ¡å¯¼èˆªï¼Œæš‚ä¸éœ€è¦ |

---

## ä¸‰ã€æ­£ç¡®æ€§å±æ€§æ£€æŸ¥

### P1.x è€•åœ°ç³»ç»Ÿå±æ€§

| ID | å±æ€§ | çŠ¶æ€ | ä»£ç éªŒè¯ |
|----|------|------|---------|
| P1.1 | è€•åœ°å”¯ä¸€æ€§ | âœ… | `FarmTileManager.CreateTile()` æ£€æŸ¥ `layerTiles.ContainsKey()` |
| P1.2 | è€•åœ°å‰ç½®æ¡ä»¶ | âœ… | `FarmTileManager.CreateTile()` æ£€æŸ¥ `groundTilemap.GetTile()` |
| P1.3 | æ¥¼å±‚éš”ç¦» | âœ… | `farmTilesByLayer` æŒ‰æ¥¼å±‚åˆ†ç»„å­˜å‚¨ |

### P2.x ç§æ¤ç³»ç»Ÿå±æ€§

| ID | å±æ€§ | çŠ¶æ€ | ä»£ç éªŒè¯ |
|----|------|------|---------|
| P2.1 | ç§æ¤æ¶ˆè€— | âœ… å·²ä¿®å¤ | `FarmingManagerNew.PlantSeed()` è°ƒç”¨ `InventoryService.RemoveItem()` |
| P2.2 | ç§æ¤å‰ç½®æ¡ä»¶ | âœ… | `FarmTileData.CanPlant()` æ£€æŸ¥ isTilled && cropData == null |
| P2.3 | å­£èŠ‚é™åˆ¶ | âœ… | `FarmingManagerNew.IsCorrectSeason()` æ£€æŸ¥ AllSeason |

### P3.x æµ‡æ°´ç³»ç»Ÿå±æ€§

| ID | å±æ€§ | çŠ¶æ€ | ä»£ç éªŒè¯ |
|----|------|------|---------|
| P3.1 | æ¯æ—¥ä¸€æ¬¡ | âœ… | `FarmTileManager.SetWatered()` æ£€æŸ¥ `wateredToday` |
| P3.2 | è§†è§‰çŠ¶æ€è½¬æ¢ | âœ… | `FarmingManagerNew.OnHourChanged()` 2 å°æ—¶ååˆ‡æ¢ |
| P3.3 | æ¯æ—¥é‡ç½® | âœ… | `FarmTileManager.ResetDailyWaterState()` è®¾ç½® Dry |

### P4.x ç”Ÿé•¿ç³»ç»Ÿå±æ€§

| ID | å±æ€§ | çŠ¶æ€ | ä»£ç éªŒè¯ |
|----|------|------|---------|
| P4.1 | æµ‡æ°´ç”Ÿé•¿ | âœ… | `CropManager.ProcessDailyGrowth()` æ£€æŸ¥ wateredYesterday |
| P4.2 | æ¯èæ¡ä»¶ | âœ… | `daysWithoutWater >= daysUntilWithered (3)` |
| P4.3 | æˆç†Ÿæ¡ä»¶ | âœ… | `CropController.IsMature()` æ£€æŸ¥ currentStage >= æœ€åé˜¶æ®µ |

### P5.x æ”¶è·ç³»ç»Ÿå±æ€§

| ID | å±æ€§ | çŠ¶æ€ | ä»£ç éªŒè¯ |
|----|------|------|---------|
| P5.1 | æ”¶è·æ·»åŠ  | âœ… | `FarmingManagerNew.HarvestCrop()` è°ƒç”¨ `InventoryService.AddItem()` |
| P5.2 | æ”¶è·å‰ç½®æ¡ä»¶ | âœ… | `CropManager.TryHarvest()` æ£€æŸ¥ isWithered å’Œ IsMature() |
| P5.3 | å¯é‡å¤æ”¶è· | âœ… | `CropController.ResetForReHarvest()` å›é€€é˜¶æ®µ |

---

## å››ã€è®¾è®¡ä¸€è‡´æ€§æ£€æŸ¥

### æ¶æ„å¯¹æ¯”

| è®¾è®¡æ–‡æ¡£ | ä»£ç å®ç° | ä¸€è‡´æ€§ |
|---------|---------|--------|
| FarmingManager åè°ƒè€… | `FarmingManagerNew.cs` | âœ… ä¸€è‡´ |
| FarmTileManager è€•åœ°ç®¡ç† | `FarmTileManager.cs` | âœ… ä¸€è‡´ |
| CropManager ä½œç‰©ç”Ÿå‘½å‘¨æœŸ | `CropManager.cs` | âœ… ä¸€è‡´ |
| FarmVisualManager è§†è§‰æ›´æ–° | `FarmVisualManager.cs` | âœ… ä¸€è‡´ |
| CropController ä½œç‰©æ§åˆ¶å™¨ | `CropController.cs` | âœ… ä¸€è‡´ |

### æ•°æ®ç»“æ„å¯¹æ¯”

| è®¾è®¡æ–‡æ¡£ | ä»£ç å®ç° | ä¸€è‡´æ€§ |
|---------|---------|--------|
| FarmTileData | `FarmTileData.cs` | âœ… ä¸€è‡´ï¼Œå­—æ®µå®Œæ•´ |
| CropInstanceData | `CropInstanceData.cs` | âœ… ä¸€è‡´ï¼Œçº¯æ•°æ®ç±» |
| LayerTilemaps | `LayerTilemaps.cs` | âœ… ä¸€è‡´ï¼Œå¢åŠ äº†è¾…åŠ©æ–¹æ³• |
| SoilMoistureState | ä½¿ç”¨ç°æœ‰æšä¸¾ | âœ… ä¸€è‡´ |

### æµç¨‹å¯¹æ¯”

| æµç¨‹ | è®¾è®¡æ–‡æ¡£ | ä»£ç å®ç° | ä¸€è‡´æ€§ |
|------|---------|---------|--------|
| è€•åœ°æµç¨‹ | 4.1 èŠ‚ | `TillSoil()` | âœ… ä¸€è‡´ |
| ç§æ¤æµç¨‹ | 4.2 èŠ‚ | `PlantSeed()` | âœ… ä¸€è‡´ï¼ˆé™¤ TODOï¼‰ |
| æµ‡æ°´æµç¨‹ | 4.3 èŠ‚ | `WaterTile()` | âœ… ä¸€è‡´ |
| æ¯æ—¥ç”Ÿé•¿ | 4.4 èŠ‚ | `OnDayChanged()` | âœ… ä¸€è‡´ |
| æ”¶è·æµç¨‹ | 4.5 èŠ‚ | `HarvestCrop()` | âœ… ä¸€è‡´ |

---

## äº”ã€æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥

| ä¼˜åŒ–é¡¹ | è®¾è®¡æ–‡æ¡£ | ä»£ç å®ç° | çŠ¶æ€ |
|--------|---------|---------|------|
| OnHourChanged åªéå†æµ‡æ°´è€•åœ° | 6.1 èŠ‚ | `wateredTodayTiles` HashSet | âœ… å·²å®ç° |
| OnDayChanged åªæ›´æ–°å˜åŒ–è€•åœ° | 6.2 èŠ‚ | `RefreshAllTileVisuals()` | âš ï¸ å…¨é‡åˆ·æ–° |
| ç²’å­æ•ˆæœå¯¹è±¡æ±  | 6.3 èŠ‚ | `tillingParticlePool` ç­‰ | âœ… å·²å®ç° |

**è¯´æ˜**: OnDayChanged çš„è§†è§‰æ›´æ–°ç›®å‰æ˜¯å…¨é‡åˆ·æ–°ï¼Œä½†ç”±äºæ¯å¤©åªæ‰§è¡Œä¸€æ¬¡ï¼Œæ€§èƒ½å½±å“å¯æ¥å—ã€‚

---

## å…­ã€é—®é¢˜æ¸…å•

### ğŸ”´ å¿…é¡»ä¿®å¤

| # | é—®é¢˜ | ä½ç½® | çŠ¶æ€ |
|---|------|------|------|
| 1 | ç§æ¤æœªæ¶ˆè€—èƒŒåŒ…ç§å­ | `FarmingManagerNew.PlantSeed()` | âœ… å·²ä¿®å¤ |

**ä¿®å¤å†…å®¹**:
- åœ¨ `InventoryService.cs` ä¸­æ·»åŠ äº† `RemoveItem(int itemId, int quality, int amount)` æ–¹æ³•
- åœ¨ `InventoryService.cs` ä¸­æ·»åŠ äº† `HasItem(int itemId, int quality, int amount)` æ–¹æ³•
- ä¿®å¤äº† `FarmingManagerNew.PlantSeed()` ä¸­çš„ TODOï¼Œç°åœ¨ä¼šæ­£ç¡®æ¶ˆè€—èƒŒåŒ…ä¸­çš„ç§å­

### ğŸŸ¡ å»ºè®®æ”¹è¿›

| # | é—®é¢˜ | ä½ç½® | å»ºè®® |
|---|------|------|------|
| 1 | æ¥¼å±‚æ£€æµ‹ç¡¬ç¼–ç  | `FarmTileManager.GetCurrentLayerIndex()` | å®ç°åŸºäºç©å®¶ä½ç½®çš„æ¥¼å±‚æ£€æµ‹ |
| 2 | OnDayChanged å…¨é‡åˆ·æ–° | `FarmVisualManager.RefreshAllTileVisuals()` | å¯ä¼˜åŒ–ä¸ºåªåˆ·æ–°çŠ¶æ€å˜åŒ–çš„è€•åœ° |

### ğŸŸ¢ å¾…ç”¨æˆ·é…ç½®

| # | é¡¹ç›® | è¯´æ˜ |
|---|------|------|
| 1 | Rule Tile | åˆ›å»ºè€•åœ° Rule Tileï¼Œé…ç½®è¾¹ç•Œè§„åˆ™ |
| 2 | æ°´æ¸ Tile | åˆ›å»º 3 ç§æ°´æ¸ Tile |
| 3 | åœºæ™¯ Tilemap | åœ¨ LAYER ä¸‹åˆ›å»º Farmland/WaterPuddle Tilemap |
| 4 | ä½œç‰© Prefab | åˆ›å»ºä½œç‰© Prefab |
| 5 | SeedData SO | åˆ›å»ºç§å­ ScriptableObject |
| 6 | CropData SO | åˆ›å»ºä½œç‰© ScriptableObject |

---

## ä¸ƒã€ä»£ç è´¨é‡è¯„ä¼°

### ä¼˜ç‚¹

1. **å‘½åè§„èŒƒ**: ç±»åã€æ–¹æ³•åã€å˜é‡åæ¸…æ™°æ˜“æ‡‚
2. **æ³¨é‡Šå®Œæ•´**: å…³é”®æ–¹æ³•éƒ½æœ‰ XML æ–‡æ¡£æ³¨é‡Š
3. **å•ä¸€èŒè´£**: æ¯ä¸ªç±»èŒè´£æ˜ç¡®ï¼Œä¸è¶Šç•Œ
4. **é”™è¯¯å¤„ç†**: å…³é”®ä½ç½®æœ‰ null æ£€æŸ¥å’Œæ—¥å¿—è¾“å‡º
5. **è°ƒè¯•æ”¯æŒ**: ç»Ÿä¸€ä½¿ç”¨ `showDebugInfo` å¼€å…³æ§åˆ¶æ—¥å¿—

### å¯æ”¹è¿›ç‚¹

1. **é­”æ³•æ•°å­—**: `hoursUntilPuddleDry = 2f` å¯ä»¥æå–ä¸ºå¸¸é‡
2. **é‡å¤ä»£ç **: å¤šå¤„ `GetCurrentLayerIndex()` + `GetLayerTilemaps()` å¯å°è£…
3. **TODO æ³¨é‡Š**: æœ‰ 1 å¤„ TODO æœªå®Œæˆ

---

## å…«ã€ç»“è®º

å†œç”°ç³»ç»Ÿé‡æ„æ•´ä½“è´¨é‡è‰¯å¥½ï¼Œæ¶æ„è®¾è®¡æ¸…æ™°ï¼Œä»£ç å®ç°ä¸è®¾è®¡æ–‡æ¡£é«˜åº¦ä¸€è‡´ã€‚

**æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆ**:
- âœ… è€•åœ°ç³»ç»Ÿ
- âœ… ç§æ¤ç³»ç»Ÿï¼ˆåŒ…æ‹¬èƒŒåŒ…æ¶ˆè€—ï¼‰
- âœ… æµ‡æ°´ç³»ç»Ÿ
- âœ… ä½œç‰©ç”Ÿé•¿ç³»ç»Ÿ
- âœ… æ”¶è·ç³»ç»Ÿ
- âœ… å¤šæ¥¼å±‚æ”¯æŒ
- âœ… ç³»ç»Ÿé›†æˆ

**å·²ä¿®å¤é—®é¢˜**:
1. âœ… ç§æ¤æ—¶ä»èƒŒåŒ…ç§»é™¤ç§å­ï¼ˆæ·»åŠ äº† `InventoryService.RemoveItem()` æ–¹æ³•ï¼‰

**å¾…å®Œæˆäº‹é¡¹**:
1. ç”¨æˆ·å®Œæˆé˜¶æ®µ 0 é…ç½®ï¼ˆRule Tileã€Tilemapã€Prefabã€SOï¼‰
2. é›†æˆæµ‹è¯•éªŒè¯

**å»ºè®®**: ç­‰å¾…ç”¨æˆ·å®Œæˆé…ç½®åè¿›è¡Œé›†æˆæµ‹è¯•ã€‚

---

**å®¡æŸ¥å®Œæˆæ—¶é—´**: 2026-01-24
