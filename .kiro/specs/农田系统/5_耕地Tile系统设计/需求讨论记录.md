# 耕地 Tile 系统设计 - 需求讨论记录

**创建日期**: 2026-01-25  
**状态**: 需求确认中

---

## 讨论背景

用户希望实现一个耕地系统，核心特点是：
- 耕地由"中心块"和"边界装饰"组成
- 中心块是玩家锄地创建的"真正的耕地"
- 边界是围绕中心块的视觉装饰，不是耕地本身
- 边界可以随时被玩家锄成新的中心块

---

## 讨论迭代过程

### 第一轮：初始需求

**用户描述**：
> 我只有上下左右，然后还有另一个中心样式，然后还有三种水渍

**用户资源**：
- 5 个耕地 Sprite：上边界、下边界、左边界、右边界、中心样式
- 3 个水渍 Sprite

**AI 理解**：误以为是标准 Rule Tile 用法（1 格 = 1 耕地）

---

### 第二轮：用户澄清核心概念

**用户描述**：
> 我想要的就是我只挖一个格子，显示出来的是包含上下左右边界的一个完整的耕地块，因为耕地只有中心能用，边界就是用来看的

**关键理解**：
- 1 个耕地 = 中心块 + 周围 8 格边界
- 边界只是视觉装饰，不是耕地
- 玩家可以在边界上继续锄地

---

### 第三轮：用户补充角落资源

**用户描述**：
> 我会现在会画出左上右上左下右下四个方向的来补充这些情况的出现

**用户示例**：
```
[LU][U][U][RU]
[L][C][C][R]
[  ][LD][C][R]
[  ][D][D][RD]
```

**AI 理解**：开始理解"边界片段"模式，但命名规则仍有误解

---

### 第四轮：用户提出多层 Tilemap 方案

**用户描述**：
> 对于耕地我希望是多层的，每一个格子是独立的一层，每一层独立 tile 作为一个耕地进行管理

**AI 锐评**：
- 指出"每耕地一层 Tilemap"会导致层数爆炸
- 建议使用"单层 Tilemap + 代码控制边界"

---

### 第五轮：AI 提出方案 A 和方案 C

**方案 A**：标准 Rule Tile（重做美术）
- 每个 Sprite 是完整的 16×16 格子
- 边界是耕地的一部分

**方案 C**：单层 Tilemap + 代码控制边界
- 使用现有资源
- 代码计算边界

**用户反馈**：
> 你的方案 A 很明显是建立在边界也是耕地的前提下，而且异常混乱

---

### 第六轮：用户重新定义命名规则

**用户描述**：
> 比如 U 是其上部有耕地，然后贴着 16×16 的顶部的，D 是其下部为耕地中心块，然后贴着 16×16 的底部的

**命名规则**：
- **U**：上方有中心块 → 边界内容贴着格子**顶部**
- **D**：下方有中心块 → 边界内容贴着格子**底部**
- **L**：左方有中心块 → 边界内容贴着格子**左侧**
- **R**：右方有中心块 → 边界内容贴着格子**右侧**

**用户示例**：
```
孤立耕地：
[X][D][X]
[R][C][L]
[X][U][X]

两个横向相邻：
[X][D][D][X]
[R][C][C][L]
[X][U][U][X]

L 形耕地：
[X] [D] [X] [  ]
[R] [C] [DL][X]
[  ][UR][C] [L]
[  ][X] [U] [X]
```

---

### 第七轮：用户补充阴影资源

**用户描述**：
> 对于阴影也有四个，四个角落的阴影，也就是左上右上左下右下角的阴影，我会命名加一个 S，SLU 表示 shadow_LeftUp 左上角阴影

**阴影命名**：
- **SLU**：Shadow_LeftUp，左上角阴影
- **SRU**：Shadow_RightUp，右上角阴影
- **SLD**：Shadow_LeftDown，左下角阴影
- **SRD**：Shadow_RightDown，右下角阴影

---

## 最终确认的设计

### 核心概念

1. **中心块 (C)**：玩家锄地创建的"真正的耕地"，可以种植作物
2. **边界 Tile**：围绕中心块的视觉装饰，不是耕地，但玩家可以在边界上锄地将其变成新的中心块
3. **阴影 Tile**：四个角落的阴影，用于增加立体感

### 命名规则

边界命名表示**"该格子周围哪些方向有中心块"**：
- 字母表示有中心块的方向
- 边界内容**贴着有中心块的那一侧**

| 名称 | 含义 | 边界内容位置 |
|------|------|-------------|
| U | 上方有中心块 | 贴着格子顶部 |
| D | 下方有中心块 | 贴着格子底部 |
| L | 左方有中心块 | 贴着格子左侧 |
| R | 右方有中心块 | 贴着格子右侧 |
| UD | 上下都有中心块 | 左右贯通 |
| LR | 左右都有中心块 | 上下贯通 |
| ... | 以此类推 | ... |

### 架构设计

```
Tilemap 层级：
├── Farmland_Center   ← 只放中心块 C
├── Farmland_Border   ← 放边界 Tile（代码控制）
└── WaterPuddle       ← 水渍
```

### 实现方式

1. **中心块**：代码控制，玩家锄地时放置
2. **边界 Tile**：代码根据周围中心块分布计算并放置
3. **阴影 Tile**：合并到边界 Sprite 中，四个角落单独处理

