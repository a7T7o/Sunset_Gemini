# Steering规则区优化 - 需求文档

## 模块概述

对项目中的 .kiro/steering 规则文件进行分析、分类和优化，减少上下文消耗，提高规则的可维护性和使用效率。

## 当前状态

- **完成度**: 0%
- **最后更新**: 2025-01-08
- **状态**: 需求分析中

## 问题背景

当前项目中有 **21 个 steering 规则文件**，每次对话都需要加载所有规则，导致：

1. **上下文消耗过大** - 每次对话开始时需要处理大量规则文本
2. **规则冗余** - 部分规则内容重复或过时
3. **优先级不明确** - 无法快速识别哪些是核心规则
4. **维护困难** - 规则分散，难以统一更新

## 用户需求

> "现在项目里的.kiro\steering好像有点过多了，每次对话你是否都需要消耗很多上下文来阅读规则？我想知道这一点，然后请你现在把所有的.kiro\steering内的规则都总结一下给我列出来分为几类，然后按照优先级程度列出来"

## 需求分析

### 核心目标

1. **分析现有规则** - 统计所有 steering 规则的内容和用途
2. **分类整理** - 按功能和重要性对规则进行分类
3. **优先级排序** - 明确哪些规则是高频使用、哪些是低频参考
4. **优化建议** - 提出合并、精简、归档的方案

### 当前规则清单

共 21 个规则文件：

1. `animation.md` - 动画系统规范
2. `coding-standards.md` - 编码规范
3. `communication.md` - 沟通规范
4. `context-handoff.md` - 对话继承上下文
5. `documentation.md` - 技术文档编写规范
6. `farming.md` - 农田系统规范
7. `items.md` - 物品系统规范
8. `layers.md` - 项目层级设计规范
9. `product.md` - 产品概述
10. `progress.md` - 项目进度与状态
11. `rules.md` - 开发规则与禁止事项
12. `scene-hierarchy-sync.md` - 场景层级同步规则
13. `scene-modification-rule.md` - 场景/组件修改规则
14. `so-design.md` - ScriptableObject 设计规范
15. `structure.md` - 项目结构
16. `systems.md` - 核心系统设计规范
17. `tech.md` - 技术栈
18. `tree-system.md` - 树木系统规范（可能与 trees.md 重复）
19. `trees.md` - 树木系统规范
20. `ui.md` - UI 系统规范
21. `workspace-memory.md` - 工作区记忆规范

## 需求目标

### Requirement 1: 规则分析与分类

**用户故事**: 作为开发者，我想要了解所有 steering 规则的分类和用途，以便更好地管理和使用它们。

#### 验收标准

1. WHEN 分析所有规则文件 THEN 系统应该生成完整的规则清单，包含每个文件的用途说明
2. WHEN 对规则进行分类 THEN 系统应该按照功能领域（如：架构规范、系统规范、流程规范等）进行分组
3. WHEN 识别重复内容 THEN 系统应该标记出可能重复或冗余的规则文件
4. WHEN 评估规则使用频率 THEN 系统应该根据项目实际情况判断每个规则的重要性

### Requirement 2: 优先级评估

**用户故事**: 作为 AI 助手，我想要知道哪些规则是高优先级的，以便在对话中优先关注核心规则。

#### 验收标准

1. WHEN 评估规则优先级 THEN 系统应该将规则分为：核心规则（必读）、常用规则（高频）、参考规则（低频）、归档规则（过时）
2. WHEN 确定核心规则 THEN 系统应该识别出影响项目架构和开发流程的关键规则
3. WHEN 识别低频规则 THEN 系统应该找出很少被引用或已过时的规则
4. WHEN 生成优先级文档 THEN 系统应该创建清晰的优先级列表，便于快速查阅

### Requirement 3: 优化方案建议

**用户故事**: 作为项目维护者，我想要得到具体的优化建议，以便减少规则冗余和上下文消耗。

#### 验收标准

1. WHEN 提出合并建议 THEN 系统应该识别可以合并的相似规则文件
2. WHEN 提出精简建议 THEN 系统应该指出可以删除或简化的内容
3. WHEN 提出归档建议 THEN 系统应该识别过时或不再使用的规则
4. WHEN 提出重组建议 THEN 系统应该给出更合理的规则文件组织结构

### Requirement 4: 输出优先级文档

**用户故事**: 作为用户，我想要一个清晰的优先级文档，以便快速了解哪些规则最重要。

#### 验收标准

1. WHEN 生成优先级文档 THEN 系统应该创建独立的优先级列表文档
2. WHEN 展示规则信息 THEN 文档应该包含：规则名称、分类、优先级、用途说明、使用频率
3. WHEN 提供使用建议 THEN 文档应该说明每个优先级的规则应该如何使用
4. WHEN 更新文档 THEN 文档应该易于维护和更新

## 相关文件

- `.kiro/steering/*.md` - 所有现有规则文件
- `.kiro/specs/Steering规则区优化/` - 本工作区

## 下一步

1. 创建 design.md - 设计优化方案
2. 创建优先级文档 - 列出所有规则的优先级
3. 实施优化 - 根据设计方案进行规则重组
