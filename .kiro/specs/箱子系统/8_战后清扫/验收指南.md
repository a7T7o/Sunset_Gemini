# 箱子系统战后清扫 - 验收指南

**创建日期**: 2026-01-20
**最后更新**: 2026-01-20

---

## 一、面板状态管理验收

### 测试场景 1：ESC 关闭箱子后 Tab 打开背包

**步骤**:
1. 右键点击箱子，打开箱子 UI
2. 按 ESC 关闭箱子 UI
3. 按 Tab 打开背包

**预期结果**:
- [ ] 箱子 UI 正常关闭
- [ ] 背包正常打开，显示道具页面
- [ ] Main 区域（道具列表）正常显示
- [ ] Top 区域（Tab 按钮）正常显示

---

### 测试场景 2：ESC 关闭箱子后其他快捷键打开背包

**步骤**:
1. 右键点击箱子，打开箱子 UI
2. 按 ESC 关闭箱子 UI
3. 按 B 打开配方页面

**预期结果**:
- [ ] 箱子 UI 正常关闭
- [ ] 背包正常打开，显示配方页面
- [ ] Main 区域正常显示
- [ ] Top 区域正常显示

---

### 测试场景 3：Tab 关闭箱子切换到背包

**步骤**:
1. 右键点击箱子，打开箱子 UI
2. 按 Tab 关闭箱子并打开背包

**预期结果**:
- [ ] 箱子 UI 正常关闭
- [ ] 背包正常打开，显示道具页面
- [ ] Main 区域正常显示
- [ ] Top 区域正常显示

---

### 测试场景 4：连续操作测试

**步骤**:
1. 右键打开箱子 → ESC 关闭 → Tab 打开背包 → Tab 关闭背包
2. 右键打开箱子 → Tab 切换到背包 → Tab 关闭背包
3. 右键打开箱子 → ESC 关闭 → B 打开配方 → Tab 切换到道具

**预期结果**:
- [ ] 所有操作流程正常
- [ ] 无 UI 显示异常
- [ ] 无控制台错误

---

## 二、之前修复的功能验收

### 测试场景 5：垃圾桶拖拽丢弃

**步骤**:
1. 打开箱子 UI
2. 长按拖拽 Down 区域的物品到垃圾桶
3. 长按拖拽 Up 区域的物品到垃圾桶

**预期结果**:
- [ ] Down 区域物品可以拖拽到垃圾桶丢弃
- [ ] Up 区域物品可以拖拽到垃圾桶丢弃
- [ ] 物品在玩家脚下生成掉落物

---

### 测试场景 6：Up 区域修饰键交互

**步骤**:
1. 打开箱子 UI
2. Shift+左键点击 Up 区域的堆叠物品
3. Ctrl+左键点击 Up 区域的堆叠物品

**预期结果**:
- [ ] Shift+左键：拿起一半数量
- [ ] Ctrl+左键：拿起单个
- [ ] 物品显示在鼠标位置

---

### 测试场景 7：跨区域放置

**步骤**:
1. 打开箱子 UI
2. 从 Down 区域拿起物品（Shift/Ctrl+左键）
3. 点击 Up 区域的空槽位放置

**预期结果**:
- [ ] 物品成功放置到 Up 区域
- [ ] Down 区域对应槽位物品减少
- [ ] Up 区域对应槽位显示物品

---

## 三、排序功能验收

### 测试场景 8：箱子和背包排序

**步骤**:
1. 打开箱子 UI
2. 点击 Up 区域的排序按钮
3. 点击 Down 区域的排序按钮

**预期结果**:
- [ ] Up 区域物品正确排序
- [ ] Down 区域物品正确排序
- [ ] 排序后 UI 正确刷新

---

## 四、已知限制

1. **堆叠溢出**：当放置物品到已有同类物品的槽位时，如果超出堆叠上限，剩余物品不会保留在手上（简化处理）

---

## 五、验收结果

| 场景 | 状态 | 备注 |
|------|------|------|
| ESC 关闭后 Tab 打开 | ⬜ | |
| ESC 关闭后 B 打开 | ⬜ | |
| Tab 切换到背包 | ⬜ | |
| 连续操作 | ⬜ | |
| 垃圾桶拖拽 | ⬜ | |
| Up 区域修饰键 | ⬜ | |
| 跨区域放置 | ⬜ | |
| 排序功能 | ⬜ | |

**验收人**: _______________
**验收日期**: _______________
