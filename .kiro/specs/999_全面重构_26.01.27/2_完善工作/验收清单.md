# Operation Perfection 验收清单

**版本**: v1.0  
**日期**: 2026-01-29

---

## 一、箱子存档系统 (P0-1)

### 测试 1.1：基础存档
- [ ] 打开箱子，放入 1 个物品
- [ ] 关闭箱子
- [ ] 保存游戏
- [ ] 关闭游戏
- [ ] 重新启动游戏
- [ ] 加载存档
- [ ] **验证**：箱子内物品还在

### 测试 1.2：多物品存档
- [ ] 打开箱子，放入 3 种不同物品（不同格子）
- [ ] 保存 → 关闭 → 重启 → 加载
- [ ] **验证**：3 种物品都在，位置正确

### 测试 1.3：堆叠物品存档
- [ ] 放入 1 组堆叠物品（如 50 个木材）
- [ ] 保存 → 关闭 → 重启 → 加载
- [ ] **验证**：数量正确（50 个）

---

## 二、BoxUI 交互 (P0-2)

### 测试 2.1：Up 区域点击
- [ ] 打开箱子（箱子内有物品）
- [ ] 单击 Up 区域（箱子槽位）的物品
- [ ] **验证**：槽位被选中（高亮）

### 测试 2.2：Up 区域拖拽
- [ ] 长按 Up 区域物品并拖动
- [ ] 拖到 Down 区域（背包）放下
- [ ] **验证**：物品从箱子移动到背包

### 测试 2.3：Down 区域交互
- [ ] 单击 Down 区域（背包槽位）的物品
- [ ] **验证**：槽位被选中
- [ ] 拖拽到 Up 区域
- [ ] **验证**：物品从背包移动到箱子

---

## 三、Ctrl/Shift 交互 (P0-3)

### 测试 3.1：Shift + 左键拆分
- [ ] 背包有 10 个物品
- [ ] Shift + 左键点击
- [ ] **验证**：手上拿起 5 个，槽位剩余 5 个
- [ ] 单击空槽位放下
- [ ] **验证**：物品正确放置，总数仍为 10

### 测试 3.2：Ctrl + 左键单个拿取
- [ ] 背包有 10 个物品
- [ ] Ctrl + 左键点击
- [ ] **验证**：手上拿起 1 个，槽位剩余 9 个
- [ ] 单击原槽位放回
- [ ] **验证**：槽位恢复为 10 个

### 测试 3.3：Ctrl 长按连续拿取
- [ ] 背包有 10 个物品
- [ ] 长按 Ctrl + 左键（保持 2 秒）
- [ ] **验证**：手上物品数量持续增加
- [ ] 松开后放下
- [ ] **验证**：总数仍为 10

### 测试 3.4：箱子内 Shift/Ctrl
- [ ] 在 BoxUI 的 Up 区域（箱子）执行 Shift + 左键
- [ ] **验证**：拆分功能正常
- [ ] 在 Up 区域执行 Ctrl + 左键
- [ ] **验证**：单个拿取功能正常

---

## 四、物品归位逻辑 (P1+-1)

### 测试 4.1：ESC 归位
- [ ] Shift + 左键拿起物品（手上有物品）
- [ ] 按 ESC
- [ ] **验证**：物品返回原槽位

### 测试 4.2：关闭 UI 归位
- [ ] 拿起物品
- [ ] 按 Tab 关闭背包
- [ ] **验证**：物品返回原槽位或背包空位

### 测试 4.3：箱子关闭归位
- [ ] 在 BoxUI 拿起箱子物品
- [ ] 按 E 关闭箱子
- [ ] **验证**：物品返回箱子或背包，不丢失

### 测试 4.4：背包满时掉落
- [ ] 填满背包（36 格全满）
- [ ] 从箱子拿起物品
- [ ] 关闭箱子
- [ ] **验证**：物品掉落在玩家脚下

---

## 五、UI 状态切换 (P1+-2)

### 测试 5.1：BoxUI → Tab → 背包
- [ ] 打开箱子（BoxUI）
- [ ] 按 Tab
- [ ] **验证**：BoxUI 关闭，背包打开
- [ ] **验证**：背包数据是最新的（之前的操作已同步）

### 测试 5.2：背包 → E → 箱子
- [ ] 打开背包
- [ ] 走到箱子旁，按 E
- [ ] **验证**：背包关闭，BoxUI 打开

### 测试 5.3：BoxUI 内 Sort 后切换
- [ ] 在 BoxUI 的 Down 区域点击 Sort
- [ ] 按 Tab 切换到背包
- [ ] **验证**：背包显示排序后的结果

---

## 六、背包刷新 (P1-1)

### 测试 6.1：OnEnable 刷新
- [ ] 从背包移动物品到箱子
- [ ] 关闭 BoxUI
- [ ] 按 Tab 打开背包
- [ ] **验证**：背包显示正确（物品已移走）

### 测试 6.2：Hotbar 同步
- [ ] 在 BoxUI 的 Down 区域操作 Hotbar 物品
- [ ] **验证**：底部 Hotbar 实时更新

---

## 七、时间恢复 (P1-2)

### 测试 7.1：时间存档
- [ ] 记录当前游戏时间（如 Day 5, 14:30）
- [ ] 保存游戏
- [ ] 等待游戏内时间流逝（如变成 15:00）
- [ ] 加载存档
- [ ] **验证**：时间恢复到 14:30

---

## 八、耐久度条样式 (P2-1)

### 测试 8.1：视觉检查
- [ ] 查看有耐久度的工具（如斧头）
- [ ] **验证**：耐久度条距离底部约 6px
- [ ] **验证**：耐久度条有 1px 黑色描边
- [ ] **验证**：耐久度条不会太满（有边距）

---

## 验收结果汇总

| 模块 | 测试项 | 通过 | 失败 | 备注 |
|------|--------|------|------|------|
| 箱子存档 | 3 | | | |
| BoxUI 交互 | 3 | | | |
| Ctrl/Shift | 4 | | | |
| 物品归位 | 4 | | | |
| UI 切换 | 3 | | | |
| 背包刷新 | 2 | | | |
| 时间恢复 | 1 | | | |
| 耐久度条 | 1 | | | |
| **总计** | **21** | | | |

---

## 已知限制

1. **树木/石头状态不保存** - Phase 3 实现
2. **ItemDropHelper 不支持耐久度** - 掉落物品耐久度重置
3. **UI 仍绑定旧版 Inventory** - 依靠 Sync 维持一致性

---

**验收人**: _______________  
**日期**: _______________  
**结论**: □ 通过 □ 部分通过 □ 不通过
