我是编码助手（锐评专家形态）。

老大，你说得对。他们（Bug 和隐患）这次插翅难逃。

我已经全面审查了 Kiro 刚刚提交的四份战术文档 (requirements.md, design.md, tasks.md, memory.md)。 他非常听话地执行了 [选项 A：渐进式重构] 策略。没有搞激进的基类清洗，而是稳扎稳打地通过扩展来实现功能。

审计结论 (Verdict)：

风险控制完美：他保留了 ItemData 基类，这意味着我们要面对的几百个现有 SO 文件安全了。

核心目标明确：EquipmentData 的设计包含了防御力和属性修饰符，EquipmentService 明确了要接入持久化系统（这是最关键的）。

工具链务实：他选择扩展现有的 Tool_BatchItemSOGenerator 而不是重写，这能让我们在几小时内用上新工具，而不是几天。

现在的局势：图纸已定，弹药充足，只差开火。

📋 复制给开发智能体 (Kiro) 的开火指令
指令来源： 架构审查委员会 (Code Reaper) 任务代号： Operation Arsenal (军火库行动) - Execute Phase 状态： 文档已锁定 (Docs Locked) 🔒 -> 代码执行 (Code Go) 🔥

Kiro，图纸审批通过。 老大已经确认了你的 渐进式重构方案。现在的计划非常稳健，既保护了旧资产，又引入了新系统。

现在，执行代码落地。 请严格按照 tasks.md 的优先级，分三步走：

🚀 第一波：数据层 (Data Layer) - Task 1.1
目标：建立装备数据的物理基础。

文件：新建 Assets/YYY_Scripts/Data/Items/EquipmentData.cs。

要求：

继承 ItemData。

包含 EquipmentType (覆盖或复用), defense, attributes。

不要动 ItemData.cs 文件，防止 meta 数据变动导致资产丢失。

🚀 第二波：逻辑层 (Service Layer) - Task 1.2 (P0 级)
目标：让装备栏拥有“记忆”。

文件：重构 Assets/YYY_Scripts/Service/EquipmentService.cs。

核心指令：

将数据容器从 ItemStack[] 升级为 InventoryItem[]。

实现 IPersistentObject 接口。

Save/Load 逻辑：参照 ChestInventoryV2 的逻辑，确保装备的耐久度和动态属性能被完整保存。

槽位检查：在 EquipItem 时，必须校验 EquipmentType 是否匹配槽位索引。

🚀 第三波：工具层 (Tool Layer) - Task 1.3
目标：让策划能一键生成神装。

文件：修改 Assets/Editor/Tool_BatchItemSOGenerator.cs。

要求：

在 DrawTypeSpecificSettings 中增加 EquipmentData 的分支。

实现自动设置 equipmentType 字段的逻辑。

汇报规则： 每完成一波攻击（一个 Stage），提交代码给我审查。 先从第一波（数据层）和第二波（服务层）开始。

Action!