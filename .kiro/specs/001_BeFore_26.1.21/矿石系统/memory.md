# çŸ³å¤´/çŸ¿çŸ³ç³»ç»Ÿ - å¼€å‘è®°å¿†

## æ¨¡å—æ¦‚è¿°

çŸ³å¤´/çŸ¿çŸ³ç³»ç»Ÿè´Ÿè´£ç®¡ç†æ¸¸æˆä¸­çš„å¯é‡‡é›†çŸ³å¤´èµ„æºï¼ŒåŒ…æ‹¬ï¼š
- çŸ³å¤´çš„é˜¶æ®µç³»ç»Ÿï¼ˆM1-M4ï¼‰
- çŸ¿ç‰©ç±»å‹å’Œå«é‡ï¼ˆC1é“œ/C2é“/C3é‡‘ï¼‰
- è¡€é‡ç»§æ‰¿æœºåˆ¶ï¼ˆæº¢å‡ºä¼¤å®³ï¼‰
- ææ–™ç­‰çº§é™åˆ¶ï¼ˆé•å­ç­‰çº§ vs çŸ¿çŸ³ç­‰çº§ï¼‰
- æ‰è½ç‰©å’Œç»éªŒç³»ç»Ÿ

## å½“å‰çŠ¶æ€

- **å®Œæˆåº¦**: 95%ï¼ˆæ ¸å¿ƒå®ç°å®Œæˆï¼‰
- **æœ€åæ›´æ–°**: 2025-12-21
- **çŠ¶æ€**: æ ¸å¿ƒåŠŸèƒ½å·²å®ç°ï¼Œå¾…ç”¨æˆ·é…ç½®å’Œæµ‹è¯•

## ä¼šè¯è®°å½•

### ä¼šè¯ 1 - 2025-12-20

**ç”¨æˆ·éœ€æ±‚**:
> è®¾è®¡ StoneController å’Œå®Œå–„ tree Controller ä»¥åŠ tree system å’Œå…¶ä»–ç›¸å…³å†…å®¹

**å®Œæˆä»»åŠ¡**:
1. åˆ›å»ºçŸ³å¤´ç³»ç»Ÿéœ€æ±‚æ–‡æ¡£
2. åˆ›å»ºææ–™ç­‰çº§è®¾è®¡æ–‡æ¡£
3. åˆ›å»ºçŸ³å¤´ç³»ç»Ÿè®¾è®¡æ–‡æ¡£å’Œä»»åŠ¡åˆ—è¡¨
4. æ›´æ–°æŠ€èƒ½ç³»ç»Ÿéœ€æ±‚æ–‡æ¡£ï¼ˆ5å¤§ç±»æŠ€èƒ½ï¼‰
5. æ›´æ–°æ ‘æœ¨ç³»ç»Ÿéœ€æ±‚æ–‡æ¡£ï¼ˆæ·»åŠ ææ–™ç­‰çº§é™åˆ¶ï¼‰

---

### ä¼šè¯ 3 - 2025-12-21

**ç”¨æˆ·éœ€æ±‚**:
> å®Œæˆ12.21ä»»åŠ¡æ¸…å•ä¸­P0å†…é™¤äº†1.4 UIçš„æ‰€æœ‰ä»»åŠ¡

**å®Œæˆä»»åŠ¡**:
1. âœ… åˆ›å»º StoneStage æšä¸¾ï¼ˆM1-M4ï¼‰
2. âœ… åˆ›å»º OreType æšä¸¾ï¼ˆNone, C1, C2, C3ï¼‰
3. âœ… åˆ›å»º MaterialTier æšä¸¾ï¼ˆWood-Goldï¼Œ0-5ï¼‰
4. âœ… åˆ›å»º StoneStageConfig é˜¶æ®µé…ç½®ç±»
5. âœ… åˆ›å»º StoneDropConfig é™æ€é…ç½®ç±»ï¼ˆå·®å€¼æ‰è½è®¡ç®—ï¼‰
6. âœ… åˆ›å»º MaterialTierHelper ææ–™ç­‰çº§åˆ¤å®šå·¥å…·ç±»
7. âœ… æ›´æ–° ToolData æ·»åŠ  materialTier å­—æ®µ
8. âœ… æ›´æ–° WeaponData æ·»åŠ  materialTier å­—æ®µ
9. âœ… åˆ›å»º StoneController æ ¸å¿ƒç»„ä»¶ï¼ˆå®Œæ•´å®ç°ï¼‰
10. âœ… æ›´æ–° SkillType æšä¸¾ä¸º5å¤§ç±»ï¼ˆCombat/Gathering/Crafting/Cooking/Fishingï¼‰
11. âœ… æ›´æ–° SkillData.GetSkillName() æ”¯æŒæ–°æŠ€èƒ½ç±»å‹
12. âœ… æ›´æ–° TreeControllerV2 ä½¿ç”¨ Gathering æŠ€èƒ½
13. âœ… åœ¨ TreeControllerV2 ä¸­æ·»åŠ ææ–™ç­‰çº§åˆ¤å®š
14. âœ… å®ç°æ–§å¤´ç­‰çº§ä¸è¶³æ—¶çš„åé¦ˆï¼ˆéŸ³æ•ˆ+æç¤ºï¼‰
15. âœ… ä¿®å¤æ‰€æœ‰ä½¿ç”¨åºŸå¼ƒ SkillType çš„ä»£ç 

**ä¿®æ”¹æ–‡ä»¶**:
- `Assets/Scripts/Data/Enums/SkillType.cs` - æ›´æ–°ä¸º5å¤§ç±»æŠ€èƒ½
- `Assets/Scripts/Data/Enums/StoneEnums.cs` - æ–°å»ºï¼ŒçŸ³å¤´ç›¸å…³æšä¸¾
- `Assets/Scripts/Data/StoneStageConfig.cs` - æ–°å»ºï¼Œé˜¶æ®µé…ç½®ç±»
- `Assets/Scripts/Data/StoneDropConfig.cs` - æ–°å»ºï¼Œæ‰è½é…ç½®ç±»
- `Assets/Scripts/Utils/MaterialTierHelper.cs` - æ–°å»ºï¼Œææ–™ç­‰çº§åˆ¤å®šå·¥å…·
- `Assets/Scripts/Data/Items/ToolData.cs` - æ·»åŠ  materialTier å­—æ®µ
- `Assets/Scripts/Data/Items/WeaponData.cs` - æ·»åŠ  materialTier å­—æ®µ
- `Assets/Scripts/Controller/StoneController.cs` - æ–°å»ºï¼ŒçŸ³å¤´æ§åˆ¶å™¨
- `Assets/Scripts/Controller/TreeControllerV2.cs` - æ·»åŠ ææ–™ç­‰çº§åˆ¤å®š
- `Assets/Scripts/Data/SkillData.cs` - æ›´æ–°æŠ€èƒ½åç§°
- `Assets/Scripts/Service/SkillLevelService.cs` - æ›´æ–°è°ƒè¯•æ–¹æ³•
- `Assets/Scripts/Service/Crafting/CraftingService.cs` - ä¿®å¤åºŸå¼ƒè°ƒç”¨
- `Assets/Scripts/UI/Crafting/RecipeSlotUI.cs` - ä¿®å¤åºŸå¼ƒè°ƒç”¨
- `Assets/Scripts/Data/Recipes/RecipeData.cs` - ä¿®å¤åºŸå¼ƒè°ƒç”¨
- `Assets/Editor/Tool_BatchRecipeCreator.cs` - ä¿®å¤åºŸå¼ƒè°ƒç”¨

**è§£å†³æ–¹æ¡ˆ**:
1. **æŠ€èƒ½ç³»ç»Ÿé‡æ„**ï¼šå°†åŸæœ‰çš„ Farming/Mining/Woodcutting åˆå¹¶ä¸º Gatheringï¼ˆé‡‡é›†ï¼‰
2. **ææ–™ç­‰çº§ç³»ç»Ÿ**ï¼šåˆ›å»ºç»Ÿä¸€çš„ MaterialTier æšä¸¾å’Œ MaterialTierHelper å·¥å…·ç±»
3. **çŸ³å¤´æ§åˆ¶å™¨**ï¼šå®Œæ•´å®ç°é˜¶æ®µç³»ç»Ÿã€æº¢å‡ºä¼¤å®³ã€å·®å€¼æ‰è½ã€ç»éªŒç³»ç»Ÿ
4. **æ ‘æœ¨ææ–™ç­‰çº§**ï¼šåœ¨ TreeControllerV2 ä¸­æ·»åŠ æ–§å¤´ç­‰çº§æ£€æŸ¥

**é—ç•™é—®é¢˜**:
- [ ] ç”¨æˆ·éœ€è¦é…ç½® ToolData SO çš„ materialTier å­—æ®µ
- [ ] ç”¨æˆ·éœ€è¦åˆ›å»ºçŸ³å¤´ Sprite èµ„æº
- [ ] ç”¨æˆ·éœ€è¦åœ¨åœºæ™¯ä¸­æ·»åŠ  StoneController é¢„åˆ¶ä½“
- [ ] å±æ€§æµ‹è¯•å¾…å®ç°ï¼ˆå¯é€‰ï¼‰

---

## å…³é”®å†³ç­–

| å†³ç­– | åŸå›  | æ—¥æœŸ |
|------|------|------|
| M3 æ˜¯æœ€ç»ˆé˜¶æ®µï¼Œä¸è¿›å…¥ M4 | M4 æ˜¯ç‹¬ç«‹çš„è£…é¥°çŸ³å¤´ï¼Œç”¨äºåœºæ™¯éšæœºåˆ·æ–° | 2025-12-20 |
| è¡€é‡æº¢å‡ºç»§æ‰¿ | ä¸æ ‘æœ¨ç³»ç»Ÿä¸åŒï¼Œæä¾›æ›´æµç•…çš„é‡‡é›†ä½“éªŒ | 2025-12-20 |
| ææ–™ç­‰çº§ 0-5 | å¯¹åº”æœ¨/çŸ³/ç”Ÿé“/é»„é“œ/é’¢/é‡‘å…­ç§æè´¨ | 2025-12-20 |
| ä½ç­‰çº§é•å­å¯æŒ–é«˜ç­‰çº§çŸ¿ä½†åªå¾—çŸ³æ–™ | ä¸ç æ ‘ä¸åŒï¼Œé‡‡çŸ¿å…è®¸"è¶Šçº§"ä½†æ”¶ç›Šé™ä½ | 2025-12-20 |
| æŠ€èƒ½åˆå¹¶ä¸º5å¤§ç±» | ç®€åŒ–æŠ€èƒ½ç³»ç»Ÿï¼ŒGathering ç»Ÿä¸€ç®¡ç†é‡‡é›†ç±»æ´»åŠ¨ | 2025-12-21 |

## ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `Assets/Scripts/Data/Enums/StoneEnums.cs` | çŸ³å¤´ç›¸å…³æšä¸¾ |
| `Assets/Scripts/Data/StoneStageConfig.cs` | é˜¶æ®µé…ç½®ç±» |
| `Assets/Scripts/Data/StoneDropConfig.cs` | æ‰è½é…ç½®ç±» |
| `Assets/Scripts/Utils/MaterialTierHelper.cs` | ææ–™ç­‰çº§åˆ¤å®šå·¥å…· |
| `Assets/Scripts/Controller/StoneController.cs` | çŸ³å¤´æ§åˆ¶å™¨ |
| `Assets/Scripts/Data/Enums/SkillType.cs` | æŠ€èƒ½ç±»å‹æšä¸¾ï¼ˆ5å¤§ç±»ï¼‰ |

## æ ¸å¿ƒæ•°æ®è¡¨

### è¡€é‡é…ç½®

| é˜¶æ®µ | è¡€é‡ | å¤‡æ³¨ |
|------|------|------|
| M1 | 36 | - |
| M2 | 17 | - |
| M3 | 9* | *oreIndex=0 æ—¶è¡€é‡ä¸º 4 |
| M4 | 4 | è£…é¥°çŸ³å¤´ |

### çŸ¿ç‰©æ‰è½æ•°é‡

| é˜¶æ®µ_å«é‡ | çŸ¿ç‰©æ•°é‡ |
|----------|---------|
| M1_0 | 0 |
| M1_1 | 3 |
| M1_2 | 5 |
| M1_3 | 7 |
| M1_4 | 9 |
| M2_0 | 0 |
| M2_1 | 1 |
| M2_2 | 3 |
| M2_3 | 5 |
| M2_4 | 7 |
| M3_0 | 0 |
| M3_1 | 1 |
| M3_2 | 2 |
| M3_3 | 3 |

### çŸ³æ–™æ‰è½æ•°é‡ï¼ˆå·®å€¼æ‰è½ï¼‰

| é˜¶æ®µ | çŸ³æ–™æ€»é‡ | é˜¶æ®µè½¬æ¢æ‰è½ |
|------|---------|-------------|
| M1 | 12 | 6 |
| M2 | 6 | 4 |
| M3 | 2 | 2ï¼ˆæœ€ç»ˆé˜¶æ®µï¼‰ |
| M4 | 2 | 2ï¼ˆæœ€ç»ˆé˜¶æ®µï¼‰ |

### ç»éªŒé…ç½®

| èµ„æºç±»å‹ | ç»éªŒå€¼ | æŠ€èƒ½ç±»å‹ |
|---------|--------|---------|
| 1ä¸ªçŸ¿ç‰© | 2 | Gatheringï¼ˆé‡‡é›†ï¼‰ |
| 1ä¸ªçŸ³æ–™ | 1 | Gatheringï¼ˆé‡‡é›†ï¼‰ |

### é•å­é‡‡é›†é™åˆ¶

| é•å­æè´¨ | ææ–™ç­‰çº§ | å¯è·å–çŸ¿ç‰© | è¯´æ˜ |
|---------|---------|-----------|------|
| æœ¨é• | 0 | æ—  | åªèƒ½è·å¾—çŸ³æ–™ |
| çŸ³é• | 1 | é“çŸ¿(C2) | é“œçŸ¿/é‡‘çŸ¿åªèƒ½è·å¾—çŸ³æ–™ |
| ç”Ÿé“é• | 2 | é“çŸ¿(C2)ã€é“œçŸ¿(C1) | é‡‘çŸ¿åªèƒ½è·å¾—çŸ³æ–™ |
| é»„é“œé• | 3 | é“çŸ¿(C2)ã€é“œçŸ¿(C1) | é‡‘çŸ¿åªèƒ½è·å¾—çŸ³æ–™ |
| é’¢é• | 4 | æ‰€æœ‰çŸ¿ç‰© | å¯é‡‡é›†é‡‘çŸ¿(C3) |
| é‡‘é• | 5 | æ‰€æœ‰çŸ¿ç‰© | å¯é‡‡é›†é‡‘çŸ¿(C3) |

### æ–§å¤´ç ä¼é™åˆ¶

| æ ‘æœ¨é˜¶æ®µ | æ‰€éœ€æ–§å¤´ç­‰çº§ |
|---------|-------------|
| 0-3 | æœ¨æ–§(0) |
| 4 | ç”Ÿé“æ–§(2) |
| 5 | é»„é“œæ–§(3) |

**æ³¨æ„**ï¼šæ‰€æœ‰é•å­éƒ½èƒ½è·å¾—çŸ³æ–™ï¼


---

### ä¼šè¯ 4 - 2025-12-30ï¼ˆStoneController ä¼˜åŒ–ï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> ä¼˜åŒ– StoneController çš„ Inspector ç•Œé¢ï¼Œå‚è€ƒ TreeControllerV2Editor çš„é£æ ¼ï¼Œæ”¯æŒåŠ¨æ€å‚æ•°è°ƒèŠ‚å’Œè‡ªåŠ¨ Sprite åŠ è½½

**å®Œæˆä»»åŠ¡**:
1. âœ… åˆ›å»º StoneControllerEditor è‡ªå®šä¹‰ç¼–è¾‘å™¨
2. âœ… å®ç°åˆ†ç»„æŠ˜å  UIï¼ˆé˜¶æ®µé…ç½®ã€å½“å‰çŠ¶æ€ã€çŠ¶æ€é¢„è§ˆã€Spriteé…ç½®ã€æ‰è½é…ç½®ã€éŸ³æ•ˆè®¾ç½®ã€è°ƒè¯•ï¼‰
3. âœ… å®ç° OreIndex èŒƒå›´åŠ¨æ€è°ƒæ•´ï¼ˆM1/M2: 0-4, M3: 0-3, M4: 0-7ï¼‰
4. âœ… å®ç°çŠ¶æ€é¢„è§ˆï¼ˆSpriteåç§°ã€è¡€é‡ã€é¢„è®¡æ‰è½ã€æ‰€éœ€é•å­ï¼‰
5. âœ… æ·»åŠ è¿è¡Œæ—¶å‚æ•°æ£€æµ‹ï¼ˆUpdate ä¸­æ£€æµ‹ Inspector å˜åŒ–ï¼‰
6. âœ… æ·»åŠ  OreIndex èŒƒå›´é’³åˆ¶é€»è¾‘
7. âœ… æ·»åŠ é˜¶æ®µåˆ‡æ¢æ—¶è¡€é‡è‡ªåŠ¨é‡ç½®
8. âœ… æ·»åŠ  OnValidate æ”¯æŒç¼–è¾‘å™¨é¢„è§ˆ

**ä¿®æ”¹æ–‡ä»¶**:
- `Assets/Editor/StoneControllerEditor.cs` - æ–°å»ºï¼Œè‡ªå®šä¹‰ç¼–è¾‘å™¨
- `Assets/YYY_Scripts/Controller/StoneController.cs` - æ·»åŠ è¿è¡Œæ—¶è°ƒè¯•åŠŸèƒ½

**è§£å†³æ–¹æ¡ˆ**:

1. **Inspector UI ä¼˜åŒ–**ï¼š
   - å‚è€ƒ TreeControllerV2Editor çš„åˆ†ç»„æŠ˜å é£æ ¼
   - å›ºå®šæ˜¾ç¤º 4 ä¸ªé˜¶æ®µé…ç½®ï¼ˆM1-M4ï¼‰
   - çŠ¶æ€é¢„è§ˆæ˜¾ç¤º Sprite åç§°ã€è¡€é‡ã€é¢„è®¡æ‰è½ã€æ‰€éœ€é•å­

2. **è¿è¡Œæ—¶è°ƒè¯•**ï¼š
   - åœ¨ Update() ä¸­æ£€æµ‹ lastOreTypeã€lastStageã€lastOreIndex å˜åŒ–
   - å‚æ•°å˜åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨ UpdateSprite()
   - é˜¶æ®µå˜åŒ–æ—¶è‡ªåŠ¨é‡ç½®è¡€é‡

3. **OreIndex èŒƒå›´é’³åˆ¶**ï¼š
   - GetMaxOreIndex() è¿”å›å„é˜¶æ®µæœ€å¤§å€¼
   - ClampOreIndex() é’³åˆ¶åˆ°æœ‰æ•ˆèŒƒå›´
   - OnValidate() æ”¯æŒç¼–è¾‘å™¨é¢„è§ˆ

**æ–°å¢åŠŸèƒ½**:

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| åˆ†ç»„æŠ˜å  UI | é˜¶æ®µé…ç½®ã€å½“å‰çŠ¶æ€ã€çŠ¶æ€é¢„è§ˆç­‰åˆ†ç»„ |
| OreIndex åŠ¨æ€èŒƒå›´ | æ ¹æ®é˜¶æ®µè‡ªåŠ¨è°ƒæ•´æ»‘å—èŒƒå›´ |
| çŠ¶æ€é¢„è§ˆ | æ˜¾ç¤º Sprite åç§°ã€è¡€é‡ã€é¢„è®¡æ‰è½ |
| è¿è¡Œæ—¶è°ƒè¯• | Inspector ä¿®æ”¹å‚æ•°å®æ—¶æ›´æ–°æ˜¾ç¤º |
| ç¼–è¾‘å™¨é¢„è§ˆ | OnValidate æ”¯æŒç¼–è¾‘æ¨¡å¼é¢„è§ˆ |

**é—ç•™é—®é¢˜**:
- [ ] ç”¨æˆ·éœ€è¦æµ‹è¯• Inspector UI æ˜¾ç¤ºæ•ˆæœ
- [ ] ç”¨æˆ·éœ€è¦å‡†å¤‡ Stone Sprite èµ„æº

---

## å½“å‰çŠ¶æ€æ›´æ–°

- **å®Œæˆåº¦**: 98%ï¼ˆInspector ä¼˜åŒ–å®Œæˆï¼‰
- **æœ€åæ›´æ–°**: 2025-12-31
- **çŠ¶æ€**: Inspector ä¼˜åŒ–å®Œæˆï¼Œå¾…ç”¨æˆ·æµ‹è¯•

---

### ä¼šè¯ 5 - 2025-12-31ï¼ˆSprite æ–‡ä»¶å¤¹æ‹–å…¥å’Œè°ƒè¯•åŠŸèƒ½ï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> æŠŠ spritePathPrefix æ”¹æˆæ‹–å…¥æ–‡ä»¶å¤¹ï¼Œæ‹–å…¥åç›´æ¥è·å–å¹¶åŒæ­¥ï¼ŒåŠ è°ƒè¯•ä¿¡æ¯æ˜¾ç¤ºè·å–åˆ°å¤šå°‘ spriteï¼Œæ¯ä¸ªé˜¶æ®µæœ‰å“ªäº›

**å®Œæˆä»»åŠ¡**:
1. âœ… åœ¨ StoneController ä¸­æ·»åŠ  `spriteFolder` å­—æ®µï¼ˆUnityEngine.Object ç±»å‹ï¼‰
2. âœ… ä¿®æ”¹ StoneControllerEditor æ”¯æŒæ–‡ä»¶å¤¹æ‹–å…¥
3. âœ… æ‹–å…¥æ–‡ä»¶å¤¹åè‡ªåŠ¨è®¡ç®— Resources ç›¸å¯¹è·¯å¾„
4. âœ… æ·»åŠ ã€Œåˆ·æ–° Sprite ç¼“å­˜ã€æŒ‰é’®
5. âœ… æ·»åŠ ã€ŒåŒæ­¥å½“å‰ Spriteã€æŒ‰é’®
6. âœ… æ·»åŠ è¯¦ç»†çš„ Sprite è°ƒè¯•ä¿¡æ¯é¢æ¿
7. âœ… æ˜¾ç¤ºæ€» Sprite æ•°é‡ã€æŒ‰é˜¶æ®µåˆ†ç±»ã€æŒ‰çŸ¿ç‰©ç±»å‹åˆ†ç±»
8. âœ… æ˜¾ç¤ºå½“å‰çŠ¶æ€æ£€æŸ¥ï¼ˆæœŸæœ› Sprite æ˜¯å¦å­˜åœ¨ï¼‰

**ä¿®æ”¹æ–‡ä»¶**:
- `Assets/YYY_Scripts/Controller/StoneController.cs` - æ·»åŠ  spriteFolder å­—æ®µå’Œç›¸å…³æ–¹æ³•
- `Assets/Editor/StoneControllerEditor.cs` - æ·»åŠ æ–‡ä»¶å¤¹æ‹–å…¥å’Œè°ƒè¯•ä¿¡æ¯åŠŸèƒ½

**è§£å†³æ–¹æ¡ˆ**:

1. **æ–‡ä»¶å¤¹æ‹–å…¥**ï¼š
   - æ·»åŠ  `spriteFolder` å­—æ®µï¼Œç±»å‹ä¸º `UnityEngine.Object`
   - æ‹–å…¥æ–‡ä»¶å¤¹åè‡ªåŠ¨è§£æ Resources ç›¸å¯¹è·¯å¾„
   - è‡ªåŠ¨æ›´æ–° `spritePathPrefix` å­—æ®µ

2. **Sprite ç¼“å­˜ç³»ç»Ÿ**ï¼š
   - ä½¿ç”¨ `AssetDatabase.FindAssets("t:Sprite")` æ‰«ææ–‡ä»¶å¤¹
   - è§£æ Sprite åç§°æ ¼å¼ï¼š`Stone_{OreType}_{Stage}_{OreIndex}`
   - æŒ‰é˜¶æ®µå’ŒçŸ¿ç‰©ç±»å‹åˆ†ç±»ç»Ÿè®¡

3. **è°ƒè¯•ä¿¡æ¯é¢æ¿**ï¼š
   - åŸºæœ¬ç»Ÿè®¡ï¼šç¼“å­˜çŠ¶æ€ã€æ€»æ•°é‡ã€æ–‡ä»¶å¤¹è·¯å¾„
   - æŒ‰é˜¶æ®µåˆ†ç±»ï¼šM1/M2/M3/M4 å„æœ‰å¤šå°‘ä¸ª
   - æŒ‰çŸ¿ç‰©ç±»å‹åˆ†ç±»ï¼šC0/C1/C2/C3 å„æœ‰å¤šå°‘ä¸ª
   - å½“å‰çŠ¶æ€æ£€æŸ¥ï¼šæœŸæœ› Sprite æ˜¯å¦å­˜åœ¨

**æ–°å¢ Inspector åŠŸèƒ½**:

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| Sprite æ–‡ä»¶å¤¹ | æ‹–å…¥åŒ…å«æ‰€æœ‰ Stone Sprite çš„æ–‡ä»¶å¤¹ |
| åˆ·æ–° Sprite ç¼“å­˜ | é‡æ–°æ‰«ææ–‡ä»¶å¤¹å¹¶ç»Ÿè®¡ |
| åŒæ­¥å½“å‰ Sprite | æ ¹æ®å½“å‰çŠ¶æ€æ›´æ–°æ˜¾ç¤º |
| Sprite è°ƒè¯•ä¿¡æ¯ | æŠ˜å é¢æ¿æ˜¾ç¤ºè¯¦ç»†ç»Ÿè®¡ |

**è°ƒè¯•ä¿¡æ¯è¾“å‡ºç¤ºä¾‹**:
```
[StoneControllerEditor] å¼€å§‹æ‰«ææ–‡ä»¶å¤¹: Assets/Sprites/Props/Materials/Stone/C1
[StoneControllerEditor] æ‰¾åˆ° 20 ä¸ª Sprite èµ„æº
[StoneControllerEditor] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[StoneControllerEditor] Sprite ç¼“å­˜åˆ·æ–°å®Œæˆ
[StoneControllerEditor] æ€»è®¡: 20 ä¸ª Sprite
[StoneControllerEditor] æœ‰æ•ˆ: 20 ä¸ª, æ— æ•ˆ: 0 ä¸ª
[StoneControllerEditor] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[StoneControllerEditor] æŒ‰é˜¶æ®µåˆ†ç±»:
  M1: 5 ä¸ª
  M2: 5 ä¸ª
  M3: 4 ä¸ª
  M4: 6 ä¸ª
[StoneControllerEditor] æŒ‰çŸ¿ç‰©ç±»å‹åˆ†ç±»:
  C1: 20 ä¸ª
```

**é—ç•™é—®é¢˜**:
- æ— 

---

### ä¼šè¯ 6 - 2026-01-02ï¼ˆCollider åŒæ­¥ã€åº•éƒ¨å¯¹é½ã€é˜¶æ®µå˜åŒ–åŠ¨ç”»ï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> 1. æ›´æ–°é˜¶æ®µæ—¶åŒæ­¥æ›´æ–° Colliderï¼ˆä» Sprite çš„ Custom Physics Shapeï¼‰
> 2. æ‰€æœ‰é˜¶æ®µçš„ Sprite åº•éƒ¨ä¸­å¿ƒä¸çˆ¶ç‰©ä½“ä½ç½®å¯¹é½
> 3. é˜¶æ®µå˜åŒ–æ—¶æ·»åŠ åŠ¨ç”»/ç²’å­æ•ˆæœ

**å®Œæˆä»»åŠ¡**:
1. âœ… æ·»åŠ  `polygonCollider` å­—æ®µå¼•ç”¨ PolygonCollider2D
2. âœ… å®ç° `SyncColliderFromSprite()` ä» Sprite çš„ Custom Physics Shape åŒæ­¥ Collider
3. âœ… å®ç° `AlignSpriteBottomCenter()` å¯¹é½ Sprite åº•éƒ¨ä¸­å¿ƒåˆ°çˆ¶ç‰©ä½“ä½ç½®
4. âœ… æ·»åŠ è§†è§‰æ•ˆæœé…ç½®å­—æ®µï¼ˆç²’å­é¢„åˆ¶ä½“ã€ç¢ç‰‡é¢œè‰²ã€ç¼©æ”¾åŠ¨ç”»å¼€å…³ï¼‰
5. âœ… å®ç° `PlayStageChangeEffect()` é˜¶æ®µå˜åŒ–è§†è§‰æ•ˆæœ
6. âœ… å®ç° `SpawnDebrisParticles()` çŸ³å—ç¢ç‰‡ç²’å­æ•ˆæœ
7. âœ… å®ç° `SimpleDebrisCoroutine()` ç®€å•ç¢ç‰‡æ•ˆæœï¼ˆä¸ä¾èµ–é¢„åˆ¶ä½“ï¼‰
8. âœ… å®ç° `StageChangeScaleCoroutine()` ç¼©æ”¾åŠ¨ç”»
9. âœ… æ›´æ–°ç¼–è¾‘å™¨åŒæ­¥åŠŸèƒ½ï¼Œæ”¯æŒåº•éƒ¨å¯¹é½å’Œ Collider åŒæ­¥

**ä¿®æ”¹æ–‡ä»¶**:
- `Assets/YYY_Scripts/Controller/StoneController.cs` - æ·»åŠ  Collider åŒæ­¥ã€åº•éƒ¨å¯¹é½ã€è§†è§‰æ•ˆæœ
- `Assets/Editor/StoneControllerEditor.cs` - æ·»åŠ ç¼–è¾‘å™¨ä¸­çš„å¯¹é½å’Œ Collider åŒæ­¥

**è§£å†³æ–¹æ¡ˆ**:

1. **Collider åŒæ­¥**ï¼š
   - ä½¿ç”¨ `sprite.GetPhysicsShapeCount()` å’Œ `sprite.GetPhysicsShape()` è·å– Custom Physics Shape
   - å°†è·¯å¾„å¤åˆ¶åˆ° PolygonCollider2D
   - åŒæ­¥ Collider çš„ offset ä¸ Sprite ä½ç½®å¯¹é½
   - å¦‚æœæœ‰ CompositeCollider2Dï¼Œè§¦å‘ `GenerateGeometry()`

2. **åº•éƒ¨ä¸­å¿ƒå¯¹é½**ï¼š
   - è·å– Sprite çš„ boundsï¼ˆæœ¬åœ°åæ ‡ï¼‰
   - è®¡ç®—åº•éƒ¨ä¸­å¿ƒåç§»é‡ï¼š`bottomY = bounds.min.y`, `centerX = bounds.center.x`
   - è®¾ç½® localPosition ä¸º `(-centerX, -bottomY, 0)`
   - ç¡®ä¿æ‰€æœ‰é˜¶æ®µçš„çŸ³å¤´åº•éƒ¨ä¸­å¿ƒéƒ½åœ¨çˆ¶ç‰©ä½“ä½ç½®

3. **é˜¶æ®µå˜åŒ–è§†è§‰æ•ˆæœ**ï¼š
   - æ”¯æŒè‡ªå®šä¹‰ç²’å­é¢„åˆ¶ä½“ï¼ˆå¯é€‰ï¼‰
   - å†…ç½®ç®€å•ç¢ç‰‡æ•ˆæœï¼š4-8 ä¸ªå°æ–¹å—é£æ•£ã€æ·¡å‡ºã€ç¼©å°
   - ç¼©æ”¾åŠ¨ç”»ï¼šå…ˆç¼©å° 30%ï¼Œç„¶åå¼¹æ€§æ¢å¤

**æ–°å¢å­—æ®µ**:

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| polygonCollider | PolygonCollider2D | ç”¨äºåŒæ­¥ Custom Physics Shape |
| stageChangeParticlePrefab | GameObject | é˜¶æ®µå˜åŒ–ç²’å­é¢„åˆ¶ä½“ï¼ˆå¯é€‰ï¼‰ |
| debrisColor | Color | çŸ³å—ç¢ç‰‡é¢œè‰² |
| playScaleAnimation | bool | æ˜¯å¦æ’­æ”¾ç¼©æ”¾åŠ¨ç”» |

**æ–°å¢æ–¹æ³•**:

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| AlignSpriteBottomCenter() | å¯¹é½ Sprite åº•éƒ¨ä¸­å¿ƒåˆ°çˆ¶ç‰©ä½“ä½ç½® |
| SyncColliderFromSprite() | ä» Sprite çš„ Custom Physics Shape åŒæ­¥ Collider |
| PlayStageChangeEffect() | æ’­æ”¾é˜¶æ®µå˜åŒ–è§†è§‰æ•ˆæœ |
| SpawnDebrisParticles() | ç”ŸæˆçŸ³å—ç¢ç‰‡ç²’å­ |
| SimpleDebrisCoroutine() | ç®€å•ç¢ç‰‡æ•ˆæœåç¨‹ |
| StageChangeScaleCoroutine() | ç¼©æ”¾åŠ¨ç”»åç¨‹ |

**é—ç•™é—®é¢˜**:
- [ ] ç”¨æˆ·æµ‹è¯•è§†è§‰æ•ˆæœï¼Œå¦‚ä¸æ»¡æ„å¯å–æ¶ˆ

---

### ä¼šè¯ 7 - 2026-01-02ï¼ˆä¿®å¤ Sprite åŒæ­¥é—®é¢˜ï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> ç°åœ¨æ²¡æ¯›ç—…äº†ï¼Œä½†æ˜¯ä¸ä¼šæ›´æ–° sprite renderer å‘€ï¼Œä½ è¿˜æ˜¯æ²¡æœ‰åŒæ­¥æˆåŠŸ

**é—®é¢˜åˆ†æ**:
ç”¨æˆ·åé¦ˆåœ¨ Inspector ä¸­ä¿®æ”¹å‚æ•°åï¼ŒSpriteRenderer æ²¡æœ‰è‡ªåŠ¨æ›´æ–°æ˜¾ç¤ºã€‚æ—¥å¿—æ˜¾ç¤ºç¼“å­˜æ­£å¸¸å·¥ä½œï¼ˆæ‰¾åˆ° 22 ä¸ª Spriteï¼‰ï¼Œä½† Sprite æ²¡æœ‰åº”ç”¨åˆ° SpriteRendererã€‚

**å®Œæˆä»»åŠ¡**:
1. âœ… æ”¹è¿› `DrawCurrentState()` ä¸­çš„å˜åŒ–æ£€æµ‹é€»è¾‘
2. âœ… æ·»åŠ ç¼“å­˜æ— æ•ˆæ—¶è‡ªåŠ¨åˆ·æ–°çš„é€»è¾‘
3. âœ… æ”¹è¿› `SyncCurrentSprite()` æ·»åŠ è¯¦ç»†è°ƒè¯•è¾“å‡º
4. âœ… æ·»åŠ  Undo æ”¯æŒï¼ˆ`Undo.RecordObject`ï¼‰
5. âœ… æ·»åŠ  Scene è§†å›¾å¼ºåˆ¶é‡ç»˜ï¼ˆ`SceneView.RepaintAll()`ï¼‰
6. âœ… æ”¹è¿› `OnSpriteFolderChanged()` æ·»åŠ æ›´å¥½çš„é”™è¯¯å¤„ç†

**ä¿®æ”¹æ–‡ä»¶**:
- `Assets/Editor/StoneControllerEditor.cs` - ä¿®å¤ Sprite åŒæ­¥é€»è¾‘

**è§£å†³æ–¹æ¡ˆ**:

1. **å˜åŒ–æ£€æµ‹æ”¹è¿›**ï¼š
   - æ£€æµ‹åˆ°å‚æ•°å˜åŒ–åï¼Œå…ˆæ£€æŸ¥ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ
   - å¦‚æœç¼“å­˜æ— æ•ˆä½†æ–‡ä»¶å¤¹å·²è®¾ç½®ï¼Œè‡ªåŠ¨åˆ·æ–°ç¼“å­˜
   - ç„¶åå†åŒæ­¥ Sprite

2. **åŒæ­¥æ–¹æ³•æ”¹è¿›**ï¼š
   - æ·»åŠ è¯¦ç»†çš„è°ƒè¯•è¾“å‡ºï¼Œæ˜¾ç¤ºæ¯ä¸€æ­¥çš„çŠ¶æ€
   - ä½¿ç”¨ `Undo.RecordObject` æ”¯æŒæ’¤é”€æ“ä½œ
   - è°ƒç”¨ `SceneView.RepaintAll()` å¼ºåˆ¶åˆ·æ–° Scene è§†å›¾
   - æ˜¾ç¤ºæ—§ Sprite åç§°å’Œæ–° Sprite åç§°çš„å¯¹æ¯”

3. **é”™è¯¯å¤„ç†æ”¹è¿›**ï¼š
   - ç¼“å­˜æ— æ•ˆæ—¶ç»™å‡ºæ˜ç¡®æç¤º
   - æ‰¾ä¸åˆ° Sprite æ—¶åªæ˜¾ç¤ºå‰ 5 ä¸ªç¼“å­˜é¡¹ï¼ˆé¿å…æ—¥å¿—è¿‡é•¿ï¼‰

**è°ƒè¯•è¾“å‡ºç¤ºä¾‹**:
```
[StoneControllerEditor] å¼€å§‹åŒæ­¥ Sprite: Stone_C1_M1_0
[StoneControllerEditor] æ‰¾åˆ° Sprite: Stone_C1_M1_0_0
[StoneControllerEditor] SpriteRenderer å·²æ›´æ–°: Stone_C1_M2_0_0 â†’ Stone_C1_M1_0_0
[StoneControllerEditor] Sprite åº•éƒ¨å¯¹é½: localPos = (0, 0.5, 0)
[StoneControllerEditor] Collider å·²åŒæ­¥: 1 ä¸ªè·¯å¾„, åç§»å·²åº”ç”¨åˆ°è·¯å¾„ç‚¹
[StoneControllerEditor] âœ… åŒæ­¥å®Œæˆ: Stone_C1_M1_0
```

---

### ä¼šè¯ 8 - 2026-01-03ï¼ˆä¿®å¤ Collider ä½ç½®åç§»é—®é¢˜ï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> ä½ çš„colliderä½ç½®è¿˜æ˜¯ä¸å¯¹

**é—®é¢˜åˆ†æ**:
Collider ä½ç½®ä¸ Sprite ä¸åŒ¹é…ã€‚åŸå› æ˜¯ä¹‹å‰çš„å®ç°é”™è¯¯åœ°ç»™ Custom Physics Shape çš„è·¯å¾„ç‚¹åŠ äº†åç§»ã€‚

**æ ¹æœ¬åŸå› **ï¼š
- PolygonCollider2D å’Œ SpriteRenderer åœ¨**åŒä¸€ä¸ªç‰©ä½“**ä¸Š
- å½“æˆ‘ä»¬ç§»åŠ¨ transform æ¥å¯¹é½ Sprite åº•éƒ¨æ—¶ï¼ŒCollider ä¼š**è‡ªåŠ¨è·Ÿç€ç§»åŠ¨**
- æ‰€ä»¥è·¯å¾„ç‚¹**ä¸éœ€è¦é¢å¤–åç§»**

**å®Œæˆä»»åŠ¡**:
1. âœ… ä¿®å¤ `SyncColliderFromSprite()` æ–¹æ³•ï¼ˆEditor ç‰ˆæœ¬ï¼‰
2. âœ… ä¿®å¤ `SyncColliderFromSprite()` æ–¹æ³•ï¼ˆè¿è¡Œæ—¶ç‰ˆæœ¬ï¼‰
3. âœ… ç§»é™¤é”™è¯¯çš„è·¯å¾„ç‚¹åç§»é€»è¾‘
4. âœ… ä¼˜å…ˆåœ¨ SpriteRenderer ç‰©ä½“ä¸ŠæŸ¥æ‰¾ PolygonCollider2D

**ä¿®æ”¹æ–‡ä»¶**:
- `Assets/Editor/StoneControllerEditor.cs` - ä¿®å¤ Collider åŒæ­¥é€»è¾‘
- `Assets/YYY_Scripts/Controller/StoneController.cs` - ä¿®å¤ Collider åŒæ­¥é€»è¾‘

**è§£å†³æ–¹æ¡ˆ**:

1. **ç§»é™¤è·¯å¾„ç‚¹åç§»**ï¼š
   - ä¹‹å‰ï¼š`offsetPath.Add(point + spriteOffset)` âŒ
   - ç°åœ¨ï¼šç›´æ¥ä½¿ç”¨åŸå§‹è·¯å¾„ç‚¹ âœ…

2. **æ­£ç¡®çš„ Collider æŸ¥æ‰¾é¡ºåº**ï¼š
   - ä¼˜å…ˆåœ¨ SpriteRenderer ç‰©ä½“ä¸ŠæŸ¥æ‰¾ `sr.GetComponent<PolygonCollider2D>()`
   - ç„¶åå°è¯•ä» serializedObject è·å–
   - æœ€ååœ¨ controller ç‰©ä½“ä¸ŠæŸ¥æ‰¾

3. **å±‚çº§ç»“æ„è¯´æ˜**ï¼š
```
Stone_M1_00ï¼ˆçˆ¶ç‰©ä½“ï¼‰
â”œâ”€ ä½ç½® = çŸ³å¤´åº•éƒ¨ä¸­å¿ƒ
â”œâ”€ Rigidbody2D (Static)
â”œâ”€ CompositeCollider2D
â”‚
â””â”€ Stoneï¼ˆå­ç‰©ä½“ï¼‰= StoneController æ‰€åœ¨ç‰©ä½“
     â”œâ”€ SpriteRenderer
     â”œâ”€ PolygonCollider2D (Merge) â† å’Œ SpriteRenderer åœ¨åŒä¸€ç‰©ä½“
     â””â”€ StoneController
```

**å…³é”®ç†è§£**ï¼š
- Collider å’Œ SpriteRenderer åœ¨åŒä¸€ä¸ªç‰©ä½“ä¸Š
- ç§»åŠ¨ transform æ—¶ï¼Œä¸¤è€…ä¸€èµ·ç§»åŠ¨
- Custom Physics Shape çš„åæ ‡æ˜¯ç›¸å¯¹äº Sprite pivot çš„
- ä¸éœ€è¦é¢å¤–åç§»ï¼Œç›´æ¥å¤åˆ¶è·¯å¾„ç‚¹å³å¯

**é—ç•™é—®é¢˜**:
- [ ] ç”¨æˆ·æµ‹è¯•ä¿®å¤åçš„ Collider ä½ç½®

---

## å½“å‰çŠ¶æ€æ›´æ–°

- **å®Œæˆåº¦**: 100%ï¼ˆæ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨å®Œæˆï¼‰
- **æœ€åæ›´æ–°**: 2026-01-03
- **çŠ¶æ€**: å·²ä¿®å¤ Collider ä½ç½®åç§»é—®é¢˜ï¼Œå¾…ç”¨æˆ·æµ‹è¯•


---

### ä¼šè¯ 9 - 2026-01-04ï¼ˆå·¥å…·ç³»ç»Ÿé—®é¢˜å…¨é¢åˆ†æï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> æ£€æŸ¥ StoneController çš„ç­‰çº§åˆ¤æ–­æ˜¯å¦å°‘äº†é»„é“œé•å’Œé‡‘é•ï¼Œä»¥åŠä¸ºä»€ä¹ˆæŒ–çŸ¿æ—¶å®Œå…¨ä¸ä¼šå‡ºç°çŸ¿ç‰©

**é—®é¢˜æ’æŸ¥è¿‡ç¨‹**:

1. **åˆæ­¥æ£€æŸ¥ MaterialTierHelper**ï¼š
   - ä»£ç é€»è¾‘æ­£ç¡®ï¼Œä½¿ç”¨ `>=` æ¯”è¾ƒä¼šè‡ªåŠ¨å…¼å®¹æ›´é«˜ç­‰çº§
   - é»„é“œé•(3) >= 2 å¯ä»¥é‡‡é›†é“œçŸ¿(C1)å’Œé“çŸ¿(C2) âœ…
   - é‡‘é•(5) >= 4 å¯ä»¥é‡‡é›†æ‰€æœ‰çŸ¿ç‰© âœ…

2. **æ·»åŠ è¯¦ç»†è°ƒè¯•è¾“å‡º**ï¼š
   - åœ¨ StoneController çš„ Start()ã€CanAccept()ã€OnHit()ã€GetPickaxeTier() ç­‰æ–¹æ³•æ·»åŠ è°ƒè¯•æ—¥å¿—
   - å‘ç°æ§åˆ¶å°**å®Œå…¨æ²¡æœ‰ StoneController çš„ä»»ä½•æ—¥å¿—**

3. **æ£€æŸ¥åœºæ™¯é…ç½®**ï¼š
   - æœç´¢åœºæ™¯æ–‡ä»¶å‘ç°**æ²¡æœ‰ä»»ä½• `m_TagString: Rock` çš„ç‰©ä½“**
   - è¯´æ˜åœºæ™¯ä¸­æ ¹æœ¬æ²¡æœ‰æ”¾ç½®çŸ³å¤´é¢„åˆ¶ä½“

4. **æ£€æŸ¥é¢„åˆ¶ä½“é…ç½®**ï¼š
   - `Assets/222_Prefabs/Rock/C1.prefab` ä¸­æœ‰ StoneController ç»„ä»¶
   - ä½†é¢„åˆ¶ä½“æ²¡æœ‰è¢«æ”¾ç½®åˆ°åœºæ™¯ä¸­

5. **æ·±å…¥åˆ†æ SO é…ç½®**ï¼š
   - æ£€æŸ¥ `Tool_8_Pickaxe_2.asset`ï¼ˆåº”è¯¥æ˜¯ç”Ÿé“é•ï¼‰
   - å‘ç° `materialTier: 0`ï¼ˆWoodï¼‰âŒ
   - **æ‰€æœ‰å·¥å…· SO çš„ materialTier å­—æ®µéƒ½æ˜¯é»˜è®¤å€¼ 0ï¼**

**æ ¹æœ¬åŸå› **:

1. **SO æ–‡ä»¶ materialTier å­—æ®µå…¨éƒ¨ä¸ºé»˜è®¤å€¼**
   - åˆ›å»º SO æ—¶æ²¡æœ‰æ ¹æ®æ–‡ä»¶ååç¼€è®¾ç½® materialTier
   - æ‰€æœ‰é•å­éƒ½è¢«è§†ä¸ºæœ¨é•ï¼Œæ— æ³•é‡‡é›†ä»»ä½•çŸ¿ç‰©

2. **TreeController å®Œå…¨æ²¡æœ‰æ–§å¤´ç­‰çº§åˆ¤å®š**
   - CanAccept() åªæ£€æŸ¥å·¥å…·ç±»å‹æ˜¯å¦ä¸ºæ–§å¤´
   - æ²¡æœ‰è°ƒç”¨ MaterialTierHelper.CanChopTree()
   - æœ¨æ–§å¯ä»¥ç ä»»ä½•æ ‘

**å®Œæˆä»»åŠ¡**:
1. âœ… å…¨é¢åˆ†ææ ‘æœ¨ç³»ç»Ÿä¸ç æ ‘ç³»ç»Ÿå®ç°
2. âœ… å…¨é¢åˆ†æçŸ³å¤´ç³»ç»Ÿä¸æŒ–çŸ¿ç³»ç»Ÿå®ç°
3. âœ… åˆ†æ ToolData SO å‚æ•°è®¾è®¡
4. âœ… å¯¹æ¯”ç æ ‘ä¸æŒ–çŸ¿è·å–å·¥å…·ç­‰çº§çš„æ–¹å¼
5. âœ… è¾“å‡ºè¯¦ç»†é—®é¢˜åˆ†ææŠ¥å‘Š

**è¾“å‡ºæ–‡ä»¶**:
- `Docx/000_ä»»åŠ¡åˆ—è¡¨/1.04å·¥å…·ç³»ç»Ÿé—®é¢˜åˆ†æ.md` - è¯¦ç»†é—®é¢˜åˆ†ææŠ¥å‘Š

**å‘ç°çš„é—®é¢˜**:

| é—®é¢˜ | ä¸¥é‡ç¨‹åº¦ | å½±å“ |
|------|----------|------|
| SO materialTier å…¨ä¸ºé»˜è®¤å€¼ | ğŸ”´ ä¸¥é‡ | æ‰€æœ‰é•å­éƒ½æ˜¯æœ¨é•ï¼Œæ— æ³•é‡‡é›†çŸ¿ç‰© |
| TreeController æ— æ–§å¤´ç­‰çº§åˆ¤å®š | ğŸ”´ ä¸¥é‡ | æœ¨æ–§å¯ä»¥ç ä»»ä½•æ ‘ |
| ä¸¤ç³»ç»Ÿç­‰çº§åˆ¤å®šé€»è¾‘ä¸ç»Ÿä¸€ | ğŸŸ¡ ä¸­ç­‰ | ä»£ç ä¸ä¸€è‡´ï¼Œç»´æŠ¤å›°éš¾ |
| MaterialTierHelper æ–§å¤´æ–¹æ³•æœªä½¿ç”¨ | ğŸŸ¡ ä¸­ç­‰ | ä»£ç å†—ä½™ |
| ä¼¤å®³è®¡ç®—é€»è¾‘ä¸ä¸€è‡´ | ğŸŸ¢ è½»å¾® | é•å­ä¼¤å®³æ²¡æœ‰åŸºäºç­‰çº§ |

**ä¿®å¤å»ºè®®**:

1. **ç´§æ€¥ä¿®å¤**ï¼šæ‰¹é‡ä¿®å¤æ‰€æœ‰å·¥å…· SO çš„ materialTier å­—æ®µ
2. **çŸ­æœŸä¿®å¤**ï¼šä¸º TreeController æ·»åŠ æ–§å¤´ç­‰çº§åˆ¤å®š
3. **é•¿æœŸä¼˜åŒ–**ï¼šåˆ›å»º SO è‡ªåŠ¨åŒ–å·¥å…·ï¼Œç»Ÿä¸€ä¸¤ç³»ç»Ÿé€»è¾‘

**é—ç•™é—®é¢˜**:
- [ ] æ‰¹é‡ä¿®å¤æ‰€æœ‰å·¥å…· SO çš„ materialTier å­—æ®µ
- [ ] ä¸º TreeController æ·»åŠ æ–§å¤´ç­‰çº§åˆ¤å®š
- [ ] ç»Ÿä¸€ä¸¤ä¸ªç³»ç»Ÿçš„ç­‰çº§è·å–é€»è¾‘

---

## å½“å‰çŠ¶æ€æ›´æ–°

- **å®Œæˆåº¦**: 100%ï¼ˆé—®é¢˜åˆ†æå®Œæˆï¼‰
- **æœ€åæ›´æ–°**: 2026-01-04
- **çŠ¶æ€**: é—®é¢˜åˆ†æå®Œæˆï¼Œå¾…ä¿®å¤ SO é…ç½®å’Œ TreeController é€»è¾‘


---

### ä¼šè¯ 10 - 2026-01-04ï¼ˆæ‰¹é‡ä¿®å¤å·¥å…· SO materialTierï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> ç»§ç»­ä¸Šæ¬¡çš„å·¥ä½œï¼Œä¿®å¤å·¥å…·ç³»ç»Ÿé—®é¢˜

**å®Œæˆä»»åŠ¡**:
1. âœ… åˆ›å»º `ToolMaterialTierFixer` ç¼–è¾‘å™¨å·¥å…·
2. âœ… å®ç°æ ¹æ®æ–‡ä»¶ååç¼€è‡ªåŠ¨è§£æææ–™ç­‰çº§
3. âœ… æ‰¹é‡ä¿®å¤æ‰€æœ‰å·¥å…· SO çš„ materialTier å­—æ®µ
4. âœ… ä¿®å¤ WeatherSystem.cs è¯­æ³•é”™è¯¯ï¼ˆå¤šä½™çš„å¤§æ‹¬å·ï¼‰

**ä¿®æ”¹æ–‡ä»¶**:
- `Assets/Editor/ToolMaterialTierFixer.cs` - æ–°å»ºï¼Œæ‰¹é‡ä¿®å¤å·¥å…·
- `Assets/YYY_Scripts/Service/WeatherSystem.cs` - ä¿®å¤è¯­æ³•é”™è¯¯
- `Assets/111_Data/Items/Tools/*.asset` - æ‰¹é‡ä¿®å¤ materialTier å­—æ®µ

**è§£å†³æ–¹æ¡ˆ**:

1. **ç¼–è¾‘å™¨å·¥å…·**ï¼š
   - èœå•ä½ç½®ï¼š`Tools/ğŸ”§ ç«‹å³ä¿®å¤æ‰€æœ‰å·¥å…·ææ–™ç­‰çº§`
   - ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£ææ–‡ä»¶åï¼š`Tool_\d+_\w+_(\d+)$`
   - è‡ªåŠ¨è®¾ç½® materialTier ä¸ºæ–‡ä»¶ååç¼€æ•°å­—

2. **ä¿®å¤ç»“æœéªŒè¯**ï¼š
   - Tool_1_Axe_1: materialTier = 1 (Stone) âœ…
   - Tool_5_Axe_5: materialTier = 5 (Gold) âœ…
   - Tool_8_Pickaxe_2: materialTier = 2 (Iron) âœ…
   - Tool_11_Pickaxe_5: materialTier = 5 (Gold) âœ…

**ä¿®å¤çš„ SO æ–‡ä»¶**:

| æ–‡ä»¶ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| Tool_1_Axe_1 | 0 | 1 |
| Tool_2_Axe_2 | 0 | 2 |
| Tool_3_Axe_3 | 0 | 3 |
| Tool_4_Axe_4 | 0 | 4 |
| Tool_5_Axe_5 | 0 | 5 |
| Tool_7_Pickaxe_1 | 0 | 1 |
| Tool_8_Pickaxe_2 | 0 | 2 |
| Tool_9_Pickaxe_3 | 0 | 3 |
| Tool_10_Pickaxe_4 | 0 | 4 |
| Tool_11_Pickaxe_5 | 0 | 5 |
| Tool_13_Hoe_1 | 0 | 1 |
| Tool_14_Hoe_2 | 0 | 2 |
| Tool_15_Hoe_3 | 0 | 3 |
| Tool_16_Hoe_4 | 0 | 4 |
| Tool_17_Hoe_5 | 0 | 5 |

**é—ç•™é—®é¢˜**:
- [ ] ä¸º TreeController æ·»åŠ æ–§å¤´ç­‰çº§åˆ¤å®šï¼ˆçŸ­æœŸï¼‰
- [ ] åˆ›å»º SO è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆé•¿æœŸï¼‰

---

## å½“å‰çŠ¶æ€æ›´æ–°

- **å®Œæˆåº¦**: 100%ï¼ˆSO ä¿®å¤å®Œæˆï¼‰
- **æœ€åæ›´æ–°**: 2026-01-04
- **çŠ¶æ€**: å·¥å…· SO materialTier å·²å…¨éƒ¨ä¿®å¤ï¼ŒæŒ–çŸ¿ç³»ç»Ÿåº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œ


---

### ä¼šè¯ 11 - 2026-01-04ï¼ˆTreeController æ–§å¤´ç­‰çº§åˆ¤å®šï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> æ ‘æœ¨ä¹Ÿéœ€è¦ç­‰çº§åˆ¤å®šï¼Œç”¨0~5æè¿°æ ‘æœ¨çš„ç­‰çº§ä»¥åŠæ ‘æœ¨çš„é˜¶æ®µï¼š
> - 0æ–§å¤´å¯ä»¥ç åˆ°2æ ‘æœ¨
> - 1æ–§å¤´å¯ä»¥ç åˆ°3æ ‘æœ¨
> - 2æ–§å¤´å¯ä»¥ç åˆ°4æ ‘æœ¨
> - 3æ–§å¤´åŠæ›´é«˜çº§å¯ä»¥ç åˆ°5æ ‘æœ¨
> - ä¼¤å®³å°±æ˜¯SOçš„å‚æ•°ï¼Œä¸éœ€è¦ç¡¬ç¼–ç 

**å®Œæˆä»»åŠ¡**:
1. âœ… æ›´æ–° MaterialTierHelper çš„æ–§å¤´ç­‰çº§åˆ¤å®šé€»è¾‘
2. âœ… æ·»åŠ  GetMaxChoppableTreeStage() æ–¹æ³•
3. âœ… åœ¨ TreeController ä¸­æ·»åŠ  GetAxeTier() æ–¹æ³•
4. âœ… åœ¨ TreeController ä¸­æ·»åŠ  GetTreeStageValue() æ–¹æ³•
5. âœ… ä¿®æ”¹ CanAccept() æ·»åŠ æ–§å¤´ç­‰çº§æ£€æŸ¥
6. âœ… ä¿®æ”¹ OnHit() æ·»åŠ æ–§å¤´ç­‰çº§ä¸è¶³æ—¶çš„åé¦ˆ

**ä¿®æ”¹æ–‡ä»¶**:
- `Assets/YYY_Scripts/Utils/MaterialTierHelper.cs` - æ›´æ–°æ–§å¤´ç­‰çº§åˆ¤å®šé€»è¾‘
- `Assets/YYY_Scripts/Controller/TreeController.cs` - æ·»åŠ æ–§å¤´ç­‰çº§åˆ¤å®š

**è§£å†³æ–¹æ¡ˆ**:

1. **æ–°çš„æ–§å¤´ç­‰çº§åˆ¤å®šè§„åˆ™**ï¼š

| æ–§å¤´ç­‰çº§ | å¯ç ä¼æ ‘æœ¨é˜¶æ®µ |
|---------|---------------|
| 0 (æœ¨æ–§) | 0-2 |
| 1 (çŸ³æ–§) | 0-3 |
| 2 (ç”Ÿé“æ–§) | 0-4 |
| 3+ (é»„é“œæ–§åŠä»¥ä¸Š) | 0-5 (å…¨éƒ¨) |

2. **TreeController ä¿®æ”¹**ï¼š
   - æ·»åŠ  `GetAxeTier()` ä» ToolData è·å–æ–§å¤´ææ–™ç­‰çº§
   - æ·»åŠ  `GetTreeStageValue()` è·å–å½“å‰æ ‘æœ¨é˜¶æ®µå€¼
   - åœ¨ `CanAccept()` ä¸­è°ƒç”¨ `MaterialTierHelper.CanChopTree()`
   - åœ¨ `OnHit()` ä¸­åŒºåˆ†"æ–§å¤´ç­‰çº§ä¸è¶³"å’Œ"éæ–§å¤´å·¥å…·"ä¸¤ç§æƒ…å†µ

3. **ä¼¤å®³è®¡ç®—**ï¼š
   - ä¼¤å®³ç›´æ¥ä½¿ç”¨ `ctx.baseDamage`ï¼Œç”± SO é…ç½®å†³å®š
   - ä¸åœ¨ç æ ‘ç³»ç»Ÿå†…ç¡¬ç¼–ç ä¼¤å®³å€¼

**æ–°å¢æ–¹æ³•**:

| æ–¹æ³• | ä½ç½® | è¯´æ˜ |
|------|------|------|
| GetMaxChoppableTreeStage() | MaterialTierHelper | è·å–æ–§å¤´èƒ½ç çš„æœ€å¤§æ ‘æœ¨é˜¶æ®µ |
| GetAxeTier() | TreeController | ä» ToolData è·å–æ–§å¤´ç­‰çº§ |
| GetTreeStageValue() | TreeController | è·å–å½“å‰æ ‘æœ¨é˜¶æ®µå€¼ |

**é—ç•™é—®é¢˜**:
- [ ] å¯é€‰ï¼šæ·»åŠ æ–§å¤´ç­‰çº§ä¸è¶³æ—¶çš„éŸ³æ•ˆåé¦ˆ
- [ ] å¯é€‰ï¼šæ·»åŠ  UI æç¤º"éœ€è¦æ›´é«˜çº§çš„æ–§å¤´"

---

## å½“å‰çŠ¶æ€æ›´æ–°

- **å®Œæˆåº¦**: 100%ï¼ˆå·¥å…·ç³»ç»Ÿä¿®å¤å®Œæˆï¼‰
- **æœ€åæ›´æ–°**: 2026-01-04
- **çŠ¶æ€**: å·¥å…· SO materialTier å·²ä¿®å¤ï¼ŒTreeController æ–§å¤´ç­‰çº§åˆ¤å®šå·²æ·»åŠ 


---

### ä¼šè¯ 12 - 2026-01-04ï¼ˆçŸ³å¤´ç³»ç»Ÿå‚æ•°è°ƒæ•´ï¼‰

**ç”¨æˆ·éœ€æ±‚**:
> M3é˜¶æ®µçš„çŸ³æ–™æ€»é‡æ”¹ä¸º2ï¼Œä¸M4ä¸€è‡´ï¼›M3ä¸­ä¸å«æœ‰çŸ¿ç‰©çš„é‚£ä¸€ä¸ªæŒ‡æ•°çš„çŸ³å¤´ä¸M4è¡€é‡ä¸€è‡´ï¼Œå‡ä¸º4

**å®Œæˆä»»åŠ¡**:
1. âœ… ä¿®æ”¹ M3 é˜¶æ®µçŸ³æ–™æ€»é‡ä» 4 æ”¹ä¸º 2ï¼ˆä¸ M4 ä¸€è‡´ï¼‰
2. âœ… ä¿®æ”¹ M3 é˜¶æ®µ oreIndex=0ï¼ˆæ— çŸ¿ç‰©ï¼‰æ—¶è¡€é‡ä¸º 4ï¼ˆä¸ M4 ä¸€è‡´ï¼‰
3. âœ… æ›´æ–° StoneStageConfig å·¥å‚æ–¹æ³•æ³¨é‡Š
4. âœ… æ›´æ–° StoneDropConfig çŸ³æ–™æ€»é‡é…ç½®
5. âœ… æ›´æ–° StoneController é»˜è®¤é…ç½®å’Œ InitializeHealth æ–¹æ³•
6. âœ… è§¦å‘ Unity é‡æ–°ç¼–è¯‘ï¼Œç¡®ä¿ Inspector å‚æ•°åŒæ­¥

**ä¿®æ”¹æ–‡ä»¶**:
- `Assets/YYY_Scripts/Data/StoneStageConfig.cs` - M3 çŸ³æ–™æ€»é‡æ”¹ä¸º 2ï¼Œæ›´æ–°æ³¨é‡Š
- `Assets/YYY_Scripts/Data/StoneDropConfig.cs` - StoneTotals æ•°ç»„ M3 æ”¹ä¸º 2
- `Assets/YYY_Scripts/Controller/StoneController.cs` - é»˜è®¤é…ç½®å’Œ InitializeHealth é€»è¾‘
- `Assets/Editor/StoneControllerEditor.cs` - æ›´æ–°çŠ¶æ€é¢„è§ˆé€»è¾‘å’Œé»˜è®¤é…ç½®

**è§£å†³æ–¹æ¡ˆ**:

1. **M3 çŸ³æ–™æ€»é‡è°ƒæ•´**ï¼š
   - ä¹‹å‰ï¼š`stoneTotalCount = 4`
   - ç°åœ¨ï¼š`stoneTotalCount = 2`ï¼ˆä¸ M4 ä¸€è‡´ï¼‰

2. **M3 æ— çŸ¿ç‰©è¡€é‡ç‰¹æ®Šå¤„ç†**ï¼š
   - åœ¨ `InitializeHealth()` æ–¹æ³•ä¸­æ·»åŠ åˆ¤æ–­
   - å½“ `currentStage == StoneStage.M3 && oreIndex == 0` æ—¶ï¼Œè¡€é‡è®¾ä¸º 4
   - å…¶ä»–æƒ…å†µä½¿ç”¨é…ç½®çš„é»˜è®¤è¡€é‡ 9

3. **ç¼–è¾‘å™¨çŠ¶æ€é¢„è§ˆåŒæ­¥**ï¼š
   - æ›´æ–° `DefaultStoneTotalCount` æ•°ç»„ï¼šM3 ä» 4 æ”¹ä¸º 2
   - æ›´æ–° `GetStoneTotal()` æ–¹æ³•ï¼šM3 è¿”å› 2
   - æ·»åŠ  `GetExpectedHealth()` æ–¹æ³•ï¼šå¤„ç† M3 + oreIndex=0 çš„ç‰¹æ®Šè¡€é‡

**æ›´æ–°åçš„é…ç½®è¡¨**:

| é˜¶æ®µ | è¡€é‡ | çŸ³æ–™æ€»é‡ | å¤‡æ³¨ |
|------|------|---------|------|
| M1 | 36 | 12 | - |
| M2 | 17 | 6 | - |
| M3 | 9* | 2 | *oreIndex=0 æ—¶è¡€é‡ä¸º 4 |
| M4 | 4 | 2 | è£…é¥°çŸ³å¤´ |

**å…³é”®ä»£ç **:
```csharp
private void InitializeHealth()
{
    var config = CurrentStageConfig;
    if (config != null)
    {
        // M3 é˜¶æ®µä¸”æ— çŸ¿ç‰©ï¼ˆoreIndex=0ï¼‰æ—¶ï¼Œè¡€é‡ä¸ M4 ä¸€è‡´ï¼ˆ4ï¼‰
        if (currentStage == StoneStage.M3 && oreIndex == 0)
        {
            currentHealth = 4;
        }
        else
        {
            currentHealth = config.health;
        }
    }
}
```

**é—ç•™é—®é¢˜**:
- æ— 

---

## å½“å‰çŠ¶æ€æ›´æ–°

- **å®Œæˆåº¦**: 100%ï¼ˆå‚æ•°è°ƒæ•´å®Œæˆï¼‰
- **æœ€åæ›´æ–°**: 2026-01-04
- **çŠ¶æ€**: çŸ³å¤´ç³»ç»Ÿå‚æ•°å·²è°ƒæ•´ï¼ŒM3 ä¸ M4 çŸ³æ–™æ€»é‡ç»Ÿä¸€ä¸º 2ï¼ŒM3 æ— çŸ¿ç‰©è¡€é‡ä¸ M4 ä¸€è‡´

