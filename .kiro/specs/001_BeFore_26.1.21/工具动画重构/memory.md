# å·¥å…·åŠ¨ç”»ç³»ç»Ÿé‡æ„ - å¼€å‘è®°å¿†

## æ¨¡å—æ¦‚è¿°

å·¥å…·åŠ¨ç”»ç³»ç»Ÿé‡æ„ï¼Œè§£å†³ä»¥ä¸‹é—®é¢˜ï¼š
- ç‰©å“ ID ä¸º -1 æ—¶çš„æŠ¥é”™å¤„ç†
- ç‰©å“ SO åŸºç¡€å±æ€§é‡æ–°è§„åˆ’ï¼ˆå“è´¨å±æ€§ï¼‰
- å·¥å…·åŠ¨ç”»ç³»ç»Ÿç®€åŒ–å’Œç»Ÿä¸€
- åŠ¨ç”»æ§åˆ¶å™¨è¿çº¿é—®é¢˜
- åŠ¨ç”»ç”Ÿæˆå·¥å…·å‘½åé—®é¢˜
- ç²¾åŠ›ç³»ç»Ÿå®ç°
- å·¥å…·åŠ¨ç”»å›¾å±‚ç»Ÿä¸€åœ¨ç©å®¶ä¸Šå±‚

## å½“å‰çŠ¶æ€

- **å®Œæˆåº¦**: 75%
- **æœ€åæ›´æ–°**: 2025-12-22
- **çŠ¶æ€**: ğŸš§ è¿›è¡Œä¸­

## æ ¸å¿ƒè®¾è®¡

### åŠ¨ç”»çŠ¶æ€åæ ¼å¼
```
{ActionType}_{Direction}_Clip_{itemID}
ä¾‹å¦‚ï¼šSlice_Down_Clip_0
```

### å“è´¨å±æ€§è§„åˆ’
- **æœ‰ baseQuality**: CropData, FoodData, PotionData
- **æ—  baseQuality**: ToolData, WeaponData, SeedData

### åŠ¨ç”»æ§åˆ¶å™¨è§„èŒƒ
- åªä½¿ç”¨ Any State â†’ çŠ¶æ€ è½¬æ¢
- ä¸åˆ›å»ºçŠ¶æ€é—´è½¬æ¢
- å‚æ•°ï¼šState, Direction, ToolItemId

### ç²¾åŠ›ç³»ç»Ÿ
- æœ€å¤§ç²¾åŠ›å€¼ï¼š150 ç‚¹
- å·¥å…·æ“ä½œæˆåŠŸæ—¶æ¶ˆè€—ç²¾åŠ›
- æ­¦å™¨ä¸æ¶ˆè€—ç²¾åŠ›

### å·¥å…·å›¾å±‚é¡ºåº
- **æ‰€æœ‰å·¥å…·åŠ¨ç”»éƒ½æ˜¾ç¤ºåœ¨ç©å®¶ä¸Šå±‚**
- sortingOrder = playerSpriteRenderer.sortingOrder + 1
- ä¸å†åŒºåˆ† Crush+Side ç­‰ç‰¹æ®ŠçŠ¶æ€

## ä¼šè¯è®°å½•

### ä¼šè¯ 1 - 2025-12-22

**ç”¨æˆ·éœ€æ±‚**:
> è¯·ä½ å’Œæˆ‘ä¸€èµ·å¼€å§‹.kiro\specs\tool-animation-system-refactorå·¥ä½œåŒºçš„åç»­å·¥ä½œç°åœ¨æˆ‘è¦æ±‚æ‰€æœ‰çš„åŠ¨ç”»éƒ½æ˜¯toolåœ¨Playerçš„ä¸Šå±‚ï¼Œè¯·ä½ ä¿®æ”¹åŠ¨æ€åŒæ­¥çš„è„šæœ¬æ¥æ»¡è¶³è¿™ä¸€éœ€æ±‚

**å®Œæˆä»»åŠ¡**:
1. æ›´æ–°éœ€æ±‚æ–‡æ¡£ï¼Œæ·»åŠ éœ€æ±‚ 10ï¼šå·¥å…·åŠ¨ç”»å›¾å±‚ç»Ÿä¸€åœ¨ç©å®¶ä¸Šå±‚
2. æ›´æ–°è®¾è®¡æ–‡æ¡£ï¼Œæ·»åŠ å±æ€§ 10ï¼šå·¥å…·å›¾å±‚é¡ºåºæ­£ç¡®æ€§
3. ä¿®æ”¹ LayerAnimSync.UpdateToolVisibility() æ–¹æ³•
   - å°† sortingOrder ä» -1 æ”¹ä¸º +1
   - ç§»é™¤ Crush+Side ç‰¹æ®Šå¤„ç†é€»è¾‘
   - ç§»é™¤ crushSideToolBelowPlayer é…ç½®å­—æ®µ

**ä¿®æ”¹æ–‡ä»¶**:
- `.kiro/specs/tool-animation-system-refactor/requirements.md` - æ·»åŠ éœ€æ±‚ 10
- `.kiro/specs/tool-animation-system-refactor/design.md` - æ·»åŠ å±æ€§ 10
- `.kiro/specs/tool-animation-system-refactor/tasks.md` - æ·»åŠ ä»»åŠ¡ 14
- `Assets/Scripts/Anim/_...._/LayerAnimSync.cs` - ç®€åŒ– UpdateToolVisibility() æ–¹æ³•

**è§£å†³æ–¹æ¡ˆ**:
åŸæ¥çš„å®ç°ä¸­ï¼Œå·¥å…·é»˜è®¤åœ¨ç©å®¶ä¸‹å±‚ï¼ˆsortingOrder - 1ï¼‰ï¼Œåªæœ‰ Crush+Side çŠ¶æ€å¯ä»¥é…ç½®åœ¨ä¸Šå±‚ã€‚
ä¿®æ”¹åï¼Œæ‰€æœ‰å·¥å…·åŠ¨ç”»ç»Ÿä¸€åœ¨ç©å®¶ä¸Šå±‚ï¼ˆsortingOrder + 1ï¼‰ï¼Œç§»é™¤äº†ç‰¹æ®ŠçŠ¶æ€çš„åˆ¤æ–­é€»è¾‘ï¼Œä»£ç æ›´ç®€æ´ã€‚

**é—ç•™é—®é¢˜**:
- [ ] åœºæ™¯ä¸­é…ç½® EnergySystem ç»„ä»¶ï¼ˆéœ€è¦ç”¨æˆ·æ‰‹åŠ¨é…ç½®ï¼‰
- [ ] æ›´æ–°ç°æœ‰ ToolData SO é…ç½®ï¼ˆéœ€è¦ç”¨æˆ·æ‰‹åŠ¨é…ç½®ï¼‰

---

## å…³é”®å†³ç­–

| å†³ç­– | åŸå›  | æ—¥æœŸ |
|------|------|------|
| itemId=-1 é™é»˜å¤„ç† | é¿å…æ§åˆ¶å°è¢«ä¸å¿…è¦è­¦å‘Šæ·¹æ²¡ | 2025-12-17 |
| åªæœ‰å†œä½œç‰©/é£Ÿç‰©/è¯å“æœ‰å“è´¨ | å‡†ç¡®åæ˜ æ¸¸æˆæœºåˆ¶ | 2025-12-17 |
| ä½¿ç”¨ itemID åŒ¹é…åŠ¨ç”» | ç®€åŒ–é…ç½®ï¼Œç»Ÿä¸€è§„èŒƒ | 2025-12-17 |
| åªç”¨ Any State è½¬æ¢ | æ§åˆ¶å™¨å›¾è¡¨æ¸…æ™°ï¼Œåˆ‡æ¢ç”±ä»£ç å¤„ç† | 2025-12-17 |
| æ­¦å™¨ä¸æ¶ˆè€—ç²¾åŠ› | æˆ˜æ–—ä½“éªŒæ›´æµç•… | 2025-12-17 |
| å·¥å…·ç»Ÿä¸€åœ¨ç©å®¶ä¸Šå±‚ | è§†è§‰æ•ˆæœæ›´çªå‡ºå’Œä¸€è‡´ | 2025-12-22 |

## ç›¸å…³æ–‡ä»¶

### è§„åˆ’æ–‡æ¡£
| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.kiro/specs/tool-animation-system-refactor/requirements.md` | éœ€æ±‚æ–‡æ¡£ |
| `.kiro/specs/tool-animation-system-refactor/design.md` | è®¾è®¡æ–‡æ¡£ |
| `.kiro/specs/tool-animation-system-refactor/tasks.md` | ä»»åŠ¡æ¸…å• |

### æ ¸å¿ƒä»£ç 
| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `Assets/Scripts/Data/Items/ToolData.cs` | å·¥å…·æ•°æ® |
| `Assets/Scripts/Data/Items/WeaponData.cs` | æ­¦å™¨æ•°æ® |
| `Assets/Scripts/Anim/Player/PlayerToolController.cs` | å·¥å…·æ§åˆ¶å™¨ |
| `Assets/Scripts/Anim/_...._/LayerAnimSync.cs` | å›¾å±‚åŠ¨ç”»åŒæ­¥ |
| `Assets/Editor/ToolAnimationGeneratorTool.cs` | åŠ¨ç”»ç”Ÿæˆå·¥å…· |
