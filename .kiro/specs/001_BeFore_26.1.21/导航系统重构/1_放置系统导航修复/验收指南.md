# 验收指南：放置系统导航修复

## 功能验收清单

### 基础放置功能

- [ ] 选中可放置物品（如树苗）进入放置模式
- [ ] 预览格子正常显示并跟随鼠标
- [ ] 点击有效位置后预览锁定

### 导航放置测试（核心验收项）

- [ ] **从左侧水平接近**：玩家从预览格子左侧水平移动，到达后正确触发放置
- [ ] **从右侧水平接近**：玩家从预览格子右侧水平移动，到达后正确触发放置
- [ ] **从上方垂直接近**：玩家从预览格子上方垂直移动，到达后正确触发放置
- [ ] **从下方垂直接近**：玩家从预览格子下方垂直移动，到达后正确触发放置
- [ ] **从对角线接近**：玩家从预览格子对角线方向移动，到达后正确触发放置

### 边界情况

- [ ] 玩家已在预览格子附近时，点击后直接放置（无需导航）
- [ ] 导航过程中按 ESC 或右键取消，恢复到预览跟随状态
- [ ] 导航超时（10秒）后自动取消

## 测试步骤

### 测试 1：水平移动放置

1. 选中树苗进入放置模式
2. 将预览格子放在玩家正左方（水平距离约 3-5 格）
3. 点击锁定位置
4. 观察玩家水平移动到预览格子旁边
5. **预期结果**：玩家到达后自动放置树苗

### 测试 2：垂直移动放置

1. 选中树苗进入放置模式
2. 将预览格子放在玩家正上方或正下方
3. 点击锁定位置
4. 观察玩家垂直移动到预览格子旁边
5. **预期结果**：玩家到达后自动放置树苗

### 测试 3：对角线移动放置

1. 选中树苗进入放置模式
2. 将预览格子放在玩家对角线方向
3. 点击锁定位置
4. 观察玩家移动到预览格子旁边
5. **预期结果**：玩家到达后自动放置树苗

## 已知限制

- triggerDistance 默认为 0.5f，可在 PlacementNavigator 组件上调整
- 导航超时时间为 10 秒

## 修改文件

- `Assets/YYY_Scripts/Service/Placement/PlacementNavigator.cs`

## 技术变更摘要

1. **CalculateNavigationTarget()**: 改为返回预览格子边缘的最近点（不再向外偏移）
2. **CheckReached()**: 改为使用 ClosestPoint 计算玩家中心到预览格子边缘的距离
3. **IsAlreadyNearTarget()**: 同样改为 ClosestPoint 方式
4. **移除 allowOverlapTrigger**: 简化逻辑，统一使用距离阈值判断
