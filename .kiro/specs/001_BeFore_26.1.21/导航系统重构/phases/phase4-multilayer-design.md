# ç¬¬å››é˜¶æ®µï¼šç»´åº¦æå‡ - å¤šå±‚çº§æ”¯æŒ

## é˜¶æ®µç›®æ ‡

å¼•å…¥ Elevation/Layer æ¦‚å¿µåˆ°å¯¼èˆªç³»ç»Ÿï¼Œæ”¯æŒ 2.5D ç«‹ä½“ç»“æ„ã€‚

## éªŒæ”¶çŠ¶æ€ï¼šâ³ å¾…å¼€å§‹

## Code Reaper çš„é›·åŒºé¢„è­¦

### ğŸ’£ å¤šå±‚çº§æ”¯æŒçš„é™·é˜±

**é—®é¢˜æè¿°**ï¼š
- ç‹¬ç«‹çš„ç½‘æ ¼å¥½åšï¼Œç½‘æ ¼ä¹‹é—´çš„è¿æ¥ï¼ˆLinksï¼‰æ‰æ˜¯åœ°ç‹±
- å½“ A* å¯»è·¯è·¨è¶Šå±‚çº§æ—¶ï¼Œå¯å‘å‡½æ•°ï¼ˆHeuristicï¼‰æ€ä¹ˆç®—ï¼Ÿ
- å¦‚æœåœ¨æ¥¼æ¢¯å£ï¼ˆè¿æ¥ç‚¹ï¼‰å µäº†ä¸€åªæ€ªï¼Œå¯»è·¯ç®—æ³•çŸ¥é“"æ¥¼æ¢¯å µäº†"å—ï¼Ÿ

**Code Reaper çš„å»ºè®®**ï¼š
> "ä¸è¦è¯•å›¾ä¸€å¼€å§‹å°±åšä¸€ä¸ªé€šç”¨çš„ 3D å¯»è·¯ã€‚è€è€å®å®åš Graph Linksï¼ˆå›¾è¿æ¥ï¼‰ã€‚Layer 1 å’Œ Layer 2 æ˜¯ä¸¤å¼ å›¾ï¼Œæ¥¼æ¢¯åªæ˜¯è¿æ¥è¿™ä¸¤ä¸ªå›¾çš„ä¸€æ¡ç‰¹æ®Šè¾¹ï¼ˆEdgeï¼‰ã€‚"

### è®¾è®¡è¦ç‚¹

1. **å¤šå±‚çº§ä¸æ˜¯ç®€å•çš„"å¤šä¸ªç½‘æ ¼"**
   - è€Œæ˜¯"å¤šä¸ªå›¾ + è¿æ¥è¾¹"

2. **è·¨å±‚çº§å¯»è·¯éœ€è¦ç‰¹æ®Šçš„å¯å‘å‡½æ•°**
   - ä¸èƒ½ç”¨ç®€å•çš„æ¬§å‡ é‡Œå¾—è·ç¦»

3. **è¿æ¥ç‚¹ï¼ˆæ¥¼æ¢¯ï¼‰éœ€è¦åŠ¨æ€æ£€æµ‹**
   - æ˜¯å¦å¯ç”¨ï¼ˆæ˜¯å¦è¢«å µï¼‰

4. **è¿™æ˜¯æœ€éš¾çš„éƒ¨åˆ†**
   - åº”è¯¥æ”¾åœ¨æœ€ååš

## é¢„æœŸå®ç°æ–¹æ¡ˆ

### æ•°æ®ç»“æ„

```csharp
// å¯»è·¯èŠ‚ç‚¹ä¸å†æ˜¯ Node(x, y)
// è€Œåº”è¯¥æ˜¯ Node(x, y, elevation)
public struct NavNode
{
    public int x;
    public int y;
    public int layer; // å±‚çº§
}

// æˆ–è€…ä½¿ç”¨å¤šä¸ª NavGrid å±‚
public class MultiLayerNavGrid
{
    private NavGrid2D[] layers;
    private List<LayerLink> links; // å±‚çº§è¿æ¥ç‚¹
}
```

### å±‚çº§è¿æ¥

```csharp
public struct LayerLink
{
    public NavNode from;
    public NavNode to;
    public float cost; // é€šè¿‡æˆæœ¬
    public bool IsBlocked(); // åŠ¨æ€æ£€æµ‹æ˜¯å¦è¢«å µ
}
```

## éªŒæ”¶æ ‡å‡†

- [ ] æ”¯æŒå¤šå±‚çº§ç½‘æ ¼
- [ ] è·¨å±‚çº§å¯»è·¯æ­£ç¡®
- [ ] è¿æ¥ç‚¹åŠ¨æ€æ£€æµ‹
- [ ] å¯å‘å‡½æ•°æ­£ç¡®å¤„ç†å±‚çº§

## ç›¸å…³æ–‡ä»¶

- `Assets/YYY_Scripts/Service/Navigation/NavGrid2D.cs`ï¼ˆå¾…ä¿®æ”¹ï¼‰
