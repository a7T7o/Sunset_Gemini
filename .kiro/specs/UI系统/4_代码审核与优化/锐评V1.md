ï¼ˆä»…ç»™ä½ çœ‹çš„å†…å®¹ï¼‰

æ”¶åˆ°ï¼Œæˆ‘å·²ç»æ‹¿åˆ°äº†æœ€åä¸€å—æ‹¼å›¾ ChestController.csã€‚ä½ çš„æç¤ºéå¸¸åˆ°ä½ï¼Œä½œä¸ºâ€œé”è¯„ä¸“å®¶â€ï¼Œæˆ‘å¿…é¡»ä¸¥å®ˆâ€œå…ˆåˆ†æåè¾“å‡ºâ€çš„åŸåˆ™ã€‚

å½“å‰å·²çŸ¥æ¡ä»¶åˆ†æï¼š

InventoryInteractionManager (Manager):

æŒæœ‰ dropCooldown (é»˜è®¤ 5f) å’Œ ctrlPickupRateã€‚
DropItem æ–¹æ³•ç›®å‰ç¡¬ç¼–ç æŸ¥æ‰¾ PlayerControllerï¼Œä¸”æ²¡æœ‰æš´éœ²ç»™å¤–éƒ¨è°ƒç”¨ï¼ˆæ˜¯ private çš„ï¼‰ã€‚
åªå¤„ç†èƒŒåŒ… (InventoryService) å’Œè£…å¤‡ (EquipmentService) çš„äº¤äº’ã€‚
InventorySlotInteraction:

åœ¨ HandleChestSlotModifierClick ä¸­ç›´æ¥è°ƒç”¨ SlotDragContext.Beginï¼Œå®Œå…¨ç»•è¿‡ Managerã€‚
DropItemFromContext ä¸­æŸ¥æ‰¾ PlayerController å¹¶ç¡¬ç¼–ç äº† 5f å†·å´ã€‚
IsOverTrashCan å’Œ IsInsidePanel ä¸­åŒ…å«å¤§é‡ FindFirstObjectByType è°ƒç”¨ã€‚
SlotDragContext:

é™æ€ç±»ï¼Œåªè´Ÿè´£çŠ¶æ€è®°å½•ï¼Œæ²¡æœ‰ä»»ä½•äº’æ–¥é€»è¾‘ã€‚
BoxPanelUI:

DropItemFromContext é‡å¤å®ç°äº†ä¸¢å¼ƒé€»è¾‘ï¼Œç¡¬ç¼–ç  5f å†·å´ã€‚
_hasLoggedBindFailure æ˜¯é™æ€å­—æ®µã€‚
WorldItemPool:

SpawnById é»˜è®¤ setSpawnCooldown = true (1ç§’)ã€‚è¿™æ˜¯æœ€å¤§çš„éšæ‚£ï¼Œå¦‚æœä¸ä¼  falseï¼Œä»»ä½•ä¸¢å¼ƒé€»è¾‘éƒ½ä¼šè¢«å¼ºåˆ¶åŠ ä¸Š 1ç§’ ç”Ÿæˆå†·å´ï¼Œå¯¼è‡´ DropCooldown (5ç§’) å¤±æ•ˆã€‚
ChestController:

OpenBoxUI æ–¹æ³•ä¸­ï¼š
csharp

var packageTabs = FindFirstObjectByType<PackagePanelTabsUI>(FindObjectsInactive.Include);
var canvas = FindFirstObjectByType<Canvas>();
è¿™é‡Œå­˜åœ¨ä¸¤ä¸ª Find è°ƒç”¨ï¼Œä¸”æ²¡æœ‰ç¼“å­˜ã€‚ç‰¹åˆ«æ˜¯ FindFirstObjectByType<Canvas>() åœ¨å¤š Canvas åœºæ™¯ä¸‹ï¼ˆå¦‚ World Canvas vs UI Canvasï¼‰æä¸å®‰å…¨ï¼Œå¯èƒ½æ‰¾åˆ°é”™è¯¯çš„ Canvasã€‚
åˆ¤æ–­ä¾æ®ä¸å†³ç­–ï¼š

äº’æ–¥é”ï¼šå¿…é¡»åœ¨ SlotDragContext.Begin å’Œ Manager çš„å…¥å£å¤„ï¼ˆBeginDrag, Shift, Ctrlï¼‰åŠ åŒå‘æ£€æŸ¥ã€‚
ä¸¢å¼ƒé€»è¾‘ï¼šå¿…é¡»æå– ItemDropHelperï¼Œä¸”å¿…é¡»æ˜¾å¼ä¼ é€’ setSpawnCooldown: false ç»™ WorldItemPoolã€‚
æ€§èƒ½ä¼˜åŒ–ï¼šChestController ä¸­çš„ packageTabs åº”è¯¥æ”¹ä¸ºå•ä¾‹è®¿é—®ï¼ˆå¦‚æœ PackagePanelTabsUI æœ‰å•ä¾‹ï¼‰ï¼Œæˆ–è€…åœ¨ Start ä¸­ç¼“å­˜ã€‚Canvas çš„æŸ¥æ‰¾åº”è¯¥æ›´å…·ä½“ï¼Œæˆ–è€…ç›´æ¥ä¾èµ– PackagePanelTabsUI çš„å±‚çº§ç»“æ„ã€‚é‰´äº PackagePanelTabsUI é€šå¸¸æ˜¯æ ¸å¿ƒ UI ç®¡ç†å™¨ï¼Œå®ƒåº”è¯¥æœ‰å•ä¾‹ Instanceã€‚å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬åº”è¯¥å»ºè®®æ·»åŠ ï¼Œæˆ–è€…ä½¿ç”¨ tag æŸ¥æ‰¾ã€‚ä½†åœ¨ä¸ä¿®æ”¹ PackagePanelTabsUI ä»£ç çš„å‰æä¸‹ï¼Œç¼“å­˜æ˜¯æœ€ä½³é€‰æ‹©ã€‚
ç¼“å­˜ç­–ç•¥ï¼šInventorySlotInteraction éœ€è¦æ‡’åŠ è½½ç¼“å­˜ InventoryService, EquipmentService, InventoryInteractionManagerã€‚
ä»»åŠ¡è§„åˆ’è°ƒæ•´ï¼š
æˆ‘å°†æ›´æ–° design.md å’Œ tasks.mdï¼Œé‡ç‚¹åŠ å…¥ ItemDropHelper çš„è¯¦ç»†å®ç°è§„èŒƒï¼ˆè¿™æ˜¯é˜²æ­¢ WorldItemPool å‚æ•°é™·é˜±çš„å…³é”®ï¼‰ï¼Œä»¥åŠ ChestController çš„ç¼“å­˜ä¼˜åŒ–ä»»åŠ¡ã€‚

ï¼ˆè¯·å¤åˆ¶ä»¥ä¸‹å†…å®¹å‘é€ç»™ç”¨æˆ·ï¼‰

ğŸ¯ UI äº¤äº’ç³»ç»Ÿä»£ç å®¡æ ¸ä¸ä¼˜åŒ– - ç»ˆææ–¹æ¡ˆ (Choice A)
åˆ›å»ºæ—¥æœŸ: 2026-01-21
æ–‡æ¡£ç‰ˆæœ¬: 2.1 (Chest-Aware Version)
åŸºäºä»£ç : InventoryInteractionManager, InventorySlotInteraction, SlotDragContext, BoxPanelUI, WorldItemPool, ChestController

ğŸ’€ æ ¸å¿ƒä»£ç å®¡è®¡ç»“è®º (Code Audit)
ç»è¿‡å¯¹æ‰€æœ‰å…³é”®æ–‡ä»¶çš„æ·±åº¦å®¡æŸ¥ï¼Œæˆ‘å‘ç°äº†ä»¥ä¸‹å†³å®šæ€§é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¦‚æœä¸è§£å†³ï¼Œä»»ä½•ä¼˜åŒ–éƒ½æ˜¯æµ®äº‘ï¼š

WorldItemPool å‚æ•°é™·é˜± (è‡´å‘½)ï¼š
SpawnById çš„ç­¾åæ˜¯ (..., bool setSpawnCooldown = true)ã€‚é»˜è®¤å€¼ä¸º true ä¼šå¼ºåˆ¶èµ‹äºˆæ‰è½ç‰© 1 ç§’çš„ç”Ÿæˆå†·å´ã€‚

åæœï¼šå¦‚æœä½ åœ¨ä¸¢å¼ƒé€»è¾‘ä¸­è°ƒç”¨å®ƒè€Œä¸ä¼  falseï¼Œç‰©å“è½åœ°åä¼šå…ˆè¿›å…¥ 1 ç§’å†·å´ï¼Œè¿™ä¼šè¦†ç›–æ‰æˆ‘ä»¬æœŸæœ›çš„ 5 ç§’ä¸¢å¼ƒå†·å´ï¼ˆDropCooldownï¼‰ã€‚
ä¿®æ­£ï¼šItemDropHelper å¿…é¡»æ˜¾å¼ä¼ é€’ setSpawnCooldown: falseã€‚
ChestController çš„ Find éšæ‚£ (é«˜å±)ï¼š
OpenBoxUI ä¸­ç›´æ¥è°ƒç”¨ FindFirstObjectByType<Canvas>()ã€‚

åæœï¼šåœ¨æ‹¥æœ‰å¤šä¸ª Canvasï¼ˆå¦‚ World Space Canvas å’Œ Screen Space Canvasï¼‰çš„åœºæ™¯ä¸­ï¼Œè¿™æå¯èƒ½æ‰¾åˆ°é”™è¯¯çš„ Canvasï¼Œå¯¼è‡´ UI ç”Ÿæˆåœ¨é”™è¯¯çš„ä½ç½®æˆ–å±‚çº§ã€‚
ä¿®æ­£ï¼šä¼˜å…ˆä½¿ç”¨ PackagePanelTabsUI.Instanceï¼ˆå¦‚æœå­˜åœ¨ï¼‰æˆ–ç¼“å­˜ç‰¹å®šçš„ MainCanvas å¼•ç”¨ã€‚
SlotDragContext çš„æ— è§†è¡Œä¸º (æ¶æ„)ï¼š
InventorySlotInteraction åœ¨å¤„ç†ç®±å­æ§½ä½æ—¶ï¼Œç›´æ¥è°ƒç”¨ SlotDragContext.Beginï¼Œå®Œå…¨æ— è§† InventoryInteractionManager æ˜¯å¦æ­£åœ¨æŒæœ‰ç‰©å“ã€‚

åæœï¼šç©å®¶å¯ä»¥åŒæ—¶å¤„äº "Manager Holding" å’Œ "Context Dragging" çŠ¶æ€ï¼Œå¯¼è‡´é€»è¾‘å´©æºƒã€‚
ä¿®æ­£ï¼šåŒå‘äº’æ–¥é”ã€‚
ğŸ“˜ Design 2.1: æ¶æ„ä¸å®ç°ç»†èŠ‚
1. ç»ˆæä¸¢å¼ƒè¾…åŠ©ç±» (ItemDropHelper)
è¿™æ˜¯æœ¬æ¬¡ä¼˜åŒ–çš„æ ¸å¿ƒï¼Œå¿…é¡»å®ç°é›¶ GCã€é˜²ç©ºå¼•ç”¨ã€ç»Ÿä¸€å†·å´ã€‚

csharp

// Assets/YYY_Scripts/UI/Utility/ItemDropHelper.cs

using UnityEngine;
using FarmGame.World; // å¼•ç”¨ WorldItemPool

namespace FarmGame.UI.Utility
{
    /// <summary>
    /// ç‰©å“ä¸¢å¼ƒè¾…åŠ©ç±» (Final Version)
    /// èŒè´£ï¼šç»Ÿä¸€å¤„ç†æ‰€æœ‰ä¸¢å¼ƒé€»è¾‘ï¼Œç¡®ä¿å†·å´æ—¶é—´ä¸€è‡´ï¼Œé˜²æ­¢ç©ºå¼•ç”¨é”™è¯¯
    /// </summary>
    public static class ItemDropHelper
    {
        // ç¼“å­˜ PlayerControllerï¼Œé¿å…æ¯æ¬¡ä¸¢å¼ƒéƒ½ Find
        // æ³¨æ„ï¼šåœºæ™¯åˆ‡æ¢æ—¶ Player ä¼šé”€æ¯ï¼Œå¿…é¡»å¤„ç†å¼•ç”¨å¤±æ•ˆ
        private static PlayerController _cachedPlayer;

        /// <summary>
        /// åœ¨ç©å®¶ä½ç½®ä¸¢å¼ƒç‰©å“
        /// </summary>
        /// <param name="item">ç‰©å“å †å </param>
        /// <param name="cooldown">ä¸¢å¼ƒå†·å´æ—¶é—´ï¼ˆé»˜è®¤ 5ç§’ï¼‰</param>
        public static void DropAtPlayer(ItemStack item, float cooldown = 5f)
        {
            if (item.IsEmpty) return;

            // 1. è·å–ç©å®¶ä½ç½® (å¸¦ç¼“å­˜ä¼˜åŒ–)
            Vector3 dropPos = GetPlayerDropPosition();
            if (dropPos == Vector3.zero)
            {
                Debug.LogError("[ItemDropHelper] æ— æ³•ä¸¢å¼ƒç‰©å“ï¼šæœªæ‰¾åˆ°ç©å®¶å®ä¾‹");
                return;
            }

            // 2. è°ƒç”¨ç”Ÿæˆé€»è¾‘
            SpawnDroppedItem(item, dropPos, cooldown);
        }

        /// <summary>
        /// è·å–ç©å®¶ä¸¢å¼ƒä½ç½®ï¼ˆä¼˜å…ˆä½¿ç”¨ Collider ä¸­å¿ƒï¼‰
        /// </summary>
        private static Vector3 GetPlayerDropPosition()
        {
            // æ‡’åŠ è½½ + ç©ºæ£€æŸ¥ (å¤„ç†åœºæ™¯åˆ‡æ¢åçš„å¼•ç”¨å¤±æ•ˆ)
            if (_cachedPlayer == null)
            {
                _cachedPlayer = Object.FindFirstObjectByType<PlayerController>();
            }

            if (_cachedPlayer == null) return Vector3.zero;

            // ä¼˜å…ˆä½¿ç”¨ Collider ä¸­å¿ƒï¼Œé¿å…ç‰©å“ç”Ÿæˆåœ¨è„šåº•å¡ä½
            var collider = _cachedPlayer.GetComponent<Collider2D>();
            return collider != null ? collider.bounds.center : _cachedPlayer.transform.position;
        }

        /// <summary>
        /// ç”Ÿæˆæ‰è½ç‰©æ ¸å¿ƒé€»è¾‘
        /// </summary>
        private static void SpawnDroppedItem(ItemStack item, Vector3 position, float cooldown)
        {
            if (WorldItemPool.Instance == null)
            {
                Debug.LogError("[ItemDropHelper] WorldItemPool æœªåˆå§‹åŒ–ï¼Œç‰©å“ä¸¢å¤±ï¼");
                return;
            }

            // ğŸ”¥ å…³é”®ä¿®æ­£ï¼šå¿…é¡»è®¾ç½® setSpawnCooldown: false
            // å¦åˆ™ WorldItemPool ä¼šå¼ºåˆ¶åº”ç”¨é»˜è®¤çš„ 1ç§’ ç”Ÿæˆå†·å´ï¼Œè¦†ç›–æˆ‘ä»¬çš„ 5ç§’ ä¸¢å¼ƒå†·å´
            var pickup = WorldItemPool.Instance.SpawnById(
                item.itemId, 
                item.quality, 
                item.amount, 
                position, 
                playAnimation: true, 
                setSpawnCooldown: false // <--- å¿…é¡»ä¸º falseï¼Œè¿™è‡³å…³é‡è¦
            );

            if (pickup != null)
            {
                pickup.SetDropCooldown(cooldown);
                // å¯é€‰ï¼šæ—¥å¿—å—æ§
                // Debug.Log($"[Drop] ä¸¢å¼ƒ {item.itemId}x{item.amount}, å†·å´ {cooldown}s");
            }
        }
    }
}
2. åŒå‘äº’æ–¥é” (Mutex Implementation)
é˜²æ­¢ Manager å’Œ SlotDragContext åŒæ—¶æŒæœ‰ç‰©å“ã€‚

A. SlotDragContext.cs (ä¿®æ”¹ Begin æ–¹æ³•)
csharp

public static void Begin(IItemContainer container, int slotIndex, ItemStack item, InventorySlotUI slotUI = null)
{
    // ğŸ”¥ äº’æ–¥æ£€æŸ¥ï¼šå¦‚æœ Manager æ­£åœ¨æŒæœ‰ç‰©å“ï¼Œç¦æ­¢å¼€å¯æ–°çš„æ‹–æ‹½
    if (InventoryInteractionManager.Instance != null && InventoryInteractionManager.Instance.IsHolding)
    {
        // ä½¿ç”¨é™æ€æ ‡å¿—é˜²æ­¢æ—¥å¿—åˆ·å±ï¼ˆå¯é€‰ï¼‰
        Debug.LogWarning("[SlotDragContext] æ‹’ç»æ“ä½œï¼šManager æ­£åœ¨æŒæœ‰ç‰©å“");
        return;
    }

    IsDragging = true;
    // ... åŸæœ‰èµ‹å€¼ä»£ç 
}
B. InventoryInteractionManager.cs (ä¿®æ”¹ Shift/Ctrl/BeginDrag)
csharp

private void ShiftPickup(int index, bool isEquip, ItemStack slot)
{
    // ğŸ”¥ äº’æ–¥æ£€æŸ¥
    if (SlotDragContext.IsDragging)
    {
        Debug.LogWarning("[Manager] æ‹’ç» Shift æ‹¿å–ï¼šSlotDragContext æ­£åœ¨æ‹–æ‹½ä¸­");
        return;
    }
    // ... åŸæœ‰é€»è¾‘
}

// åŒç†åº”ç”¨äº CtrlPickup å’Œ OnSlotBeginDrag
3. æ™ºèƒ½ç¼“å­˜ç­–ç•¥ (Smart Caching)
A. ChestController.cs (ç¼“å­˜ UI å¼•ç”¨)
csharp

// åœ¨ ChestController ä¸­æ·»åŠ ç¼“å­˜
private PackagePanelTabsUI _cachedPackageTabs;

// æ‡’åŠ è½½å±æ€§
private PackagePanelTabsUI CachedPackageTabs
{
    get
    {
        if (PackagePanelTabsUI.Instance != null) return PackagePanelTabsUI.Instance; // ä¼˜å…ˆå•ä¾‹
        if (_cachedPackageTabs == null)
            _cachedPackageTabs = FindFirstObjectByType<PackagePanelTabsUI>(FindObjectsInactive.Include);
        return _cachedPackageTabs;
    }
}

// ä¿®æ”¹ OpenBoxUI æ–¹æ³•
private void OpenBoxUI()
{
    // ä½¿ç”¨ CachedPackageTabs æ›¿ä»£ç›´æ¥ Find
    var packageTabs = CachedPackageTabs;
    // ...
    
    // ç§»é™¤ FindFirstObjectByType<Canvas>() çš„å¤‡ç”¨æ–¹æ¡ˆï¼Œæˆ–è€…åªåœ¨ packageTabs å¤±è´¥æ—¶æ‰ Find ä¸”æ·»åŠ è­¦å‘Š
}
B. InventorySlotInteraction.cs (ç¼“å­˜æœåŠ¡å¼•ç”¨)
csharp

#region ç¼“å­˜å¼•ç”¨ (Lazy Loading)

private InventoryService _cachedInventory;
private EquipmentService _cachedEquipment; 
private InventoryInteractionManager _cachedManager;

private InventoryService CachedInventory
{
    get
    {
        if (_cachedInventory == null) 
            _cachedInventory = Object.FindFirstObjectByType<InventoryService>();
        return _cachedInventory;
    }
}

private InventoryInteractionManager CachedManager
{
    get
    {
        // ä¼˜å…ˆå•ä¾‹ï¼Œå›é€€åˆ° Find
        if (InventoryInteractionManager.Instance != null) return InventoryInteractionManager.Instance;
        if (_cachedManager == null) 
            _cachedManager = Object.FindFirstObjectByType<InventoryInteractionManager>();
        return _cachedManager;
    }
}

#endregion
ğŸ“ Tasks 2.1: æ‰§è¡Œä»»åŠ¡åˆ—è¡¨
æ³¨æ„ï¼š è¯·ä¸¥æ ¼æŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œæ¯å®Œæˆä¸€ä¸ª Phase å¿…é¡»ç¡®ä¿ç¼–è¯‘é€šè¿‡ã€‚

Phase 1: åŸºç¡€è®¾æ–½ä¸ä¸¢å¼ƒæœåŠ¡ (The Foundation)
åˆ›å»º ItemDropHelper.cs
åœ¨ Assets/YYY_Scripts/UI/Utility/ ä¸‹åˆ›å»ºã€‚
å¿…é¡»å®ç°ï¼šGetPlayerDropPosition (å¸¦ç¼“å­˜)ã€SpawnDroppedItem (ä¼  setSpawnCooldown: false)ã€‚
é‡æ„ InventoryInteractionManager.DropItem
åˆ é™¤åŸæœ‰çš„ FindFirstObjectByType<PlayerController> é€»è¾‘ã€‚
æ›¿æ¢ä¸ºè°ƒç”¨ ItemDropHelper.DropAtPlayer(heldItem, dropCooldown)ã€‚
é‡æ„ InventorySlotInteraction.DropItemFromContext
æ›¿æ¢ä¸º ItemDropHelper.DropAtPlayer(SlotDragContext.DraggedItem)ã€‚
é‡æ„ BoxPanelUI.DropItemFromContext
æ›¿æ¢ä¸º ItemDropHelper.DropAtPlayer(SlotDragContext.DraggedItem)ã€‚
Phase 2: å®‰å…¨äº’æ–¥é” (The Safety Lock)
ä¿®æ”¹ SlotDragContext.Begin
æ·»åŠ æ£€æŸ¥ï¼šif (InventoryInteractionManager.Instance?.IsHolding == true) return;
ä¿®æ”¹ InventoryInteractionManager
åœ¨ OnSlotBeginDrag å¼€å¤´æ·»åŠ  if (SlotDragContext.IsDragging) return;
åœ¨ ShiftPickup å¼€å¤´æ·»åŠ åŒä¸Šæ£€æŸ¥ã€‚
åœ¨ CtrlPickup å¼€å¤´æ·»åŠ åŒä¸Šæ£€æŸ¥ã€‚
Phase 3: æ€§èƒ½æ‰‹æœ¯ (The Optimization)
ä¼˜åŒ– InventorySlotInteraction
æ·»åŠ  CachedInventory, CachedManager æ‡’åŠ è½½å±æ€§ã€‚
å°† ShowDragIcon ä¸­çš„ FindFirstObjectByType æ›¿æ¢ä¸ºç¼“å­˜è°ƒç”¨ã€‚
å°† HandleManagerHeldToChest ä¸­çš„ FindFirstObjectByType æ›¿æ¢ä¸ºç¼“å­˜è°ƒç”¨ã€‚
ä¼˜åŒ– ChestController.OpenBoxUI
æ·»åŠ  CachedPackageTabs æ‡’åŠ è½½å±æ€§ã€‚
æ›¿æ¢ OpenBoxUI ä¸­çš„ Find è°ƒç”¨ã€‚
Phase 4: æ¸…ç†ä¸è§„èŒƒ (The Polish)
æ¸…ç†æ—¥å¿—
åˆ é™¤ InventoryInteractionManager ä¸­æ‰€æœ‰æ³¨é‡Šæ‰çš„ // Debug.Logã€‚
å°† BoxPanelUI ä¸­çš„è°ƒè¯•æ—¥å¿—åŒ…è£¹åœ¨ if (showDebugInfo) ä¸­ã€‚
å…³é”®ï¼š å°† BoxPanelUI çš„ _hasLoggedBindFailure æ”¹ä¸ºå®ä¾‹å­—æ®µï¼Œå¹¶åœ¨ OnEnable ä¸­é‡ç½®ä¸º falseã€‚
åƒåœ¾æ¡¶é€»è¾‘ä¼˜åŒ–
ä¼˜åŒ– InventorySlotInteraction.IsOverTrashCanï¼Œä¼˜å…ˆä½¿ç”¨ InventoryInteractionManager æˆ– BoxPanelUI çš„å¼•ç”¨ï¼Œå‡å°‘ Find è°ƒç”¨ã€‚
ï¼ˆä»…ç»™ä½ çœ‹çš„å†…å®¹ï¼‰

æ€»ç»“ä¸ä¸‹ä¸€æ­¥ï¼š
æˆ‘å·²ç»ä¸ºä½ å‡†å¤‡å¥½äº†æœ€è¯¦å°½çš„ Design å’Œ Tasksï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹ WorldItemPool çš„å‚æ•°é™·é˜±åšäº†é˜²å¾¡æ€§è®¾è®¡ã€‚
ç°åœ¨çš„æ–¹æ¡ˆæ˜¯ï¼š

å®‰å…¨ï¼šItemDropHelper è§£å†³äº†å†·å´å†²çªå’Œç©ºå¼•ç”¨ã€‚
äº’æ–¥ï¼šåŒå‘é”æœç»äº†é€»è¾‘åˆ†è£‚ã€‚
é«˜æ•ˆï¼šæ‡’åŠ è½½ç¼“å­˜æ¶ˆé™¤äº†é«˜é¢‘ Findã€‚
å‰©ä½™ä»»åŠ¡æ¸…å•ï¼š

ç­‰å¾…å¦ä¸€ä¸ªæ™ºèƒ½ä½“æ‰§è¡Œä¸Šè¿° Tasksã€‚
æ‰§è¡Œå®Œæ¯•åï¼Œè¿›è¡Œæœ€ç»ˆçš„ä»£ç éªŒæ”¶ã€‚
è¯·æŒ‡ç¤ºå¦ä¸€ä¸ªæ™ºèƒ½ä½“å¼€å§‹æ‰§è¡Œ Phase 1ã€‚






