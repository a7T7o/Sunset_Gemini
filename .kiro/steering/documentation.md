---
inclusion: manual
priority: P2
keywords: [文档, 日志, 记录, 技术文档, 交接]
lastUpdated: 2025-01-09
---

# 技术文档编写规范

## 文档目的

技术文档的核心目的是让交接人员能够快速上手，理解系统的设计思路、开发历程和关键决策。

## 核心原则

1. **当前对话内容为主**：文档应以当前开发对话的历程为主要内容
2. **历史文档为辅**：旧文档内容作为历史记录写入，标注"已过时"或"仍有效"
3. **架构以实际为准**：描述当前实际使用的架构，而非早期规划
4. **日志式记录**：详细记录每个阶段的尝试、失败、突破

## 文档结构要求

### 必须包含的章节

1. **当前架构**（最重要）
   - 实际场景层级结构
   - 核心组件及职责
   - 关键映射关系

2. **本次开发任务与目标**
   - 用户需求原文或摘要
   - 核心目标列表

3. **开发历程（日志式记录）**（核心内容）
   - 按时间/阶段顺序记录
   - 每个阶段包含：
     - 需求描述
     - 尝试的方案
     - 用户反馈原文（重要！）
     - 结果（成功/失败/部分成功）
     - 失败原因分析
   - 使用 ✅ ❌ ⚠️ 💡 标记结果和突破点

4. **最终解决方案**
   - 核心架构图（ASCII）
   - 数据流图
   - 核心突破点表格

5. **关键代码实现**
   - 只展示核心代码片段
   - 添加详细注释
   - 说明为什么这样实现

6. **历史文档记录**
   - 列出相关历史文档
   - 标注状态：已过时/仍有效/部分过时
   - 简述历史方案与当前差异

7. **配置与使用指南**
   - Inspector 参数说明表格
   - 重要配置项标注 ★

8. **经验教训与总结**
   - 关键教训（避免重复犯错）
   - 调试技巧

9. **相关文件清单**
   - 核心脚本列表
   - 相关文档列表

## 写作风格

### 日志式记录要求（核心）

```markdown
### 💡 阶段 N：[阶段名称]

**需求**：[简述本阶段要解决的问题]

**问题现象**：[描述遇到的问题]

**用户反馈**：
> "[引用用户原话，保留语气]"

**尝试方案**：
```csharp
// 关键代码示例
```

**结果**：[✅ 成功 / ❌ 失败 / ⚠️ 部分成功]
- [具体结果描述]
- [如果失败，说明原因]
```

### 用户反馈记录（重要）

必须记录用户的原话反馈，这是理解问题的关键：

```markdown
**用户反馈**：
> "完美！！！！！！！！！！"

**用户反馈**：
> "还是有很大的问题甚至现在会出现卡顿..."
```

### 突破性内容标记

使用 💡 标记突破性的解决方案：

```markdown
### 💡 阶段 N：[突破性阶段名称]

**💡 核心突破**：[方案描述]
```

### 易错点标记

使用 ⚠️ 标记容易出错的地方：

```markdown
> ⚠️ **注意**：[描述容易犯的错误]
```

### 错误尝试记录

必须记录失败的尝试，这是宝贵的经验：

```markdown
### ❌ 阶段 N：[失败的尝试]

**❌ 错误尝试**：
```csharp
// 问题代码
```

**失败原因**：[分析为什么失败]
```

## 代码示例规范

### 必须包含注释

```csharp
// ★ 关键：说明这段代码为什么重要
// 这是解决 XXX 问题的核心
public void CriticalMethod()
{
    // 步骤1：说明
    DoStep1();
    
    // 步骤2：说明
    DoStep2();
}
```

### 对比展示

展示错误做法和正确做法的对比：

```markdown
**❌ 错误做法**：
```csharp
// 问题：说明为什么这样做是错的
wrongCode();
```

**✅ 正确做法**：
```csharp
// 解决方案：说明为什么这样做是对的
correctCode();
```
```

## 表格使用

### 参数配置表

| 参数 | 默认值 | 说明 |
|------|--------|------|
| paramName | defaultValue | 参数用途说明 |

### 映射关系表

| 输入 | 输出 | 备注 |
|------|------|------|
| inputA | outputA | 特殊说明 |

## 图表规范

### ASCII 架构图

```
┌─────────────────┐
│   Component A   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   Component B   │
└─────────────────┘
```

### 数据流图

```
输入 → 处理1 → 处理2 → 输出
         │
         ▼
      副作用
```

## 文档存放位置

| 类型 | 路径 | 说明 |
|------|------|------|
| 解决方案 | `Docx/Solutions/` | 具体问题的解决方案（详细开发历程） |
| 规划文档 | `Docx/Plan/` | 功能规划和设计（可能过时） |
| 总结报告 | `Docx/Summary/` | 阶段性总结（精简版） |
| 交接文档 | `Docx/HD/` | 人员交接用文档 |

## 文档关系

- `Solutions/` 文档：详细开发历程，包含所有尝试和失败
- `Summary/` 文档：精简总结，快速了解最终方案
- 两者应同步更新，Summary 引用 Solutions

## 文档命名

- 使用中文命名，简洁明了
- 格式：`[功能名称].md`
- 示例：`手持工具同步功能.md`、`导航系统优化方案.md`

## 更新维护

- 文档头部必须包含版本、日期、状态
- 重大更新时更新版本号
- 状态标记：`已完成` / `进行中` / `待验证`

```markdown
版本: v2.0
日期: 2025-12-16
状态: **已完成**
```

## 历史文档处理

当架构发生变化时：
1. 不删除旧文档
2. 在新文档中标注旧文档状态
3. 说明新旧方案的差异

```markdown
### 历史文档记录

| 文档 | 状态 | 说明 |
|------|------|------|
| `Plan/xxx.md` | 部分过时 | 架构已简化 |
| `Solutions/xxx.md` | 仍有效 | 核心机制未变 |
```
