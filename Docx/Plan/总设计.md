
## 📊 项目概况

**项目名称**: Sunset  
**项目类型**: 2D 农场模拟经营游戏  
**开发引擎**: Unity  
**预计完成周期**: 25个工作日（5周）  
**当前阶段**: 核心框架搭建完成，进入功能实现阶段

---

## 🎯 当前进度分析

### ✅ 已完成模块（30%）

#### 1. 时间系统 (70%完成)
- [x] 基础时间流逝逻辑
- [x] 季节切换系统
- [x] 季节事件触发器
- [ ] 逻辑错误排查（待第16天处理）
- [ ] UI显示（第6天完成）

#### 2. 地图系统 (80%完成)
- [x] Tilemap基础设置
- [x] 所有树木预制体制作
- [x] 树木生成器
- [x] 树木季节变化控制器
- [ ] 完整场景搭建（第14-15天）

#### 3. 角色系统 (90%完成)
- [x] 人物移动控制
- [x] 基础交互系统
- [x] 动画控制器
- [ ] 工具使用动画同步（第1-2天）

#### 4. 资源管理 (60%完成)
- [x] 素材分类
- [x] 素材初步处理
- [ ] 动态加载优化（后期）

### ❌ 待完成模块（70%）

**优先级P0**（核心玩法，必须完成）:
- 砍树系统
- 挖矿系统
- 物品与背包系统
- 种植系统
- 精力系统
- 核心UI

**优先级P1**（重要功能）:
- 场景搭建
- 音效系统
- 战斗系统

**优先级P2**（可延后）:
- NPC系统
- 任务系统
- 开场动画
- 剧情系统

---

## 📅 详细开发计划

### 第一周：核心交互与物品系统

#### 第1天：斧头动画与砍树系统

**目标**: 完成完整的砍树交互循环

**上午任务** (4小时):
1. 制作斧头挥砍动画
   - 在 `Assets/Animations/Player/Tools/` 下创建 `Axe_Swing` 动画
   - 4帧挥砍动作（准备→挥动→击中→收回）
   - 设置动画时长：0.3-0.4秒
   
2. 修改玩家动画控制器
   - 添加 `isChopping` 布尔参数
   - 添加 `Idle → Chop → Idle` 状态转换
   - 设置转换条件和时长

**下午任务** (4小时):
3. 实现砍树逻辑脚本
   - 创建 `TreeInteraction.cs` 脚本
   ```csharp
   // 关键功能：
   // - 检测玩家面向的树木
   // - 树木生命值系统（3-5次砍击）
   // - 砍击动画触发
   // - 树木倒下效果
   ```

4. 树木反馈效果
   - 受击晃动效果（使用DOTween）
   - 倒下动画（旋转+淡出）
   - 临时掉落提示（Debug.Log）

**测试检查点**:
- [ ] 按E键触发砍树动画
- [ ] 动画流畅无卡顿
- [ ] 树木3次被砍后倒下
- [ ] 树木消失后可重新生成

---

#### 第2天：岩石预制体与挖矿系统

**目标**: 建立与砍树系统对应的挖矿系统

**上午任务** (4小时):
1. 制作岩石预制体
   - 在 `Assets/Prefabs/Environment/Rocks/` 创建：
     - `Rock_Small.prefab` (1次破坏)
     - `Rock_Medium.prefab` (2次破坏)
     - `Rock_Large.prefab` (3次破坏)
     - `Rock_Iron.prefab` (铁矿，3次)
     - `Rock_Gold.prefab` (金矿，5次)
   
2. 添加岩石组件
   - `RockHealth.cs` (生命值)
   - `Collider2D` (触发器)
   - 岩石类型枚举

**下午任务** (4小时):
3. 镐子动画制作
   - `Pickaxe_Swing` 动画（类似斧头）
   - 动画时长：0.35秒
   
4. 挖矿逻辑实现
   - 创建 `MiningSystem.cs`
   ```csharp
   // 关键功能：
   // - 检测可挖掘岩石
   // - 镐子耐久度消耗
   // - 岩石破碎特效
   // - 不同岩石的挖掘时间差异
   ```

5. 岩石破碎效果
   - 粒子系统（碎石飞溅）
   - 屏幕轻微震动（CameraShake）

**测试检查点**:
- [ ] 可以用镐子敲击岩石
- [ ] 不同岩石需要不同次数破坏
- [ ] 破碎效果自然
- [ ] 矿石类型能区分

---

#### 第3天：物品系统数据库搭建

**目标**: 建立完整的物品数据管理系统

**上午任务** (4小时):
1. 创建物品数据结构
   - 在 `Assets/Scripts/Items/` 创建：
     - `ItemData.cs` (ScriptableObject基类)
     - `ItemDatabase.cs` (单例管理器)
     - `ItemType.cs` (枚举)
   
   ```csharp
   // ItemData 关键字段：
   // - int itemID (唯一ID)
   // - string itemName
   // - Sprite icon
   // - ItemType type (资源/工具/种子/食物等)
   // - int maxStack (最大堆叠数)
   // - string description
   // - int sellPrice / buyPrice
   ```

2. 设计物品ID分配规则
   ```
   0000-0999: 工具类
   1000-1999: 资源类
   2000-2999: 种子类
   3000-3999: 农作物
   4000-4999: 食物类
   5000-5999: 建筑材料
   6000-6999: 任务物品
   ```

**下午任务** (4小时):
3. 创建物品资产
   - 在 `Assets/Resources/Items/` 创建所有物品的ScriptableObject
   - 基础资源物品（10个）：
     - 1001: 木材
     - 1002: 橡木
     - 1003: 松木
     - 1011: 石头
     - 1012: 铁矿石
     - 1013: 金矿石
     - 1014: 煤炭
     - 1021: 泥土
     - 1022: 黏土
     - 1023: 沙子

4. 配置物品数据
   - 为每个物品分配图标
   - 设置堆叠数量
   - 编写物品描述

**测试检查点**:
- [ ] 所有物品数据可在编辑器中查看
- [ ] ItemDatabase能正确加载所有物品
- [ ] 通过ID能快速查询物品

---

#### 第4天：掉落物与拾取系统

**目标**: 完整的物品掉落和拾取循环

**上午任务** (4小时):
1. 创建掉落物预制体
   - `DroppedItem.prefab`
   - 组件：
     - `SpriteRenderer` (显示物品图标)
     - `Rigidbody2D` (重力+弹跳)
     - `CircleCollider2D` (触发器)
     - `DroppedItemController.cs`
   
2. 掉落物行为脚本
   ```csharp
   // DroppedItemController.cs 功能：
   // - 初始化物品数据和外观
   // - 抛出时的随机力和旋转
   // - 落地后的吸引玩家效果
   // - 自动拾取触发
   // - 超时消失（2分钟后）
   ```

**下午任务** (4小时):
3. 拾取系统实现
   - 创建 `ItemPickup.cs`
   ```csharp
   // 功能：
   // - 检测玩家附近的掉落物
   // - 拾取范围判定（1.5米内自动吸引）
   // - 拾取动画（物品飞向玩家）
   // - 添加到背包的接口调用
   ```

4. 整合掉落系统
   - 修改 `TreeInteraction.cs`，添加掉落木材
   - 修改 `MiningSystem.cs`，添加掉落石头/矿石
   - 掉落数量随机化（1-3个）

**测试检查点**:
- [ ] 砍树后掉落木材
- [ ] 挖矿后掉落对应矿石
- [ ] 掉落物有物理效果
- [ ] 靠近自动拾取
- [ ] 拾取有反馈音效（临时）

---

#### 第5天：背包系统核心

**目标**: 建立可用的背包数据系统

**上午任务** (4小时):
1. 背包数据结构
   - 创建 `InventorySystem.cs` (单例)
   ```csharp
   // 核心功能：
   // - 背包容量管理（初始20格）
   // - 添加物品（带堆叠逻辑）
   // - 移除物品
   // - 交换物品位置
   // - 快捷栏管理（8格）
   // - 保存/加载功能
   ```

2. 物品格子数据类
   ```csharp
   // InventorySlot.cs:
   // - ItemData itemData
   // - int quantity
   // - bool isEmpty
   // - 最大堆叠判断
   ```

**下午任务** (4小时):
3. 堆叠逻辑实现
   - 相同物品自动堆叠
   - 达到上限后占用新格子
   - 拆分堆叠功能
   
4. 背包操作接口
   ```csharp
   // 公共方法：
   // - AddItem(ItemData item, int amount)
   // - RemoveItem(int slotIndex, int amount)
   // - SwapSlots(int fromIndex, int toIndex)
   // - GetItemCount(int itemID)
   // - HasItem(int itemID)
   // - ClearSlot(int index)
   ```

5. 测试用Debug UI
   - 简单的文本显示背包内容
   - 用于验证逻辑正确性

**测试检查点**:
- [ ] 拾取物品后正确添加到背包
- [ ] 相同物品能堆叠
- [ ] 背包满时无法拾取
- [ ] Debug显示内容正确

---

### 第二周：UI系统完善

#### 第6天：时间与季节UI

**目标**: 直观显示游戏时间和季节信息

**上午任务** (4小时):
1. UI框架搭建
   - 在 `Assets/Prefabs/UI/` 创建Canvas预制体
   - 设置UI Canvas（Screen Space - Overlay）
   - 创建 `TimeUI` 面板
   
2. 时钟UI设计
   - 位置：屏幕右上角
   - 样式：圆形时钟或数字时间
   - 元素：
     - 当前时间（08:30 AM）
     - 星期几（Monday）
     - 第几天（Day 15）
     - 季节图标

3. 时间UI脚本
   ```csharp
   // TimeDisplayUI.cs:
   // - 订阅TimeManager的事件
   // - 更新时间文本
   // - 平滑的时针/分针旋转（如果用时钟样式）
   // - 日期切换时的闪烁效果
   ```

**下午任务** (4小时):
4. 季节UI实现
   - 季节指示器（Spring/Summer/Fall/Winter）
   - 季节图标（叶子/太阳/枫叶/雪花）
   - 季节切换动画（淡入淡出）
   
5. 天气UI（如果有天气系统）
   - 天气图标（晴/雨/雪）
   - 简单的天气预报提示
   
6. 整合测试
   - 连接到现有的TimeManager
   - 验证时间同步准确

**测试检查点**:
- [ ] 时间实时更新
- [ ] 季节切换时UI正确更新
- [ ] UI不遮挡重要游戏元素
- [ ] 性能无明显影响

---

#### 第7天：精力系统UI与逻辑完善

**目标**: 完整的精力管理系统

**上午任务** (4小时):
1. 精力系统数据
   - 创建 `StaminaSystem.cs` (单例)
   ```csharp
   // 核心数据：
   // - float currentStamina (当前精力)
   // - float maxStamina (最大精力 = 100)
   // - float staminaRegenRate (恢复速度 = 5/秒)
   // - Dictionary<string, float> actionCosts (行动消耗表)
   ```

2. 行动消耗配置
   ```csharp
   // 消耗表：
   // - 砍树: 5点
   // - 挖矿: 7点
   // - 浇水: 2点
   // - 锄地: 3点
   // - 跑步: 0.5点/秒
   // - 挥舞武器: 4点
   ```

**下午任务** (4小时):
3. 精力条UI设计
   - 位置：屏幕左上角（血条下方）
   - 样式：绿色渐变条
   - 组件：
     - 背景条
     - 填充条（Image Fill Amount）
     - 数值文本（85/100）
   
4. 精力条动画
   - 消耗时的平滑减少（Lerp）
   - 精力不足时的闪烁警告（<20%时）
   - 恢复时的脉冲效果
   
5. 精力逻辑完善
   ```csharp
   // 新增功能：
   // - 精力不足时禁止行动
   // - 自动恢复（非行动时）
   // - 睡眠恢复（回到满值）
   // - 食物恢复（后续添加）
   ```

6. 整合到现有系统
   - 修改砍树/挖矿逻辑，添加精力检查
   - 添加精力不足的UI提示

**测试检查点**:
- [ ] 执行动作消耗精力
- [ ] 精力条正确显示和更新
- [ ] 精力不足时无法执行动作
- [ ] 站立不动时精力自动恢复

---

#### 第8天：背包UI实现

**目标**: 功能完整的背包界面

**上午任务** (4小时):
1. 背包UI布局
   - Canvas结构：
     ```
     InventoryCanvas
     ├── BackpackPanel (可拖动)
     │   ├── TitleBar ("背包")
     │   ├── CloseButton
     │   ├── GridLayoutGroup (5x4格子)
     │   └── GoldDisplay (金币显示)
     └── QuickbarPanel (底部快捷栏)
         └── GridLayoutGroup (8格)
     ```

2. 物品格子预制体
   - `InventorySlotUI.prefab`
   - 组件：
     - 背景图片（空格子/已占用格子）
     - 物品图标（Image）
     - 数量文本（TextMeshPro）
     - 选中高亮框
     - 按钮（Button）组件

**下午任务** (4小时):
3. 背包UI脚本
   - `InventoryUI.cs`
   ```csharp
   // 功能：
   // - 开关背包界面（I键或Tab键）
   // - 刷新所有格子显示
   // - 处理格子点击事件
   // - 拖拽系统初始化
   ```

4. 物品拖拽系统
   - 实现 `IBeginDragHandler`, `IDragHandler`, `IEndDragHandler`
   - 拖拽时显示物品图标跟随鼠标
   - 拖到有效位置时交换物品
   - 拖到背包外时丢弃物品确认

5. 快捷栏功能
   - 数字键1-8切换选中格子
   - 高亮显示当前选中
   - 快捷栏物品可直接使用

**测试检查点**:
- [ ] 按I键打开/关闭背包
- [ ] 背包正确显示所有物品
- [ ] 可以拖动物品交换位置
- [ ] 快捷栏切换正常
- [ ] 数量显示正确

---

#### 第9天：工具系统UI与切换

**目标**: 流畅的工具切换体验

**上午任务** (4小时):
1. 工具数据定义
   - 扩展 `ItemData.cs`，添加工具子类
   ```csharp
   // ToolData.cs (继承ItemData):
   // - ToolType toolType (斧头/镐子/锄头/浇水壶/镰刀)
   // - float useDuration (使用时长)
   // - float cooldown (冷却时间)
   // - int durability (耐久度, -1为无限)
   // - AnimationClip useAnimation
   ```

2. 创建工具物品
   - 0001: 木斧
   - 0002: 铁斧
   - 0003: 木镐
   - 0004: 铁镐
   - 0011: 锄头
   - 0012: 浇水壶
   - 0013: 镰刀

**下午任务** (4小时):
3. 工具管理系统
   - `ToolManager.cs` (单例)
   ```csharp
   // 功能：
   // - 当前装备的工具
   // - 切换工具（从快捷栏）
   // - 工具使用接口
   // - 工具耐久度管理
   // - 工具动画控制
   ```

4. 工具UI显示
   - 当前工具图标（屏幕左下角）
   - 工具名称显示
   - 耐久度条（如果有耐久）
   - 冷却时间指示器

5. 工具切换逻辑
   - 快捷栏只能放工具和消耗品
   - 数字键快速切换
   - 切换动画（工具图标缩放）
   - 切换音效

**测试检查点**:
- [ ] 可以通过数字键切换工具
- [ ] 当前工具高亮显示
- [ ] 切换流畅无卡顿
- [ ] 只有正确的工具能执行对应操作

---

#### 第10天：综合测试与修复

**目标**: 确保前两周的所有系统稳定运行

**全天任务** (8小时):
1. 系统集成测试
   - 从开始游戏到各项操作的完整流程测试
   - 记录所有Bug和问题

2. Bug修复
   - UI层级问题
   - 物品堆叠异常
   - 动画同步问题
   - 性能优化（如需要）

3. 平衡性调整
   - 精力消耗是否合理
   - 工具使用手感调整
   - UI大小和位置微调

4. 代码整理
   - 添加注释
   - 移除Debug代码
   - 规范命名

**测试检查点**:
- [ ] 无严重Bug
- [ ] 核心玩法流畅
- [ ] UI响应迅速
- [ ] 性能达标（60FPS）

---

### 第三周：农业系统完整实现

#### 第11天：土地耕作系统

**目标**: 实现完整的耕地机制

**上午任务** (4小时):
1. 锄头动画制作
   - `Hoe_Swing` 动画（类似斧头，但更向下）
   - 添加到动画控制器

2. 耕地Tilemap设置
   - 创建新的Tilemap层 `FarmlandTilemap`
   - 准备耕地Tile素材：
     - 未耕作土地
     - 已耕作（干燥）
     - 已浇水（湿润）
   
3. 土地状态系统
   - `FarmlandTile.cs` (ScriptableObject)
   ```csharp
   // 土地状态：
   // - Normal (普通土地)
   // - Tilled (已耕作)
   // - Watered (已浇水)
   // - Planted (已种植)
   // 
   // 每个状态对应不同的Tile
   ```

**下午任务** (4小时):
4. 耕地系统脚本
   - `FarmingSystem.cs`
   ```csharp
   // 核心功能：
   // - 检测玩家面前的土地Tile
   // - 使用锄头耕地（切换Tile）
   // - 记录耕地状态（Dictionary<Vector3Int, TileState>）
   // - 与精力系统整合
   ```

5. 耕地逻辑实现
   - 只有普通土地可以耕作
   - 耕作消耗精力（3点）
   - 耕作动画与Tile切换同步
   - 耕地后的视觉反馈（粒子效果）

6. 耕地区域管理
   - 设定可耕作区域（Collider2D边界）
   - 防止在不合适的地方耕地

**测试检查点**:
- [ ] 可以用锄头耕地
- [ ] 耕地后Tile正确改变
- [ ] 只有指定区域可耕地
- [ ] 耕地动画流畅

---

#### 第12天：种植系统

**目标**: 建立作物种植和生长机制

**上午任务** (4小时):
1. 种子数据结构
   - `SeedData.cs` (继承ItemData)
   ```csharp
   // 种子属性：
   // - CropData cropPrefab (对应作物)
   // - Season[] validSeasons (可种植季节)
   // - int growthTime (生长时间，单位：小时)
   // - Sprite[] growthStages (各生长阶段图片)
   ```

2. 作物数据结构
   - `CropData.cs` (ScriptableObject)
   ```csharp
   // 作物属性：
   // - string cropName
   // - int growthStages (生长阶段数，如4阶段)
   // - float[] stageDuration (每阶段时长)
   // - bool needsWater (是否需要浇水)
   // - ItemData[] harvestItems (收获物品)
   // - int[] harvestQuantity (收获数量范围)
   // - bool regrowable (是否可重复收获)
   // - int regrowTime (重新生长时间)
   ```

3. 创建测试作物
   - 2001: 萝卜种子（2天成熟，不可重生）
   - 2002: 小麦种子（3天成熟）
   - 2003: 番茄种子（5天成熟，可重复收获）

**下午任务** (4小时):
4. 作物预制体制作
   - `Crop.prefab` 基础模板
   - 组件：
     - `SpriteRenderer`
     - `CropGrowth.cs` 脚本
     - `BoxCollider2D` (触发器)

5. 作物生长脚本
   - `CropGrowth.cs`
   ```csharp
   // 核心逻辑：
   // - 初始化作物数据
   // - 监听时间系统事件
   // - 检查浇水状态
   // - 根据时间推进生长阶段
   // - 更新作物外观
   // - 判断是否成熟
   // - 处理枯萎（未浇水超过1天）
   ```

6. 种植逻辑实现
   - 修改 `FarmingSystem.cs` 添加种植功能
   ```csharp
   // PlantSeed():
   // - 检查是否为耕作过的土地
   // - 检查该位置是否已种植
   // - 检查季节是否合适
   // - 生成作物GameObject
   // - 记录作物信息
   // - 从背包移除种子
   ```

**测试检查点**:
- [ ] 可以在耕地上种植种子
- [ ] 不同种子种植正确的作物
- [ ] 作物能显示在场景中
- [ ] 作物数据正确初始化

---

#### 第13天：浇水与作物护理

**目标**: 完善作物管理系统

**上午任务** (4小时):
1. 浇水壶动画
   - `WateringCan_Use` 动画
   - 水流粒子效果预制体

2. 浇水系统实现
   - `WateringSystem.cs`
   ```csharp
   // 功能：
   // - 检测面前的耕地或作物
   // - 改变土地状态为"已浇水"
   // - 更新作物的浇水状态
   // - 切换湿润土地Tile
   // - 水流粒子效果
   // - 消耗精力（2点）
   ```

3. 土地湿度系统
   - 扩展 `FarmlandTile` 添加湿度计时器
   - 24小时后土地变干
   - 湿润状态的视觉效果（深色）

**下午任务** (4小时):
4. 作物需水管理
   - 修改 `CropGrowth.cs` 添加需水逻辑
   ```csharp
   // 新增功能：
   // - lastWateredTime 记录上次浇水时间
   // - isWatered 当前浇水状态
   // - 每天检查浇水状态
   // - 连续2天未浇水 → 生长停滞
   // - 连续3天未浇水 → 作物枯萎
   ```

5. 作物枯萎系统
   - 枯萎状态标记
   - 枯萎外观（变黄变干）
   - 枯萎作物可清除但不可收获
   - 清除后可重新种植

6. 浇水状态UI
   - 作物头顶显示水滴图标（需要浇水时）
   - 土地湿润时的边框高亮

**测试检查点**:
- [ ] 可以给作物和土地浇水
- [ ] 浇水后土地变湿润
- [ ] 未浇水的作物会枯萎
- [ ] 浇水后作物正常生长

---

#### 第14天：收获系统与作物完善

**目标**: 完整的作物生命周期

**上午任务** (4小时):
1. 作物成熟判定
   - 修改 `CropGrowth.cs`
   ```csharp
   // 成熟检测：
   // - 达到最后生长阶段
   // - 设置 isHarvestable = true
   // - 添加闪烁效果（表示可收获）
   // - 触发成熟事件（可选音效）
   ```

2. 收获动画
   - 玩家收获动作（弯腰采摘）
   - 作物消失动画（淡出+缩小）
   - 物品掉落动画

3. 收获逻辑实现
   ```csharp
   // HarvestCrop():
   // - 检查作物是否成熟
   // - 播放收获动画
   // - 根据CropData生成掉落物品
   // - 随机数量（min-max range）
   // - 如果可重复收获，重置生长阶段
   // - 如果不可重复，销毁作物GameObject
   // - 恢复土地状态
   ```

**下午任务** (4小时):
4. 作物重生系统（可重复收获作物）
   - 番茄/草莓等作物收获后不消失
   - 回到特定生长阶段
   - 经过一定时间再次成熟

5. 作物质量系统（可选）
   - 根据护理情况给作物评分
   - 普通/优质/完美 三个等级
   - 影响收获数量和价格
   ```csharp
   // 质量判定因素：
   // - 浇水及时性
   // - 是否使用肥料（后续添加）
   // - 季节匹配度
   ```

6. 季节限制实现
   - 检测当前季节
   - 非适宜季节种植的作物生长缓慢或失败
   - 给予警告提示

**测试检查点**:
- [ ] 成熟作物可以收获
- [ ] 收获获得正确物品
- [ ] 可重复收获作物正确重生
- [ ] 一次性作物收获后消失
- [ ] 土地可以重新使用

---

#### 第15天：农业系统综合测试

**目标**: 完整的种田循环测试与优化

**全天任务** (8小时):
1. 完整流程测试
   - 从耕地→种植→浇水→生长→收获→重新种植
   - 测试所有作物类型
   - 测试极端情况（长期不浇水、跨季节等）

2. 平衡性调整
   - 作物生长时间是否合理
   - 精力消耗是否平衡
   - 收获数量调整
   - 种子价格平衡

3. UI优化
   - 添加农业相关的帮助提示
   - 作物信息展示（鼠标悬停）
   - 土地信息显示

4. Bug修复
   - 作物生长异常
   - 浇水判定问题
   - 收获逻辑错误
   - 性能问题

5. 数据完善
   - 创建更多作物类型（至少10种）
   - 春夏秋冬各2-3种特色作物
   - 配置完整的作物数据

**测试检查点**:
- [ ] 所有作物正常生长和收获
- [ ] 季节限制正确生效
- [ ] 浇水系统稳定
- [ ] 无严重Bug
- [ ] 性能良好

---

### 第四周：场景搭建与战斗系统

#### 第16天：主场景规划与地形搭建

**目标**: 完成游戏主场景的基础地形

**上午任务** (4小时):
1. 场景规划设计
   - 在纸上或软件绘制场景布局图
   - 区域划分：
     ```
     - 玩家农场区（中心，20x20格）
     - 森林区（左侧，采集木材）
     - 矿洞区（右上，挖掘矿石）
     - 湖泊/河流区（下方，钓鱼，后期添加）
     - 村庄区（右侧，NPC和商店）
     - 山地区（上方，探索区域）
     ```

2. Tilemap层级设置
   ```
   Tilemaps:
   - Ground_Base (地面基础层)
   - Ground_Detail (地面装饰层)
   - Farmland (耕地层)
   - Paths (道路层)
   - Water (水域层)
   - Cliff (悬崖/台阶层)
   ```

3. 地形绘制 - 基础部分
   - 绘制农场区域的平坦草地
   - 绘制森林区域的地面
   - 绘制矿区的山地地形

**下午任务** (4小时):
4. 地形绘制 - 细节部分
   - 添加道路（连接各区域）
   - 绘制水域（湖泊或小河）
   - 添加悬崖和高度差
   - 地形过渡处理

5. 碰撞层设置
   - 设置Tilemap Collider2D
   - 调整碰撞体形状
   - 设置层级（Sorting Layers）
   - 测试玩家移动

6. 场景美化初步
   - 添加草丛、花朵装饰
   - 石头、木桩等小物件
   - 注意不要过于密集影响性能

**测试检查点**:
- [ ] 场景布局合理
- [ ] 各区域过渡自然
- [ ] 碰撞正确无穿模
- [ ] 玩家可到达所有区域

---

#### 第17天：资源点分布与场景完善

**目标**: 合理分布游戏资源，完善场景细节

**上午任务** (4小时):
1. 树木分布
   - 在森林区域密集放置树木（30-50棵）
   - 农场周边放置少量树木（5-10棵）
   - 使用现有的树木预制体
   - 注意树木间距和可通行性

2. 岩石/矿石分布
   - 矿区放置大量岩石（20-30个）
   - 山地区域散落岩石
   - 混合普通岩石和矿石
   - 矿石比例：铁矿60%，金矿30%，稀有矿10%

3. 种子获取点设置
   - 设置几个野生植物（可采集种子）
   - 或者设置商店NPC位置（后续实现）

**下午任务** (4小时):
4. 场景装饰完善
   - 前景装饰（遮挡玩家的植物）
   - 背景装饰（远景树木、山脉）
   - 粒子效果（风吹草动、水面涟漪）
   - 光照效果（2D光源，如需要）

5. 功能性建筑
   - 玩家小屋（初始位置，可进入，后期实现内部）
   - 工具棚（存储工具，后期实现）
   - 井（水源，可能用于后期机制）
   - 邮箱（接收任务，后期实现）

6. 场景过渡处理
   - 不同区域的视觉风格区分
   - 添加指示牌（区域名称）
   - 道路指引

**测试检查点**:
- [ ] 资源点分布合理
- [ ] 场景美观不杂乱
- [ ] 性能测试（帧率稳定）
- [ ] 资源点可正常交互

---

#### 第18天：音效系统集成

**目标**: 为游戏添加基础音效和背景音乐

**上午任务** (4小时):
1. 音效资源整理
   - 创建 `Assets/Audio/` 文件夹结构：
     ```
     Audio/
     ├── BGM/
     │   ├── Day_Spring.mp3
     │   ├── Day_Summer.mp3
     │   ├── Night.mp3
     │   └── ...
     ├── SFX/
     │   ├── Actions/
     │   ├── UI/
     │   ├── Environment/
     │   └── Character/
     ```

2. 音效管理系统
   - `AudioManager.cs` (单例)
   ```csharp
   // 核心功能：
   // - BGM播放和切换（淡入淡出）
   // - SFX播放（支持多个同时）
   // - 音量控制（BGM/SFX分开）
   // - 音效池（避免频繁创建AudioSource）
   // - 保存音量设置
   ```

**下午任务** (4小时):
3. 动作音效集成
   - 砍树音效（3个变化，随机播放）
   - 挖矿音效（敲击声+破碎声）
   - 锄地音效
   - 浇水音效（水流声）
   - 脚步声（草地/泥土/石头不同）

4. UI音效
   - 按钮点击
   - 背包打开/关闭
   - 物品拾取
   - 物品拖动
   - 错误提示音

5. 环境音效
   - 树叶沙沙声（背景循环）
   - 鸟叫（随机触发）
   - 风声（根据季节）
   - 水流声（靠近水域时）

6. BGM整合
   - 连接到TimeManager
   - 白天/夜晚BGM切换
   - 季节主题BGM（可选）
   - 特殊区域BGM（矿洞等）

**测试检查点**:
- [ ] 所有动作有对应音效
- [ ] BGM平滑切换无卡顿
- [ ] 音量可调节
- [ ] 音效不过于重复或刺耳

---

#### 第19天：生命值系统

**目标**: 实现玩家血量和受伤机制

**上午任务** (4小时):
1. 生命值数据系统
   - `HealthSystem.cs` (可附加到玩家或敌人)
   ```csharp
   // 核心数据：
   // - float currentHealth
   // - float maxHealth
   // - bool isInvincible (无敌时间)
   // - float invincibilityDuration
   // 
   // 方法：
   // - TakeDamage(float amount)
   // - Heal(float amount)
   // - OnDeath()
   // - 受伤事件（用于UI更新）
   ```

2. 玩家血量UI
   - 位置：屏幕左上角
   - 样式：心形图标 + 红色血条
   - 血量显示：5个心（每个心20HP，总100HP）
   - 血条：精确显示（87/100）

3. 受伤反馈效果
   - 角色闪红（Sprite颜色变化）
   - 屏幕边缘红色闪烁
   - 受伤音效
   - 轻微击退效果

**下午任务** (4小时):
4. 死亡机制
   - 死亡动画（倒地）
   - 死亡UI（Game Over界面）
   - 选项：
     - 重生（扣除金币/物品）
     - 读取存档
     - 回到主菜单

5. 治疗系统
   - 创建食物物品（后续可扩展）
   - 临时治疗物品：
     - 3001: 浆果（恢复10HP）
     - 3002: 面包（恢复30HP）
     - 3003: 烤肉（恢复50HP）
   
   - 使用物品治疗逻辑
   - 治疗动画效果（绿色光圈）

6. 无敌时间实现
   - 受伤后1.5秒无敌
   - 期间角色闪烁
   - 防止连续伤害

**测试检查点**:
- [ ] 受到伤害后血量减少
- [ ] 血量UI正确更新
- [ ] 血量为0时触发死亡
- [ ] 治疗物品正常工作
- [ ] 无敌时间生效

---

#### 第20天：基础怪物系统

**目标**: 实现简单的敌人AI

**上午任务** (4小时):
1. 怪物数据结构
   - `EnemyData.cs` (ScriptableObject)
   ```csharp
   // 怪物属性：
   // - string enemyName
   // - float maxHealth
   // - float moveSpeed
   // - float attackDamage
   // - float attackRange
   // - float detectionRange
   // - float attackCooldown
   // - ItemDrop[] dropTable (掉落表)
   ```

2. 基础怪物预制体
   - `Enemy_Slime.prefab` (史莱姆)
   - 组件：
     - SpriteRenderer + Animator
     - Rigidbody2D
     - CircleCollider2D (身体)
     - CircleCollider2D (攻击范围)
     - CircleCollider2D (检测范围)
     - HealthSystem
     - EnemyAI

3. 怪物动画
   - Idle (待机)
   - Move (移动)
   - Attack (攻击)
   - Hurt (受伤)
   - Death (死亡)

**下午任务** (4小时):
4. 怪物AI脚本
   - `EnemyAI.cs`
   ```csharp
   // 状态机：
   // - Idle: 原地待机或缓慢巡逻
   // - Chase: 追击玩家
   // - Attack: 攻击玩家
   // - Hurt: 受伤僵直
   // - Death: 死亡
   // 
   // 行为逻辑：
   // - 检测玩家进入范围→切换到Chase
   // - 靠近玩家→切换到Attack
   // - 玩家逃离→返回巡逻点
   // - 受伤时短暂停止移动
   ```

5. 怪物攻击逻辑
   - 攻击判定（检测攻击范围内的玩家）
   - 攻击动画触发
   - 造成伤害（调用玩家HealthSystem）
   - 攻击冷却计时

6. 怪物受伤与死亡
   - 受伤反馈（闪白、击退）
   - 死亡动画（淡出）
   - 掉落物品生成
   - 销毁GameObject

**测试检查点**:
- [ ] 怪物能检测并追击玩家
- [ ] 怪物能攻击玩家
- [ ] 怪物受伤有反馈
- [ ] 怪物死亡正确掉落物品

---

### 第五周：战斗完善与系统整合

#### 第21天：战斗系统与武器

**目标**: 实现玩家战斗功能

**上午任务** (4小时):
1. 武器数据
   - `WeaponData.cs` (继承ToolData)
   ```csharp
   // 武器属性：
   // - float attackDamage
   // - float attackRange
   // - float knockbackForce
   // - float attackSpeed (攻击间隔)
   // - AttackType (近战/远程)
   ```

2. 创建武器物品
   - 0051: 木剑（10伤害）
   - 0052: 铁剑（20伤害）
   - 0053: 弓箭（15伤害，远程）
   - 0054: 魔法杖（25伤害，后期）

3. 近战攻击动画
   - 剑挥砍动画（4方向）
   - 攻击特效（剑光）

**下午任务** (4小时):
4. 战斗系统脚本
   - `CombatSystem.cs`
   ```csharp
   // 功能：
   // - 检测攻击输入（鼠标左键或空格）
   // - 触发攻击动画
   // - 攻击判定（检测攻击范围内的敌人）
   // - 造成伤害
   // - 击退效果
   // - 攻击冷却
   // - 连击系统（可选）
   ```

5. 攻击判定实现
   - 使用OverlapCircle或Raycast
   - 根据玩家朝向调整判定位置
   - 支持同时击中多个敌人

6. 击退效果
   - 计算击退方向（从攻击者到被击者）
   - 应用瞬时力到Rigidbody2D
   - 被击退期间无法移动

**测试检查点**:
- [ ] 可以用武器攻击敌人
- [ ] 攻击造成正确伤害
- [ ] 击退效果自然
- [ ] 攻击冷却正常

---

#### 第22天：怪物种类扩展与AI优化

**目标**: 增加怪物多样性

**上午任务** (4小时):
1. 创建新怪物类型
   - `Enemy_Bat.prefab` (蝙蝠 - 飞行，速度快)
   - `Enemy_Goblin.prefab` (哥布林 - 近战，血厚)
   - `Enemy_Skeleton.prefab` (骷髅 - 远程攻击)

2. 不同怪物行为
   - 蝙蝠：飞行，环绕玩家攻击
   - 哥布林：近战，会格挡
   - 骷髅：远程，保持距离

3. 怪物掉落配置
   - 史莱姆：黏液（炼金材料）
   - 蝙蝠：蝙蝠翅膀
   - 哥布林：破损装备、金币
   - 骷髅：骨头、弓箭

**下午任务** (4小时):
4. AI优化
   - 优化路径寻找（使用NavMesh或简单寻路）
   - 添加攻击范围可视化（调试用）
   - 怪物之间的碰撞避免
   - 组队攻击逻辑（多个怪物协同）

5. 怪物刷新系统
   - `EnemySpawner.cs`
   ```csharp
   // 功能：
   // - 定时刷新怪物
   // - 限制同时存在的怪物数量
   // - 根据区域刷新不同怪物
   // - 夜晚刷新更多怪物
   ```

6. Boss怪物雏形（可选）
   - 血量更高
   - 多阶段攻击模式
   - 特殊技能

**测试检查点**:
- [ ] 所有怪物类型正常工作
- [ ] 怪物AI不卡顿
- [ ] 刷新系统稳定
- [ ] 掉落物品正确

---

#### 第23天：系统整合与优化

**目标**: 整合所有系统，修复冲突

**全天任务** (8小时):
1. 系统冲突解决
   - 工具和武器的切换逻辑
   - 战斗时的精力消耗
   - 受伤时的动画优先级
   - UI层级问题

2. 存档系统实现
   - `SaveSystem.cs`
   ```csharp
   // 需要保存的数据：
   // - 玩家位置、血量、精力
   // - 背包物品
   // - 时间和季节
   // - 耕地状态
   // - 作物生长进度
   // - 已砍伐的树木
   // - 已挖掘的矿石
   // - 金币数量
   ```

3. 保存/加载功能
   - 使用JSON序列化
   - 自动保存（每天结束）
   - 手动保存（睡觉时）
   - 多存档槽位（3个）

4. 游戏平衡调整
   - 怪物难度
   - 资源数量
   - 物品价格
   - 时间流速

5. 性能优化
   - 对象池（怪物、掉落物）
   - 视野剔除（Culling）
   - 减少不必要的Update调用
   - 优化碰撞检测

**测试检查点**:
- [ ] 无系统冲突
- [ ] 存档加载正常
- [ ] 长时间运行无卡顿
- [ ] 内存占用合理

---

#### 第24天：NPC基础与对话系统

**目标**: 建立NPC交互框架

**上午任务** (4小时):
1. 对话系统数据
   - `DialogueData.cs` (ScriptableObject)
   ```csharp
   // 对话数据：
   // - string[] dialogueLines (对话文本数组)
   // - Sprite characterPortrait (NPC头像)
   // - string characterName
   // - DialogueChoice[] choices (对话选项，可选)
   ```

2. 对话UI设计
   - 对话框（屏幕下方）
   - NPC头像和名字
   - 对话文本（打字机效果）
   - 继续按钮或自动播放
   - 对话选项（如有）

3. 对话系统脚本
   - `DialogueSystem.cs` (单例)
   ```csharp
   // 功能：
   // - 开始对话
   // - 显示对话文本（逐字）
   // - 切换下一句
   // - 对话结束
   // - 选项处理
   ```

**下午任务** (4小时):
4. NPC基础脚本
   - `NPC.cs`
   ```csharp
   // 组件：
   // - NPC信息（名字、职业）
   // - 对话数据引用
   // - 交互触发
   // - 简单巡逻AI（可选）
   // - 每日行程（后期）
   ```

5. 创建测试NPC
   - NPC_Merchant（商人）：出售种子和工具
   - NPC_Villager（村民）：闲聊，给任务
   - NPC_Mayor（村长）：主线任务

6. NPC交互逻辑
   - 靠近NPC显示互动提示
   - 按E键触发对话
   - 对话结束后可再次对话

**测试检查点**:
- [ ] 可以与NPC对话
- [ ] 对话文本正确显示
- [ ] 对话UI美观易读
- [ ] NPC可重复交互

---

#### 第25天：任务系统雏形与最终测试

**目标**: 实现基础任务系统，全面测试游戏

**上午任务** (4小时):
1. 任务数据结构
   - `QuestData.cs` (ScriptableObject)
   ```csharp
   // 任务数据：
   // - string questID
   // - string questName
   // - string description
   // - QuestType type (主线/支线/日常)
   // - QuestGoal[] goals (任务目标)
   // - ItemReward[] rewards
   // - QuestData[] prerequisites (前置任务)
   // - DialogueData startDialogue
   // - DialogueData completeDialogue
   ```

2. 任务目标类型
   ```csharp
   // QuestGoal类型：
   // - Collect (收集物品)
   // - Kill (击杀怪物)
   // - Harvest (收获作物)
   // - Deliver (交付物品)
   // - Talk (与NPC对话)
   ```

3. 任务管理系统
   - `QuestManager.cs` (单例)
   ```csharp
   // 功能：
   // - 接受任务
   // - 追踪任务进度
   // - 完成任务
   // - 任务奖励发放
   // - 当前任务列表
   ```

**下午任务** (4小时):
4. 任务UI
   - 任务日志界面（J键打开）
   - 任务列表（进行中/已完成）
   - 任务详情面板
   - 任务追踪提示（屏幕右侧）

5. 创建测试任务
   - 任务1："新手教学" - 砍5棵树，挖3块石头
   - 任务2："农夫的开始" - 耕地、种植、收获1个作物
   - 任务3："除害" - 击杀5只史莱姆

6. 全游戏最终测试
   - 完整游戏流程测试
   - 所有系统联动测试
   - 寻找并修复Bug
   - 平衡性最终调整

**测试检查点**:
- [ ] 任务可正常接受和完成
- [ ] 任务进度正确追踪
- [ ] 任务奖励正确发放
- [ ] 所有核心系统稳定运行
- [ ] 游戏可以连续游玩1小时无崩溃

---

## 🔧 技术实现要点

### 代码架构建议

Assets/
├── Scripts/
│ ├── Core/ (核心管理器：GameManager, TimeManager等)
│ ├── Player/ (玩家控制、动画)
│ ├── Items/ (物品、背包系统)
│ ├── Farming/ (农业相关)
│ ├── Combat/ (战斗、武器)
│ ├── Enemies/ (敌人AI)
│ ├── UI/ (所有UI脚本)
│ ├── Environment/ (树木、岩石等)
│ ├── NPC/ (NPC和对话)
│ └── Utilities/ (工具类、扩展方法)



### 设计模式应用
- **单例模式**: GameManager, TimeManager, AudioManager, SaveSystem
- **对象池模式**: 怪物、掉落物、粒子效果
- **观察者模式**: 事件系统（时间变化、季节更替等）
- **状态机模式**: 敌人AI、玩家动画控制
- **工厂模式**: 物品生成、怪物生成

### 性能优化策略
1. **对象池**: 频繁生成销毁的对象使用对象池
2. **Update优化**: 减少Update调用，使用事件驱动
3. **协程使用**: 计时器、延迟操作使用协程
4. **视野剔除**: 屏幕外的对象禁用或简化更新
5. **批处理**: UI绘制批处理，减少DrawCall

---

## 📊 里程碑与测试节点

### 第一次测试（第5天结束）
**目标**: 核心交互可玩
- 可以砍树、挖矿
- 可以拾取物品
- 背包可以存储物品
- 精力系统工作

### 第二次测试（第10天结束）
**目标**: UI完善，体验流畅
- 所有核心UI完成
- 工具切换流畅
- 精力管理合理
- 音效添加

### 第三次测试（第15天结束）
**目标**: 种田循环完整
- 可以完整的种植和收获
- 季节系统影响作物
- 农业玩法有趣

### 第四次测试（第20天结束）
**目标**: 战斗系统可玩
- 可以战斗并击败怪物
- 生命值系统工作
- 场景完整可探索

### 最终测试（第25天结束）
**目标**: 游戏完整度达80%
- 所有核心系统完成
- 可以连续游玩1-2小时
- 无严重Bug
- 基本平衡性调整完成

---

## ⚠️ 风险预警与应对

### 潜在风险1：进度延误
**原因**: 某个系统比预期复杂
**应对**: 
- 简化功能，先做最小可行版本
- 延后不影响核心玩法的功能
- 调整后续计划，压缩测试时间

### 潜在风险2：系统冲突
**原因**: 不同系统之间的交互产生Bug
**应对**:
- 尽早集成测试
- 保持代码模块化
- 使用事件系统解耦

### 潜在风险3：性能问题
**原因**: 场景物体过多，逻辑过于复杂
**应对**:
- 使用性能分析工具(Profiler)
- 实施对象池
- 减少不必要的碰撞检测
- 降低粒子效果数量

### 潜在风险4：时间系统Bug
**原因**: 已知时间系统还未完全排查
**应对**:
- 第16天专门分配时间修复
- 建立时间系统测试用例
- 记录所有异常情况

---

## 📝 每日工作流程建议

**开始工作前** (15分钟):
1. 回顾昨天完成的内容
2. 检查是否有遗留问题
3. 明确今天的目标

**工作期间** (7小时):
- 上午4小时专注开发
- 午休1小时
- 下午4小时开发+测试

**结束工作前** (15分钟):
1. 提交代码到版本控制
2. 记录今天的进度
3. 列出明天的重点任务
4. 标记遇到的问题

---

## 🎓 学习资源推荐

### Unity农场游戏开发
- Unity官方农场游戏教程
- 2D种植系统实现
- Tilemap高级使用

### 对话系统
- Yarn Spinner (对话插件)
- 对话树设计

### AI系统
- Unity AI行为树
- 状态机设计模式

---

## 🎯 后续扩展方向（第26天+）

完成以上25天的核心内容后，可以考虑以下扩展：

1. **动物系统** (3-5天)
   - 鸡、牛、羊饲养
   - 动物产出（鸡蛋、牛奶）
   - 动物爱心系统

2. **钓鱼系统** (2-3天)
   - 钓鱼小游戏
   - 多种鱼类
   - 鱼竿升级

3. **烹饪系统** (2-3天)
   - 配方系统
   - 烹饪UI
   - 食物buff效果

4. **婚姻系统** (4-5天)
   - NPC好感度
   - 约会事件
   - 婚礼和家庭

5. **节日活动** (2-3天)
   - 季节性节日
   - 特殊活动
   - 限定物品

6. **地牢探险** (5-7天)
   - 地牢生成
   - Boss战斗
   - 珍稀装备

---

## 💡 开发建议

1. **保持迭代**: 每个功能先做最简版本，能用再优化
2. **频繁测试**: 不要积累太多功能再测试，及时发现问题
3. **版本控制**: 每天提交代码，重要节点打Tag
4. **文档记录**: 记录重要的设计决策和Bug修复
5. **灵活调整**: 如果某个功能确实太难，可以降低标准或延后
6. **劳逸结合**: 不要过度疲劳，保持良好的开发状态

---

**祝开发顺利！如有任何问题或需要调整计划，请随时反馈。** 🚀