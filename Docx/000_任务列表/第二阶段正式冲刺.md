# 第二阶段正式冲刺 - 任务清单

**创建日期**: 2025-12-16  
**目标**: 完成种植系统、场景搭建、音效系统、战斗系统  
**预计周期**: 10个工作日

---

## 📊 当前进度总览

### 已完成模块（第一阶段）
- ✅ 时间系统 (90%)
- ✅ 角色系统 (95%) - 动画同步零帧延迟
- ✅ 导航系统 (95%) - 世界边界自动检测
- ✅ 遮挡透明系统 (95%)
- ✅ UI系统 (80%) - 快捷键与面板切换
- ✅ 物品系统 (70%) - 数据结构与背包逻辑
- ✅ 地图系统 (85%) - 树木预制体与季节变化

### 进行中模块
- 🚧 农田系统 (30%) - 数据结构已完成，功能待实现
- 🚧 云朵阴影系统 (设计完成) - 待实现

### 待开发模块
- ❌ 战斗系统
- ❌ NPC系统
- ❌ 任务系统
- ❌ 存档系统
- ❌ 音效系统

---

## 🎯 第二阶段任务分类

### 图例说明
- 🤖 **可直接完成** - AI可以独立完成的编码任务
- 👤 **需要确认** - 需要用户确认需求或设计决策
- 🎨 **需要资源** - 需要用户提供美术/音效资源
- ⚙️ **需要操作** - 需要用户在Unity编辑器中操作

---

## 📋 详细任务清单

### 第一周：种植系统（第11-15天）

#### 第11天：锄地系统

| 任务 | 类型 | 说明 |
|------|------|------|
| 创建耕地Tilemap层 | ⚙️ 需要操作 | 在Unity中创建Farmland Tilemap |
| 创建耕地Tile资源 | 🎨 需要资源 | 需要5种Tile：未耕作/已耕作/湿润等 |
| 实现FarmingManager核心逻辑 | 🤖 可直接完成 | 检测地面、切换Tile、耕地记录 |
| 锄头动画集成 | 👤 需要确认 | 确认锄头使用Crush动画 |
| 精力消耗逻辑 | 🤖 可直接完成 | 锄地消耗3点精力 |
| 泥土飞溅粒子效果 | 🎨 需要资源 | 需要粒子素材或使用Unity内置 |

#### 第12天：种子与种植系统

| 任务 | 类型 | 说明 |
|------|------|------|
| 创建SeedData ScriptableObject | 🤖 可直接完成 | 已有基础结构，需完善 |
| 创建5种基础种子数据 | 👤 需要确认 | 萝卜、番茄、小麦、南瓜、草莓 |
| 创建作物Sprite资源 | 🎨 需要资源 | 每种作物4-5个生长阶段 |
| 实现PlantSeed()方法 | 🤖 可直接完成 | 季节检查、生成作物、移除种子 |
| 创建Crop.prefab预制体 | 🤖 可直接完成 | 包含SpriteRenderer和CropGrowth |

#### 第13天：浇水与作物护理

| 任务 | 类型 | 说明 |
|------|------|------|
| 浇水壶动画集成 | 👤 需要确认 | 确认使用Watering动画 |
| 水流粒子效果 | 🎨 需要资源 | 需要水流粒子素材 |
| 实现WateringSystem | 🤖 可直接完成 | 检测耕地/作物、改变湿润状态 |
| 土地湿度系统 | 🤖 可直接完成 | 24小时后变干，自动切换Tile |
| 作物需水逻辑 | 🤖 可直接完成 | 连续2天未浇水→停滞，3天→枯萎 |
| 枯萎系统 | 🤖 可直接完成 | 枯萎sprite、可清除不可收获 |

#### 第14天：收获系统

| 任务 | 类型 | 说明 |
|------|------|------|
| 作物成熟判定 | 🤖 可直接完成 | isHarvestable标记、闪烁效果 |
| 收获动画 | 👤 需要确认 | 使用Collect动画还是新动画 |
| 实现HarvestCrop()方法 | 🤖 可直接完成 | 检查成熟、生成掉落物品 |
| 可重复收获系统 | 🤖 可直接完成 | 番茄/草莓回到第2阶段 |
| 作物质量系统 | 👤 需要确认 | 普通/优质/完美，影响收获数量 |

#### 第15天：农业系统综合测试

| 任务 | 类型 | 说明 |
|------|------|------|
| 完整流程测试 | ⚙️ 需要操作 | 耕地→种植→浇水→生长→收获 |
| 平衡性调整 | 👤 需要确认 | 生长时间、精力消耗、收获数量 |
| Bug修复 | 🤖 可直接完成 | 根据测试结果修复 |
| 数据完善 | 👤 需要确认 | 确认10种作物配置 |

---

### 第二周：场景与战斗（第16-20天）

#### 第16天：主场景规划与地形搭建

| 任务 | 类型 | 说明 |
|------|------|------|
| 场景布局设计 | 👤 需要确认 | 100x80格，6个主要区域 |
| Tilemap层级创建 | ⚙️ 需要操作 | Ground、Detail、Farmland等 |
| 基础地形绘制 | ⚙️ 需要操作 | 草地、森林、矿区 |
| 碰撞层设置 | 🤖 可直接完成 | Tilemap Collider2D配置 |

#### 第17天：资源点分布与场景完善

| 任务 | 类型 | 说明 |
|------|------|------|
| 树木分布 | ⚙️ 需要操作 | 森林40-60棵、农场5-10棵 |
| 岩石/矿石分布 | ⚙️ 需要操作 | 矿区30-50个 |
| 功能性建筑放置 | 🎨 需要资源 | 玩家小屋、工具棚、井等 |
| 导航网格验证 | 🤖 可直接完成 | 确认覆盖整个场景 |

#### 第18天：音效系统集成

| 任务 | 类型 | 说明 |
|------|------|------|
| 创建AudioManager | 🤖 可直接完成 | BGM播放、SFX管理、音量控制 |
| 音效文件夹结构 | 🤖 可直接完成 | BGM、SFX/Actions/UI/Environment |
| 音效资源准备 | 🎨 需要资源 | BGM 4首、SFX 20+个 |
| 动作音效集成 | 🤖 可直接完成 | 砍树、挖矿、锄地、浇水等 |
| UI音效集成 | 🤖 可直接完成 | 按钮点击、背包开关等 |

#### 第19天：生命值系统

| 任务 | 类型 | 说明 |
|------|------|------|
| 创建HealthSystem | 🤖 可直接完成 | currentHealth、TakeDamage、Heal |
| 血量UI | 🤖 可直接完成 | 心形图标+红色血条 |
| 受伤反馈 | 🤖 可直接完成 | 角色闪红、屏幕闪烁、击退 |
| 死亡机制 | 👤 需要确认 | 死亡动画、Game Over界面 |
| 无敌时间 | 🤖 可直接完成 | 1.5秒，角色闪烁 |

#### 第20天：基础怪物系统

| 任务 | 类型 | 说明 |
|------|------|------|
| 创建EnemyData | 🤖 可直接完成 | 名称、血量、速度、攻击、掉落表 |
| 怪物预制体 | 🎨 需要资源 | 需要怪物Sprite和动画 |
| 怪物动画 | 🎨 需要资源 | Idle、Move、Attack、Hurt、Death |
| 实现EnemyAI状态机 | 🤖 可直接完成 | Idle、Chase、Attack、Hurt、Death |
| 攻击检测与伤害 | 🤖 可直接完成 | 碰撞检测、伤害计算 |
| 怪物掉落系统 | 🤖 可直接完成 | 死亡后掉落物品 |

---

## 📊 任务统计

### 按类型统计

| 类型 | 数量 | 说明 |
|------|------|------|
| 🤖 可直接完成 | 28 | AI可独立完成的编码任务 |
| 👤 需要确认 | 12 | 需要用户确认需求或设计 |
| 🎨 需要资源 | 10 | 需要美术/音效资源 |
| ⚙️ 需要操作 | 8 | 需要在Unity编辑器中操作 |

### 按优先级统计

| 优先级 | 任务 |
|--------|------|
| P0 (必须) | 种植系统核心、场景基础、血量系统 |
| P1 (重要) | 音效系统、怪物AI、收获系统 |
| P2 (可选) | 粒子效果、作物质量、可重复收获 |

---

## 🚀 立即可开始的任务

以下任务可以立即开始，无需等待资源或确认：

### 代码任务
1. **FarmingManager核心逻辑** - 完善耕地检测、状态管理
2. **SeedData完善** - 添加缺失字段
3. **PlantSeed()方法** - 种植逻辑实现
4. **WateringSystem** - 浇水逻辑实现
5. **CropGrowthSystem完善** - 生长、枯萎逻辑
6. **HarvestCrop()方法** - 收获逻辑
7. **AudioManager框架** - 音效管理器基础结构
8. **HealthSystem** - 血量系统
9. **EnemyAI状态机** - 怪物AI基础

### 配置任务
1. **Tilemap Collider2D配置** - 碰撞层设置
2. **导航网格验证** - 确认场景覆盖

---

## ❓ 需要用户确认的问题

### 设计决策
1. **锄头动画**：使用Crush动画还是新建Hoe动画？
2. **收获动画**：使用Collect动画还是新建Harvest动画？
3. **作物质量系统**：是否实现？影响收获数量的倍率？
4. **死亡机制**：Game Over后重生还是读档？
5. **场景布局**：6个区域的具体位置和大小？

### 数据配置
1. **5种基础种子**：萝卜、番茄、小麦、南瓜、草莓的生长天数？
2. **精力消耗**：锄地3点、浇水2点是否合适？
3. **怪物属性**：史莱姆的血量、攻击力、移动速度？

---

## 🎨 需要准备的资源清单

### 美术资源
| 资源 | 数量 | 说明 |
|------|------|------|
| 耕地Tile | 5种 | 未耕作/已耕作/湿润/干燥/枯萎 |
| 作物Sprite | 50+ | 10种作物 × 5个生长阶段 |
| 怪物Sprite | 20+ | 史莱姆5个状态 × 4帧 |
| 建筑Sprite | 5+ | 玩家小屋、工具棚、井等 |
| 粒子素材 | 3+ | 泥土飞溅、水流、破碎 |

### 音效资源
| 资源 | 数量 | 说明 |
|------|------|------|
| BGM | 4首 | 白天/夜晚/战斗/室内 |
| 动作SFX | 10+ | 砍树、挖矿、锄地、浇水等 |
| UI SFX | 5+ | 按钮点击、背包开关等 |
| 环境SFX | 3+ | 风声、鸟叫、水流 |

---

## 📅 建议执行顺序

### 第一步：确认设计决策
请先回答"需要用户确认的问题"部分

### 第二步：准备资源
开始收集/制作美术和音效资源

### 第三步：开始编码
从"立即可开始的任务"开始执行

### 第四步：Unity操作
在编辑器中创建Tilemap、放置物体等

---

## 🎯 成功标准

### 第二阶段完成标准
- ✅ 完整的种田循环（耕地→种植→浇水→收获）
- ✅ 至少10种作物
- ✅ 完整的世界地图（100x80格）
- ✅ 基础音效系统
- ✅ 玩家血量系统
- ✅ 至少1种怪物
- ✅ 性能稳定（30+ FPS）

---

*文档结束 - 请先确认设计决策和资源准备情况*
