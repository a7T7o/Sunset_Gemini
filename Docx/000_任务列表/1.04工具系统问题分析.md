# å·¥å…·ç³»ç»Ÿé—®é¢˜åˆ†ææŠ¥å‘Š

**æ—¥æœŸ**: 2026-01-04  
**çŠ¶æ€**: âœ… å…¨éƒ¨ä¿®å¤å®Œæˆ  
**ä¼˜å…ˆçº§**: é«˜

---

## ä¸€ã€æ ‘æœ¨ç³»ç»Ÿä¸ç æ ‘ç³»ç»Ÿè¯¦ç»†å®ç°

### 1.1 TreeController æ ¸å¿ƒæ¶æ„

**æ–‡ä»¶ä½ç½®**: `Assets/YYY_Scripts/Controller/TreeController.cs`

**å±‚çº§ç»“æ„**:
```
Tree_M1_00 (çˆ¶ç‰©ä½“) â† ä½ç½® = æ ‘æ ¹ = ç§æ¤ç‚¹
â”œâ”€ Tree (æœ¬è„šæœ¬æ‰€åœ¨ï¼ŒSpriteRenderer) â† spriteåº•éƒ¨å¯¹é½çˆ¶ç‰©ä½“ä¸­å¿ƒ
â””â”€ Shadow (åŒçº§å…„å¼Ÿï¼ŒSpriteRenderer) â† ä¸­å¿ƒå¯¹é½çˆ¶ç‰©ä½“ä¸­å¿ƒ
```

**æ ¸å¿ƒçŠ¶æ€**:
- `GrowthStage`: Sapling(æ ‘è‹—), Small(å°æ ‘), Large(å¤§æ ‘)
- `TreeState`: Normal, Withered, Frozen, Melted, Stump

**ç ä¼é…ç½®**:
```csharp
[Range(1, 10)] public int chopCountSmall = 3;  // å°æ ‘ç ä¼æ¬¡æ•°
[Range(1, 20)] public int chopCountLarge = 7;  // å¤§æ ‘ç ä¼æ¬¡æ•°
[SerializeField] private int currentChopCount = 0;  // å½“å‰å‰©ä½™æ¬¡æ•°
```

### 1.2 TreeController å‘½ä¸­æ£€æµ‹é€»è¾‘

**IResourceNode æ¥å£å®ç°**:
```csharp
public string ResourceTag => "Tree";
public bool IsDepleted => currentState == TreeState.Stump || currentStage == GrowthStage.Sapling;
```

**CanAccept æ–¹æ³•** (ç¬¬1121-1133è¡Œ):
```csharp
public bool CanAccept(ToolHitContext ctx)
{
    // åªæœ‰æ–§å¤´èƒ½å¯¹æ ‘æœ¨é€ æˆä¼¤å®³
    if (ctx.toolType != ToolType.Axe) return false;
    
    // æ ‘æ¡©ä¸èƒ½å†ç 
    if (currentState == TreeState.Stump) return false;
    
    // æ ‘è‹—ä¸èƒ½ç 
    if (currentStage == GrowthStage.Sapling) return false;
    
    return true;
}
```

**OnHit æ–¹æ³•** (ç¬¬1138-1240è¡Œ):
```csharp
public void OnHit(ToolHitContext ctx)
{
    // æ ‘æ¡©å’Œæ ‘è‹—ä¸å“åº”
    if (currentState == TreeState.Stump) return;
    if (currentStage == GrowthStage.Sapling) return;
    
    // è®°å½•ç©å®¶æœå‘ï¼ˆç”¨äºå€’ä¸‹åŠ¨ç”»ï¼‰
    // ...
    
    bool isCorrectTool = CanAccept(ctx);
    
    if (isCorrectTool)
    {
        // æ¶ˆè€—ç²¾åŠ›
        float energyCost = 2f;
        if (ctx.attacker != null)
        {
            var toolController = ctx.attacker.GetComponent<PlayerToolController>();
            if (toolController != null && toolController.CurrentToolData != null)
            {
                var toolData = toolController.CurrentToolData as ToolData;
                if (toolData != null)
                {
                    energyCost = toolData.energyCost;
                }
            }
        }
        
        // æ‰£è¡€
        int damage = Mathf.Max(1, Mathf.RoundToInt(ctx.baseDamage));
        bool felled = TakeDamage(damage);
        // ...
    }
}
```

### 1.3 ç æ ‘ç³»ç»Ÿå…³é”®å‘ç°

**ğŸ”´ é—®é¢˜1: TreeController å®Œå…¨æ²¡æœ‰ä½¿ç”¨æ–§å¤´ææ–™ç­‰çº§åˆ¤å®šï¼**

æœç´¢ `materialTier`ã€`GetMaterialTier`ã€`axeTier` åœ¨ TreeController ä¸­å‡æ— ç»“æœã€‚

TreeController çš„ CanAccept æ–¹æ³•åªæ£€æŸ¥ï¼š
1. å·¥å…·ç±»å‹æ˜¯å¦ä¸ºæ–§å¤´ (`ctx.toolType != ToolType.Axe`)
2. æ ‘çš„çŠ¶æ€æ˜¯å¦ä¸ºæ ‘æ¡©
3. æ ‘çš„é˜¶æ®µæ˜¯å¦ä¸ºæ ‘è‹—

**å®Œå…¨æ²¡æœ‰æ£€æŸ¥æ–§å¤´çš„ææ–™ç­‰çº§ï¼**

---

## äºŒã€çŸ³å¤´ç³»ç»Ÿä¸æŒ–çŸ¿ç³»ç»Ÿè¯¦ç»†å®ç°

### 2.1 StoneController æ ¸å¿ƒæ¶æ„

**æ–‡ä»¶ä½ç½®**: `Assets/YYY_Scripts/Controller/StoneController.cs`

**å±‚çº§ç»“æ„**:
```
C1 (çˆ¶ç‰©ä½“) â† ä½ç½® = çŸ³å¤´æ ¹éƒ¨
â””â”€ Rock (æœ¬è„šæœ¬æ‰€åœ¨ï¼ŒSpriteRenderer + PolygonCollider2D)
```

**æ ¸å¿ƒçŠ¶æ€**:
- `StoneStage`: M1(æœ€å¤§), M2(ä¸­ç­‰), M3(æœ€å°/æœ€ç»ˆ), M4(è£…é¥°)
- `OreType`: None(çº¯çŸ³å¤´), C1(é“œçŸ¿), C2(é“çŸ¿), C3(é‡‘çŸ¿)
- `oreIndex`: çŸ¿ç‰©å«é‡æŒ‡æ•° (0-4)

### 2.2 StoneController å‘½ä¸­æ£€æµ‹é€»è¾‘

**IResourceNode æ¥å£å®ç°**:
```csharp
public string ResourceTag => "Rock";
public bool IsDepleted => isDepleted;
```

**CanAccept æ–¹æ³•** (ç¬¬340-360è¡Œ):
```csharp
public bool CanAccept(ToolHitContext ctx)
{
    if (isDepleted) return false;
    bool canAccept = ctx.toolType == ToolType.Pickaxe;
    return canAccept;
}
```

**OnHit æ–¹æ³•** (ç¬¬365-430è¡Œ):
```csharp
public void OnHit(ToolHitContext ctx)
{
    if (isDepleted) return;
    
    // åªæœ‰é•å­èƒ½æœ‰æ•ˆæŒ–æ˜
    if (ctx.toolType != ToolType.Pickaxe)
    {
        PlayShakeEffect();
        return;
    }
    
    // â˜…â˜…â˜… è·å–é•å­ææ–™ç­‰çº§ â˜…â˜…â˜…
    int pickaxeTier = GetPickaxeTier(ctx);
    lastHitPickaxeTier = pickaxeTier;
    
    // æ£€æŸ¥æ˜¯å¦èƒ½è·å–çŸ¿ç‰©
    lastHitCanGetOre = MaterialTierHelper.CanMineOre(pickaxeTier, oreType);
    
    // è®¡ç®—ä¼¤å®³å¹¶æ‰£è¡€
    int damage = Mathf.Max(1, Mathf.RoundToInt(ctx.baseDamage));
    TakeDamage(damage);
}
```

**GetPickaxeTier æ–¹æ³•** (ç¬¬830-860è¡Œ):
```csharp
private int GetPickaxeTier(ToolHitContext ctx)
{
    if (ctx.attacker != null)
    {
        var toolController = ctx.attacker.GetComponent<PlayerToolController>();
        if (toolController != null && toolController.CurrentToolData != null)
        {
            var toolData = toolController.CurrentToolData as ToolData;
            if (toolData != null)
            {
                int tier = toolData.GetMaterialTierValue();  // â˜… è°ƒç”¨ ToolData.GetMaterialTierValue()
                return tier;
            }
        }
    }
    return 0; // é»˜è®¤æœ¨è´¨
}
```

### 2.3 MaterialTierHelper å·¥å…·ç±»

**æ–‡ä»¶ä½ç½®**: `Assets/YYY_Scripts/Utils/MaterialTierHelper.cs`

**é•å­é‡‡é›†åˆ¤å®š**:
```csharp
public static bool CanMineOre(int pickaxeTier, OreType oreType)
{
    if (oreType == OreType.None) return true;
    
    switch (oreType)
    {
        case OreType.C2: // é“çŸ¿ - éœ€è¦çŸ³é•(1)æˆ–æ›´é«˜
            return pickaxeTier >= 1;
        case OreType.C1: // é“œçŸ¿ - éœ€è¦ç”Ÿé“é•(2)æˆ–æ›´é«˜
            return pickaxeTier >= 2;
        case OreType.C3: // é‡‘çŸ¿ - éœ€è¦é’¢é•(4)æˆ–æ›´é«˜
            return pickaxeTier >= 4;
        default:
            return true;
    }
}
```

---

## ä¸‰ã€ToolData SO å‚æ•°è®¾è®¡

### 3.1 ToolData ç±»å®šä¹‰

**æ–‡ä»¶ä½ç½®**: `Assets/YYY_Scripts/Data/Items/ToolData.cs`

**ææ–™ç­‰çº§å­—æ®µ**:
```csharp
[Header("=== ææ–™ç­‰çº§ ===")]
[Tooltip("å·¥å…·çš„ææ–™ç­‰çº§ï¼ˆ0=æœ¨è´¨, 1=çŸ³è´¨, 2=ç”Ÿé“, 3=é»„é“œ, 4=é’¢è´¨, 5=é‡‘è´¨ï¼‰")]
public MaterialTier materialTier = MaterialTier.Wood;  // â˜… é»˜è®¤å€¼ä¸º Wood(0)

public int GetMaterialTierValue()
{
    return (int)materialTier;
}
```

### 3.2 MaterialTier æšä¸¾å®šä¹‰

**æ–‡ä»¶ä½ç½®**: `Assets/YYY_Scripts/Data/Enums/StoneEnums.cs`

```csharp
public enum MaterialTier
{
    Wood = 0,    // æœ¨è´¨ - æœ€ä½ç­‰çº§
    Stone = 1,   // çŸ³è´¨
    Iron = 2,    // ç”Ÿé“
    Brass = 3,   // é»„é“œ
    Steel = 4,   // é’¢è´¨
    Gold = 5     // é‡‘è´¨ - æœ€é«˜ç­‰çº§
}
```

### 3.3 SO æ–‡ä»¶å‘½åè§„èŒƒ

**å½“å‰å‘½å**: `Tool_{ItemID}_{ToolType}_{MaterialTierSuffix}.asset`

| æ–‡ä»¶å | ItemID | å·¥å…·ç±»å‹ | åç¼€æ•°å­— | æœŸæœ›ç­‰çº§ |
|--------|--------|----------|----------|----------|
| Tool_0_Axe_0 | 0 | æ–§å¤´ | 0 | Wood(0) |
| Tool_1_Axe_1 | 1 | æ–§å¤´ | 1 | Stone(1) |
| Tool_2_Axe_2 | 2 | æ–§å¤´ | 2 | Iron(2) |
| Tool_6_Pickaxe_0 | 6 | é•å­ | 0 | Wood(0) |
| Tool_7_Pickaxe_1 | 7 | é•å­ | 1 | Stone(1) |
| Tool_8_Pickaxe_2 | 8 | é•å­ | 2 | Iron(2) |

**ğŸ”´ é—®é¢˜: æ–‡ä»¶ååç¼€å·²ç»è¡¨æ˜äº†ææ–™ç­‰çº§ï¼Œä½† SO å†…éƒ¨çš„ materialTier å­—æ®µå…¨éƒ¨æ˜¯é»˜è®¤å€¼ 0ï¼**

---

## å››ã€ç æ ‘ä¸æŒ–çŸ¿è·å–å·¥å…·ç­‰çº§çš„æ–¹å¼å¯¹æ¯”

### 4.1 ç æ ‘ç³»ç»Ÿï¼ˆTreeControllerï¼‰

**è·å–æ–¹å¼**: âŒ **å®Œå…¨æ²¡æœ‰è·å–æ–§å¤´ç­‰çº§ï¼**

TreeController çš„ OnHit æ–¹æ³•åªè·å–äº†ï¼š
- `energyCost`ï¼ˆç²¾åŠ›æ¶ˆè€—ï¼‰
- `baseDamage`ï¼ˆåŸºç¡€ä¼¤å®³ï¼‰

**æ²¡æœ‰è°ƒç”¨** `toolData.GetMaterialTierValue()` æˆ–ä»»ä½•ç­‰çº§åˆ¤å®šé€»è¾‘ã€‚

### 4.2 æŒ–çŸ¿ç³»ç»Ÿï¼ˆStoneControllerï¼‰

**è·å–æ–¹å¼**: âœ… æ­£ç¡®å®ç°

```csharp
private int GetPickaxeTier(ToolHitContext ctx)
{
    // ...
    int tier = toolData.GetMaterialTierValue();  // âœ… æ­£ç¡®è°ƒç”¨
    return tier;
}
```

ç„¶åä½¿ç”¨ `MaterialTierHelper.CanMineOre(pickaxeTier, oreType)` åˆ¤å®šã€‚

### 4.3 å¯¹æ¯”æ€»ç»“

| ç³»ç»Ÿ | è·å–ç­‰çº§æ–¹å¼ | ç­‰çº§åˆ¤å®š | é—®é¢˜ |
|------|-------------|----------|------|
| ç æ ‘ | âŒ æœªå®ç° | âŒ æœªå®ç° | ä»»ä½•æ–§å¤´éƒ½èƒ½ç ä»»ä½•æ ‘ |
| æŒ–çŸ¿ | âœ… GetMaterialTierValue() | âœ… MaterialTierHelper | SO æ•°æ®å…¨æ˜¯é»˜è®¤å€¼ |

---

## äº”ã€å‘ç°çš„æ‰€æœ‰é—®é¢˜

### 5.1 ğŸ”´ ä¸¥é‡é—®é¢˜

#### é—®é¢˜1: SO æ–‡ä»¶ materialTier å­—æ®µå…¨éƒ¨ä¸ºé»˜è®¤å€¼

**ç°è±¡**: æ‰€æœ‰å·¥å…· SO çš„ `materialTier` å­—æ®µéƒ½æ˜¯ `0`ï¼ˆWoodï¼‰

**è¯æ®**:
```yaml
# Tool_0_Axe_0.asset
materialTier: 0  # æ­£ç¡®ï¼Œæœ¨æ–§

# Tool_8_Pickaxe_2.asset  
materialTier: 0  # âŒ é”™è¯¯ï¼åº”è¯¥æ˜¯ 2ï¼ˆIronï¼‰
```

**å½±å“**: 
- æ‰€æœ‰é•å­éƒ½è¢«è§†ä¸ºæœ¨é•ï¼Œæ— æ³•é‡‡é›†ä»»ä½•çŸ¿ç‰©
- æŒ–çŸ¿ç³»ç»Ÿçš„ç­‰çº§åˆ¤å®šå½¢åŒè™šè®¾

**æ ¹æœ¬åŸå› **: 
- åˆ›å»º SO æ—¶æ²¡æœ‰æ ¹æ®æ–‡ä»¶ååç¼€è‡ªåŠ¨è®¾ç½® materialTier
- ToolData çš„é»˜è®¤å€¼æ˜¯ `MaterialTier.Wood`

#### é—®é¢˜2: TreeController å®Œå…¨æ²¡æœ‰æ–§å¤´ç­‰çº§åˆ¤å®š

**ç°è±¡**: TreeController çš„ CanAccept å’Œ OnHit æ–¹æ³•éƒ½æ²¡æœ‰æ£€æŸ¥æ–§å¤´ææ–™ç­‰çº§

**å½±å“**: 
- æœ¨æ–§å¯ä»¥ç ä»»ä½•æ ‘
- MaterialTierHelper.CanChopTree() æ–¹æ³•å­˜åœ¨ä½†ä»æœªè¢«è°ƒç”¨

**ä»£ç è¯æ®**:
```csharp
// TreeController.CanAccept() - åªæ£€æŸ¥å·¥å…·ç±»å‹
public bool CanAccept(ToolHitContext ctx)
{
    if (ctx.toolType != ToolType.Axe) return false;  // åªæ£€æŸ¥æ˜¯å¦æ˜¯æ–§å¤´
    // âŒ æ²¡æœ‰æ£€æŸ¥æ–§å¤´ç­‰çº§ï¼
    return true;
}
```

### 5.2 ğŸŸ¡ è®¾è®¡ä¸ä¸€è‡´é—®é¢˜

#### é—®é¢˜3: ä¸¤ä¸ªç³»ç»Ÿçš„ç­‰çº§åˆ¤å®šé€»è¾‘ä¸ç»Ÿä¸€

| æ–¹é¢ | ç æ ‘ç³»ç»Ÿ | æŒ–çŸ¿ç³»ç»Ÿ |
|------|----------|----------|
| ç­‰çº§è·å– | æœªå®ç° | GetPickaxeTier() |
| ç­‰çº§åˆ¤å®š | æœªå®ç° | MaterialTierHelper.CanMineOre() |
| ç­‰çº§ä¸è¶³å¤„ç† | æ—  | åªèƒ½è·å¾—çŸ³æ–™ï¼Œæ— æ³•è·å¾—çŸ¿ç‰© |

#### é—®é¢˜4: MaterialTierHelper ä¸­çš„æ–§å¤´åˆ¤å®šæ–¹æ³•æœªè¢«ä½¿ç”¨

`MaterialTierHelper.cs` ä¸­å®šä¹‰äº†å®Œæ•´çš„æ–§å¤´ç­‰çº§åˆ¤å®šï¼š
```csharp
public static bool CanChopTree(int axeTier, int treeStage)
{
    int requiredTier = GetRequiredAxeTier(treeStage);
    return axeTier >= requiredTier;
}

public static int GetRequiredAxeTier(int treeStage)
{
    return treeStage switch
    {
        0 => 0,  // æ ‘è‹—ï¼šæœ¨æ–§
        1 => 0,  // å°æ ‘è‹—ï¼šæœ¨æ–§
        2 => 0,  // ä¸­ç­‰æ ‘ï¼šæœ¨æ–§
        3 => 0,  // å¤§æ ‘ï¼šæœ¨æ–§
        4 => 2,  // æˆç†Ÿæ ‘ï¼šç”Ÿé“æ–§
        5 => 3,  // å®Œå…¨æˆç†Ÿï¼šé»„é“œæ–§
        _ => 0
    };
}
```

ä½† TreeController ä»æœªè°ƒç”¨è¿™äº›æ–¹æ³•ï¼

### 5.3 ğŸŸ¢ æ½œåœ¨é—®é¢˜

#### é—®é¢˜5: ä¼¤å®³è®¡ç®—é€»è¾‘ä¸ä¸€è‡´

**ç æ ‘**: ä½¿ç”¨ `ctx.baseDamage`ï¼Œç”± PlayerToolHitEmitter è®¡ç®—
**æŒ–çŸ¿**: åŒæ ·ä½¿ç”¨ `ctx.baseDamage`

ä½† PlayerToolHitEmitter çš„ `GetToolBaseDamage()` æ–¹æ³•åªä¸ºæ–§å¤´å®ç°äº†åŸºäºææ–™ç­‰çº§çš„ä¼¤å®³ï¼š
```csharp
if (toolData.toolType == ToolType.Axe)
{
    return toolData.materialTier switch
    {
        MaterialTier.Wood => 2f,
        MaterialTier.Stone => 3f,
        // ...
    };
}
return 1f;  // å…¶ä»–å·¥å…·é»˜è®¤ä¼¤å®³
```

é•å­çš„ä¼¤å®³æ²¡æœ‰åŸºäºææ–™ç­‰çº§è®¡ç®—ã€‚

#### é—®é¢˜6: æ ‘æœ¨é˜¶æ®µä¸ MaterialTierHelper å®šä¹‰ä¸åŒ¹é…

TreeController ä½¿ç”¨ `GrowthStage` æšä¸¾ï¼š
- Sapling (0), Small (1), Large (2)

MaterialTierHelper.GetRequiredAxeTier() ä½¿ç”¨ 0-5 çš„æ•´æ•°ï¼š
- 0-3: æœ¨æ–§
- 4: ç”Ÿé“æ–§
- 5: é»„é“œæ–§

ä¸¤è€…çš„é˜¶æ®µå®šä¹‰ä¸ä¸€è‡´ï¼Œå³ä½¿è°ƒç”¨ä¹Ÿä¼šå‡ºé—®é¢˜ã€‚

---

## å…­ã€æ€§èƒ½ä¸åç»­ç®¡ç†é—®é¢˜

### 6.1 æ€§èƒ½é—®é¢˜

1. **æ¯æ¬¡å‘½ä¸­éƒ½è·å–ç»„ä»¶**: GetPickaxeTier() æ¯æ¬¡éƒ½è°ƒç”¨ `GetComponent<PlayerToolController>()`
   - å»ºè®®: ç¼“å­˜ PlayerToolController å¼•ç”¨

2. **é‡å¤çš„ç±»å‹è½¬æ¢**: `toolController.CurrentToolData as ToolData` æ¯æ¬¡å‘½ä¸­éƒ½æ‰§è¡Œ
   - å»ºè®®: åœ¨ ToolHitContext ä¸­ç›´æ¥ä¼ é€’ ToolData å¼•ç”¨

### 6.2 åç»­ç®¡ç†é—®é¢˜

1. **SO åˆ›å»ºæµç¨‹ç¼ºå¤±**: æ²¡æœ‰è‡ªåŠ¨åŒ–å·¥å…·æ ¹æ®æ–‡ä»¶åè®¾ç½® materialTier
   - å»ºè®®: åˆ›å»ºç¼–è¾‘å™¨å·¥å…·ï¼Œæ‰¹é‡ä¿®å¤ç°æœ‰ SO æˆ–åœ¨åˆ›å»ºæ—¶è‡ªåŠ¨è®¾ç½®

2. **ç¼ºå°‘æ•°æ®éªŒè¯**: ToolData.OnValidate() æ²¡æœ‰éªŒè¯ materialTier ä¸æ–‡ä»¶åçš„ä¸€è‡´æ€§
   - å»ºè®®: æ·»åŠ éªŒè¯é€»è¾‘

3. **æ–‡æ¡£ä¸å®Œæ•´**: MaterialTierHelper çš„ä½¿ç”¨æ–¹å¼æ²¡æœ‰åœ¨ steering æ–‡ä»¶ä¸­è¯´æ˜
   - å»ºè®®: æ›´æ–° steering æ–‡ä»¶

---

## ä¸ƒã€ä¿®å¤å»ºè®®

### 7.1 ç´§æ€¥ä¿®å¤ï¼ˆç«‹å³æ‰§è¡Œï¼‰

1. **æ‰¹é‡ä¿®å¤æ‰€æœ‰å·¥å…· SO çš„ materialTier å­—æ®µ**
   - æ ¹æ®æ–‡ä»¶ååç¼€è®¾ç½®æ­£ç¡®çš„ materialTier å€¼
   - ä¾‹å¦‚: Tool_8_Pickaxe_2 â†’ materialTier = 2 (Iron)

### 7.2 çŸ­æœŸä¿®å¤ï¼ˆæœ¬å‘¨å†…ï¼‰

2. **ä¸º TreeController æ·»åŠ æ–§å¤´ç­‰çº§åˆ¤å®š** âœ… å·²å®Œæˆ
   - åœ¨ CanAccept() ä¸­è°ƒç”¨ MaterialTierHelper.CanChopTree()
   - æ›´æ–° MaterialTierHelper çš„æ–§å¤´ç­‰çº§åˆ¤å®šé€»è¾‘
   - æ·»åŠ æ–§å¤´ç­‰çº§ä¸è¶³æ—¶çš„åé¦ˆï¼ˆæŠ–åŠ¨+æ—¥å¿—æç¤ºï¼‰

3. **ç»Ÿä¸€ä¸¤ä¸ªç³»ç»Ÿçš„ç­‰çº§è·å–é€»è¾‘**
   - æå–å…¬å…±æ–¹æ³•åˆ° ToolHitContext æˆ–å·¥å…·ç±»

### 7.3 é•¿æœŸä¼˜åŒ–ï¼ˆåç»­è¿­ä»£ï¼‰

4. **åˆ›å»º SO è‡ªåŠ¨åŒ–å·¥å…·**
   - æ ¹æ®æ–‡ä»¶åè‡ªåŠ¨è®¾ç½® materialTier
   - æ·»åŠ æ‰¹é‡éªŒè¯å’Œä¿®å¤åŠŸèƒ½

5. **ä¼˜åŒ–æ€§èƒ½**
   - ç¼“å­˜ç»„ä»¶å¼•ç”¨
   - åœ¨ ToolHitContext ä¸­ä¼ é€’æ›´å¤šé¢„è®¡ç®—æ•°æ®

6. **å®Œå–„æ–‡æ¡£**
   - æ›´æ–° steering æ–‡ä»¶
   - æ·»åŠ å·¥å…·ç­‰çº§ç³»ç»Ÿçš„è®¾è®¡æ–‡æ¡£

---

## å…«ã€ç›¸å…³æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒè„šæœ¬
| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `Assets/YYY_Scripts/Controller/TreeController.cs` | æ ‘æœ¨æ§åˆ¶å™¨ |
| `Assets/YYY_Scripts/Controller/StoneController.cs` | çŸ³å¤´æ§åˆ¶å™¨ |
| `Assets/YYY_Scripts/Data/Items/ToolData.cs` | å·¥å…·æ•°æ®å®šä¹‰ |
| `Assets/YYY_Scripts/Utils/MaterialTierHelper.cs` | ææ–™ç­‰çº§åˆ¤å®šå·¥å…· |
| `Assets/YYY_Scripts/Combat/PlayerToolHitEmitter.cs` | å‘½ä¸­æ£€æµ‹å‘å°„å™¨ |
| `Assets/YYY_Scripts/Data/Enums/StoneEnums.cs` | çŸ³å¤´å’Œææ–™ç­‰çº§æšä¸¾ |

### SO æ–‡ä»¶
| æ–‡ä»¶ | å½“å‰ materialTier | æ­£ç¡®å€¼ |
|------|-------------------|--------|
| Tool_0_Axe_0.asset | 0 | 0 âœ… |
| Tool_1_Axe_1.asset | 0 | 1 âŒ |
| Tool_2_Axe_2.asset | 0 | 2 âŒ |
| Tool_6_Pickaxe_0.asset | 0 | 0 âœ… |
| Tool_7_Pickaxe_1.asset | 0 | 1 âŒ |
| Tool_8_Pickaxe_2.asset | 0 | 2 âŒ |
| ... | ... | ... |

---

**æŠ¥å‘Šå®Œæˆæ—¶é—´**: 2026-01-04
